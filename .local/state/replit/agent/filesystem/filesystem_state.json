{"file_contents":{"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","size_bytes":325},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"replit.md":{"content":"# Xcrow - Escrow Transaction Platform\n\n## Overview\n\nXcrow is a secure escrow transaction platform built with a modern full-stack architecture. The application facilitates safe transactions between buyers and sellers by holding funds until both parties confirm the exchange. It integrates with Paystack for payment processing and provides a complete workflow from transaction creation to completion.\n\nThe platform allows sellers to create transaction links, buyers to make payments through Paystack, and both parties to track the transaction status through multiple stages (pending → paid → asset transferred → completed).\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\n### Frontend Architecture\n\n**Framework**: React with TypeScript\n- **Routing**: Wouter for client-side routing\n- **State Management**: TanStack React Query for server state management\n- **Form Handling**: React Hook Form with Zod validation\n- **UI Components**: Shadcn/ui component library built on Radix UI primitives\n- **Styling**: Tailwind CSS with CSS variables for theming\n\n**Key Design Decisions**:\n- Component-based architecture with reusable UI components in `client/src/components/ui/`\n- Form validation using Zod schemas shared between frontend and backend\n- React Query for caching and synchronizing server state, reducing unnecessary API calls\n- Wouter chosen for lightweight routing without React Router overhead\n\n### Backend Architecture\n\n**Framework**: Express.js with TypeScript\n- **Runtime**: Node.js with ESM modules\n- **Database ORM**: Drizzle ORM with PostgreSQL dialect\n- **Authentication**: Passport.js with Local Strategy using bcrypt for password hashing\n- **Session Management**: Express-session with configurable session store\n- **API Design**: RESTful API endpoints organized in `/api/*` routes\n\n**Key Design Decisions**:\n- Session-based authentication chosen over JWT for simplicity and built-in CSRF protection\n- Bcrypt with 10 salt rounds for password hashing balancing security and performance\n- Modular route organization in `server/routes.ts` for maintainability\n- Database abstraction layer (`IStorage` interface) allowing for future storage implementations\n- Middleware for request logging and error handling\n\n### Database Architecture\n\n**Database**: PostgreSQL via Neon serverless driver\n- **ORM**: Drizzle ORM for type-safe database queries\n- **Schema Location**: `shared/schema.ts` for shared types between frontend and backend\n\n**Schema Design**:\n- **Users Table**: Stores user credentials, profile info, bank account details (bankCode, accountNumber, accountName, recipientCode), and optional referral codes\n- **Transactions Table**: Tracks escrow transactions with status workflow and Paystack references\n- **Transaction Statuses**: Enforced state machine with four states:\n  - `pending`: Initial state after creation\n  - `paid`: After successful Paystack payment\n  - `asset_transferred`: Seller confirms asset delivery\n  - `completed`: Buyer confirms receipt, triggers automatic payout to seller\n- **Payouts Table**: Tracks automatic payouts to sellers with status tracking\n  - `transactionId`: Unique constraint ensures one payout per transaction (idempotency)\n  - `status`: pending → processing → success/failed\n  - Stores Paystack transfer codes and references for reconciliation\n\n**Key Design Decisions**:\n- UUID primary keys for security and distributed system compatibility\n- Decimal type for monetary values to avoid floating-point precision issues\n- Unique link generation for transaction sharing\n- Foreign key constraints for data integrity\n- Timestamps for audit trails (createdAt, updatedAt)\n- Unique constraint on payouts.transactionId prevents duplicate transfers\n\n### Authentication & Authorization\n\n**Strategy**: Session-based authentication with Passport.js\n- Local strategy with email/password credentials\n- Session cookies with httpOnly and sameSite flags for security\n- Password hashing with bcrypt (10 salt rounds)\n- Session secret from environment variables\n- 24-hour session expiration\n\n**Key Design Decisions**:\n- Session-based auth chosen for simplicity and automatic CSRF protection\n- Sessions stored server-side (default in-memory, extensible to PostgreSQL with connect-pg-simple)\n- Secure cookies in production, relaxed in development\n- Automatic login after signup for improved UX\n- Session regeneration on login to prevent fixation attacks\n\n### Payment & Payout Integration\n\n**Provider**: Paystack API\n- **Payment Processing**: Initialize payments with transaction metadata\n- **Webhook Validation**: Secure payment verification via webhooks\n- **Transfer API**: Automatic payouts to sellers' Nigerian bank accounts\n- **Bank Account Verification**: Validate account details before setup\n- **Transfer Recipients**: Create Paystack recipients for reliable transfers\n\n**Payment Flow**:\n1. Buyer initiates payment → Paystack checkout\n2. Payment successful → Webhook sets transaction to \"paid\"\n3. Seller marks asset transferred\n4. Buyer confirms receipt → Status becomes \"completed\"\n5. **Automatic payout**: Platform immediately transfers (price - 5% commission) to seller's bank account\n\n**Payout System**:\n- **Bank Account Setup** (Settings page):\n  - Sellers add Nigerian bank account details\n  - System verifies account with Paystack (confirms account name matches)\n  - Creates Paystack transfer recipient (recipientCode stored in users table)\n- **Automatic Transfers**:\n  - Triggered when transaction status becomes \"completed\"\n  - Calculates payout: transaction price - commission (5%)\n  - Creates payout record with unique transaction constraint\n  - Initiates Paystack transfer with stable reference (PAYOUT-{payoutId})\n  - Updates payout status to success/failed based on result\n  - Idempotency guards prevent duplicate transfers\n- **Payout History**:\n  - Sellers view all payouts in dashboard\n  - Status tracking: pending → processing → success/failed\n  - Shows transaction details, amount, Paystack reference\n  - Failed payouts display failure reason\n\n**Key Design Decisions**:\n- Paystack chosen for African market focus (particularly Nigeria)\n- Transaction metadata includes itemName and transactionId for reconciliation\n- Webhook validation for secure payment confirmation\n- Payment reference stored in transactions table for audit trail\n- Graceful degradation if Paystack key not configured (warnings instead of crashes)\n- **Automatic payouts**: No manual withdrawal process, instant transfer on completion\n- **Idempotency**: Unique constraint on payouts.transactionId + application-level checks prevent duplicates\n- **Stable transfer references**: Use payout ID (not timestamp) for reliable reconciliation\n- **Bank account verification**: Ensures accurate payouts before first transfer\n- **Transfer error handling**: Failed payouts recorded with reason, don't block transaction completion\n\n## External Dependencies\n\n### Third-Party Services\n- **Paystack**: Payment processing API for transaction payments\n- **Neon Database**: Serverless PostgreSQL hosting\n- **Environment Variables Required**:\n  - `DATABASE_URL`: PostgreSQL connection string\n  - `PAYSTACK_SECRET_KEY`: Paystack API secret key\n  - `SESSION_SECRET`: Express session encryption key\n\n### Key Libraries\n- **Frontend**:\n  - `@tanstack/react-query`: Server state management\n  - `react-hook-form`: Form state management\n  - `zod`: Runtime type validation\n  - `@radix-ui/*`: Accessible UI primitives\n  - `tailwindcss`: Utility-first CSS framework\n  - `wouter`: Lightweight routing\n  - `axios`: HTTP client for Paystack API\n\n- **Backend**:\n  - `express`: Web framework\n  - `drizzle-orm`: Type-safe ORM\n  - `passport`: Authentication middleware\n  - `bcrypt`: Password hashing\n  - `express-session`: Session management\n  - `@neondatabase/serverless`: Neon database driver\n\n### Build Tools\n- **Vite**: Frontend build tool and dev server\n- **esbuild**: Backend bundling for production\n- **TypeScript**: Type safety across the stack\n- **Drizzle Kit**: Database migrations and schema management","size_bytes":8070},"tailwind.config.ts":{"content":"module.exports = {\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\",\n    \"./src/**/*.{html,js,ts,jsx,tsx}\",\n    \"app/**/*.{ts,tsx}\",\n    \"components/**/*.{ts,tsx}\",\n  ],\n  theme: {\n    extend: {\n      fontFamily: {\n        \"body-regular\": \"var(--body-regular-font-family)\",\n        \"poppins-regular-body\": \"var(--poppins-regular-body-font-family)\",\n        \"poppins-regular-body-lg\": \"var(--poppins-regular-body-lg-font-family)\",\n        \"poppins-regular-xs\": \"var(--poppins-regular-xs-font-family)\",\n        \"poppins-semibold-h5\": \"var(--poppins-semibold-h5-font-family)\",\n        sans: [\n          \"ui-sans-serif\",\n          \"system-ui\",\n          \"sans-serif\",\n          '\"Apple Color Emoji\"',\n          '\"Segoe UI Emoji\"',\n          '\"Segoe UI Symbol\"',\n          '\"Noto Color Emoji\"',\n        ],\n      },\n      colors: {\n        border: \"hsl(var(--border))\",\n        input: \"hsl(var(--input))\",\n        ring: \"hsl(var(--ring))\",\n        background: \"hsl(var(--background))\",\n        foreground: \"hsl(var(--foreground))\",\n        primary: {\n          DEFAULT: \"hsl(var(--primary))\",\n          foreground: \"hsl(var(--primary-foreground))\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary))\",\n          foreground: \"hsl(var(--secondary-foreground))\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive))\",\n          foreground: \"hsl(var(--destructive-foreground))\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted))\",\n          foreground: \"hsl(var(--muted-foreground))\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent))\",\n          foreground: \"hsl(var(--accent-foreground))\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover))\",\n          foreground: \"hsl(var(--popover-foreground))\",\n        },\n        card: {\n          DEFAULT: \"hsl(var(--card))\",\n          foreground: \"hsl(var(--card-foreground))\",\n        },\n      },\n      borderRadius: {\n        lg: \"var(--radius)\",\n        md: \"calc(var(--radius) - 2px)\",\n        sm: \"calc(var(--radius) - 4px)\",\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: { height: \"0\" },\n          to: { height: \"var(--radix-accordion-content-height)\" },\n        },\n        \"accordion-up\": {\n          from: { height: \"var(--radix-accordion-content-height)\" },\n          to: { height: \"0\" },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n    container: { center: true, padding: \"2rem\", screens: { \"2xl\": \"1400px\" } },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n  darkMode: [\"class\"],\n};\n","size_bytes":2738},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n          await import(\"@replit/vite-plugin-dev-banner\").then((m) =>\n            m.devBanner(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","size_bytes":1080},"server/auth.ts":{"content":"import bcrypt from \"bcrypt\";\nimport passport from \"passport\";\nimport { Strategy as LocalStrategy } from \"passport-local\";\nimport { storage } from \"./storage\";\nimport type { User } from \"@shared/schema\";\nimport type { Express } from \"express\";\nimport { getSession } from \"./replitAuth\";\n\nconst SALT_ROUNDS = 10;\n\nexport async function hashPassword(password: string): Promise<string> {\n  return bcrypt.hash(password, SALT_ROUNDS);\n}\n\nexport async function verifyPassword(password: string, hash: string): Promise<boolean> {\n  return bcrypt.compare(password, hash);\n}\n\nexport function setupAuth(app: Express) {\n  // Use database session store (required for OAuth)\n  app.set(\"trust proxy\", 1);\n  app.use(getSession());\n\n  // Initialize passport\n  app.use(passport.initialize());\n  app.use(passport.session());\n\n  // Configure passport local strategy\n  passport.use(\n    new LocalStrategy(\n      {\n        usernameField: \"email\",\n        passwordField: \"password\",\n      },\n      async (email, password, done) => {\n        try {\n          const user = await storage.getUserByEmail(email);\n          if (!user) {\n            return done(null, false, { message: \"Invalid email or password\" });\n          }\n\n          if (!user.password) {\n            return done(null, false, { message: \"Please sign in with Google\" });\n          }\n\n          const isValid = await verifyPassword(password, user.password);\n          if (!isValid) {\n            return done(null, false, { message: \"Invalid email or password\" });\n          }\n\n          return done(null, user);\n        } catch (error) {\n          return done(error);\n        }\n      }\n    )\n  );\n\n  // Serialize user to session (handle both OAuth and local users)\n  passport.serializeUser((user: Express.User, done) => {\n    const userData = user as any;\n    if (userData.claims) {\n      // OAuth user\n      done(null, { type: 'oauth', data: userData });\n    } else {\n      // Local user\n      done(null, { type: 'local', id: (user as User).id });\n    }\n  });\n\n  // Deserialize user from session (handle both OAuth and local users)\n  passport.deserializeUser(async (data: any, done) => {\n    try {\n      if (data.type === 'oauth') {\n        // OAuth user - fetch the database user using the OAuth sub\n        const oauthSub = data.data.claims.sub;\n        const user = await storage.getUserByOAuthSub(oauthSub);\n        if (!user) {\n          return done(new Error('OAuth user not found in database'));\n        }\n        done(null, user);\n      } else {\n        // Local user - fetch from database\n        const user = await storage.getUser(data.id);\n        done(null, user);\n      }\n    } catch (error) {\n      done(error);\n    }\n  });\n}\n\n// Middleware to check if user is authenticated\nexport function isAuthenticated(req: any, res: any, next: any) {\n  if (req.isAuthenticated()) {\n    return next();\n  }\n  res.status(401).json({ message: \"Unauthorized\" });\n}\n","size_bytes":2904},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\nimport { setupAuth } from \"./auth\";\n\nconst app = express();\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\n\n// Setup authentication before routes\nsetupAuth(app);\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"…\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || '5000', 10);\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`serving on port ${port}`);\n  });\n})();\n","size_bytes":2157},"server/paystack.ts":{"content":"import axios from \"axios\";\n\nconst PAYSTACK_BASE_URL = \"https://api.paystack.co\";\n\nif (!process.env.PAYSTACK_SECRET_KEY) {\n  console.warn(\"PAYSTACK_SECRET_KEY not set - payment features will not work\");\n}\n\nconst paystackClient = axios.create({\n  baseURL: PAYSTACK_BASE_URL,\n  headers: {\n    Authorization: `Bearer ${process.env.PAYSTACK_SECRET_KEY}`,\n    \"Content-Type\": \"application/json\",\n  },\n});\n\nexport interface InitializePaymentParams {\n  email: string;\n  amount: number;\n  reference: string;\n  metadata?: {\n    transactionId: string;\n    itemName: string;\n  };\n}\n\nexport interface InitializePaymentResponse {\n  status: boolean;\n  message: string;\n  data: {\n    authorization_url: string;\n    access_code: string;\n    reference: string;\n  };\n}\n\nexport interface VerifyPaymentResponse {\n  status: boolean;\n  message: string;\n  data: {\n    id: number;\n    status: string;\n    reference: string;\n    amount: number;\n    metadata: {\n      transactionId?: string;\n      itemName?: string;\n    };\n    customer: {\n      email: string;\n    };\n  };\n}\n\nexport async function initializePayment(\n  params: InitializePaymentParams\n): Promise<InitializePaymentResponse> {\n  try {\n    const response = await paystackClient.post<InitializePaymentResponse>(\n      \"/transaction/initialize\",\n      {\n        email: params.email,\n        amount: params.amount * 100, // Convert to kobo\n        reference: params.reference,\n        metadata: params.metadata,\n        callback_url: `${process.env.VITE_API_URL || \"\"}/payment-callback`,\n      }\n    );\n    return response.data;\n  } catch (error: any) {\n    throw new Error(\n      error.response?.data?.message || \"Failed to initialize payment\"\n    );\n  }\n}\n\nexport async function verifyPayment(\n  reference: string\n): Promise<VerifyPaymentResponse> {\n  try {\n    const response = await paystackClient.get<VerifyPaymentResponse>(\n      `/transaction/verify/${reference}`\n    );\n    return response.data;\n  } catch (error: any) {\n    throw new Error(\n      error.response?.data?.message || \"Failed to verify payment\"\n    );\n  }\n}\n\nexport function validatePaystackWebhook(\n  signature: string,\n  body: string\n): boolean {\n  const crypto = require(\"crypto\");\n  const hash = crypto\n    .createHmac(\"sha512\", process.env.PAYSTACK_SECRET_KEY || \"\")\n    .update(body)\n    .digest(\"hex\");\n  return hash === signature;\n}\n","size_bytes":2345},"server/routes.ts":{"content":"import type { Express, Request, Response, NextFunction } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { storage } from \"./storage\";\nimport { isAuthenticated } from \"./auth\";\nimport { setupReplitAuth } from \"./replitAuth\";\nimport passport from \"passport\";\nimport { insertUserSchema, insertTransactionSchema, updateTransactionStatusSchema, insertDisputeSchema, updateDisputeStatusSchema, updateBankAccountSchema, type User } from \"@shared/schema\";\nimport { randomBytes } from \"crypto\";\nimport { initializePayment, verifyPayment, validatePaystackWebhook } from \"./paystack\";\nimport { listBanks, verifyAccountNumber, createTransferRecipient, initiateTransfer } from \"./transfer\";\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // Setup Replit OAuth authentication\n  await setupReplitAuth(app);\n  // Auth routes\n  app.post(\"/api/signup\", async (req: Request, res: Response, next: NextFunction) => {\n    try {\n      const result = insertUserSchema.safeParse(req.body);\n      if (!result.success) {\n        return res.status(400).json({ message: \"Invalid input\", errors: result.error.errors });\n      }\n\n      const existingUser = await storage.getUserByEmail(result.data.email);\n      if (existingUser) {\n        return res.status(400).json({ message: \"User already exists\" });\n      }\n\n      const user = await storage.createUser(result.data);\n      \n      // Regenerate session to prevent fixation attacks\n      req.session.regenerate((err) => {\n        if (err) {\n          return next(err);\n        }\n        \n        // Log the user in automatically after signup\n        req.login(user, (err) => {\n          if (err) {\n            return next(err);\n          }\n          // Don't send password back\n          const { password, ...userWithoutPassword } = user;\n          res.status(201).json({ user: userWithoutPassword });\n        });\n      });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  app.post(\"/api/login\", (req: Request, res: Response, next: NextFunction) => {\n    passport.authenticate(\"local\", (err: any, user: User, info: any) => {\n      if (err) {\n        return next(err);\n      }\n      if (!user) {\n        return res.status(401).json({ message: info?.message || \"Invalid credentials\" });\n      }\n      \n      // Regenerate session to prevent fixation attacks\n      req.session.regenerate((err) => {\n        if (err) {\n          return next(err);\n        }\n        \n        req.login(user, (err) => {\n          if (err) {\n            return next(err);\n          }\n          const { password, ...userWithoutPassword } = user;\n          res.json({ user: userWithoutPassword });\n        });\n      });\n    })(req, res, next);\n  });\n\n  app.post(\"/api/logout\", (req: Request, res: Response) => {\n    req.logout((err) => {\n      if (err) {\n        return res.status(500).json({ message: \"Logout failed\" });\n      }\n      // Destroy the session completely\n      req.session.destroy((err) => {\n        if (err) {\n          return res.status(500).json({ message: \"Session destruction failed\" });\n        }\n        res.clearCookie(\"connect.sid\");\n        res.json({ message: \"Logged out successfully\" });\n      });\n    });\n  });\n\n  app.get(\"/api/user\", async (req: Request, res: Response) => {\n    if (!req.user) {\n      return res.status(401).json({ message: \"Not authenticated\" });\n    }\n\n    // Both OAuth and local users now have a proper User object from deserialize\n    const { password, ...userWithoutPassword } = req.user as User;\n    res.json({ user: userWithoutPassword });\n  });\n\n  // Transaction routes\n  app.post(\"/api/transactions\", isAuthenticated, async (req: Request, res: Response, next: NextFunction) => {\n    try {\n      const user = req.user as User;\n      const uniqueLink = randomBytes(16).toString(\"hex\");\n      \n      const transactionData = {\n        ...req.body,\n        sellerId: user.id,\n        uniqueLink,\n      };\n\n      const result = insertTransactionSchema.safeParse(transactionData);\n      if (!result.success) {\n        return res.status(400).json({ message: \"Invalid input\", errors: result.error.errors });\n      }\n\n      const transaction = await storage.createTransaction(result.data);\n      res.status(201).json({ transaction });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  app.get(\"/api/transactions/:link\", async (req: Request, res: Response, next: NextFunction) => {\n    try {\n      const transaction = await storage.getTransactionByLink(req.params.link);\n      if (!transaction) {\n        return res.status(404).json({ message: \"Transaction not found\" });\n      }\n      res.json({ transaction });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  app.get(\"/api/transactions/seller/:sellerId\", isAuthenticated, async (req: Request, res: Response, next: NextFunction) => {\n    try {\n      const user = req.user as User;\n      if (user.id !== req.params.sellerId) {\n        return res.status(403).json({ message: \"Forbidden\" });\n      }\n      const transactions = await storage.getTransactionsBySeller(req.params.sellerId);\n      res.json({ transactions });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  app.get(\"/api/transactions/buyer/:buyerId\", isAuthenticated, async (req: Request, res: Response, next: NextFunction) => {\n    try {\n      const user = req.user as User;\n      if (user.id !== req.params.buyerId) {\n        return res.status(403).json({ message: \"Forbidden\" });\n      }\n      const transactions = await storage.getTransactionsByBuyer(req.params.buyerId);\n      res.json({ transactions });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  app.patch(\"/api/transactions/:id/status\", isAuthenticated, async (req: Request, res: Response, next: NextFunction) => {\n    try {\n      const user = req.user as User;\n      \n      // Validate input\n      const result = updateTransactionStatusSchema.safeParse(req.body);\n      if (!result.success) {\n        return res.status(400).json({ message: \"Invalid input\", errors: result.error.errors });\n      }\n\n      // Get the transaction first to check ownership\n      const existingTransaction = await storage.getTransaction(req.params.id);\n      if (!existingTransaction) {\n        return res.status(404).json({ message: \"Transaction not found\" });\n      }\n\n      const isSeller = existingTransaction.sellerId === user.id;\n      const isBuyer = existingTransaction.buyerId === user.id;\n\n      // Role-based authorization for state transitions\n      if (result.data.status === \"asset_transferred\") {\n        // Only seller can mark as asset_transferred\n        if (!isSeller) {\n          return res.status(403).json({ message: \"Forbidden: Only the seller can mark asset as transferred\" });\n        }\n      } else if (result.data.status === \"completed\") {\n        // Only buyer can mark as completed\n        if (!isBuyer) {\n          return res.status(403).json({ message: \"Forbidden: Only the buyer can confirm completion\" });\n        }\n      } else if (result.data.status === \"paid\") {\n        // Paid status should only be set via Paystack webhook/verify\n        return res.status(403).json({ message: \"Forbidden: Payment status is automatically set by payment gateway\" });\n      }\n\n      // Update the transaction\n      const transaction = await storage.updateTransactionStatus(\n        req.params.id, \n        result.data.status, \n        result.data.paystackReference\n      );\n      \n      // If transaction is completed, initiate payout to seller\n      if (result.data.status === \"completed\") {\n        try {\n          // Check for existing payout to prevent duplicates (idempotency)\n          const existingPayout = await storage.getPayoutByTransaction(req.params.id);\n          if (existingPayout && (existingPayout.status === \"success\" || existingPayout.status === \"processing\")) {\n            console.log(\"Payout already exists for transaction:\", req.params.id, \"with status:\", existingPayout.status);\n          } else {\n            const seller = await storage.getUser(existingTransaction.sellerId);\n            \n            if (!seller) {\n              console.error(\"Seller not found for transaction:\", req.params.id);\n            } else if (!seller.recipientCode) {\n              console.log(\"Seller has no bank account configured, payout skipped for transaction:\", req.params.id);\n            } else {\n              const payoutAmount = (parseFloat(existingTransaction.price) - parseFloat(existingTransaction.commission)).toFixed(2);\n              \n              // Create or reuse existing payout record\n              const payout = existingPayout || await storage.createPayout(\n                req.params.id,\n                existingTransaction.sellerId,\n                payoutAmount\n              );\n              \n              try {\n                const transferReference = `PAYOUT-${payout.id}`;\n                const transferData = await initiateTransfer(\n                  seller.recipientCode,\n                  parseFloat(payoutAmount),\n                  transferReference,\n                  `Payout for transaction ${existingTransaction.itemName}`\n                );\n                \n                await storage.updatePayoutStatus(\n                  payout.id,\n                  \"success\",\n                  transferData.data.transfer_code,\n                  transferData.data.reference\n                );\n              } catch (transferError: any) {\n                console.error(\"Transfer initiation failed:\", transferError);\n                await storage.updatePayoutStatus(\n                  payout.id,\n                  \"failed\",\n                  undefined,\n                  undefined,\n                  transferError.message || \"Transfer initiation failed\"\n                );\n              }\n            }\n          }\n        } catch (payoutError: any) {\n          console.error(\"Payout processing error:\", payoutError);\n        }\n      }\n      \n      res.json({ transaction });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  app.post(\"/api/transactions/:id/accept\", isAuthenticated, async (req: Request, res: Response, next: NextFunction) => {\n    try {\n      const user = req.user as User;\n      \n      // Get the transaction\n      const existingTransaction = await storage.getTransaction(req.params.id);\n      if (!existingTransaction) {\n        return res.status(404).json({ message: \"Transaction not found\" });\n      }\n\n      // Check if transaction is still pending and not already accepted\n      if (existingTransaction.status !== \"pending\") {\n        return res.status(400).json({ message: \"Transaction is no longer pending\" });\n      }\n\n      if (existingTransaction.buyerId) {\n        return res.status(400).json({ message: \"Transaction already accepted by another buyer\" });\n      }\n\n      // Check if the seller is trying to accept their own transaction\n      if (existingTransaction.sellerId === user.id) {\n        return res.status(403).json({ message: \"You cannot accept your own transaction\" });\n      }\n\n      // Verify the authenticated user's email matches the buyer email (case-insensitive)\n      if (!user.email || existingTransaction.buyerEmail.toLowerCase() !== user.email.toLowerCase()) {\n        return res.status(403).json({ message: \"This transaction is intended for a different buyer\" });\n      }\n\n      // Link the buyer to the transaction\n      const transaction = await storage.acceptTransaction(req.params.id, user.id);\n      \n      res.json({ transaction });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  // Payment routes\n  app.post(\"/api/payments/initialize\", isAuthenticated, async (req: Request, res: Response, next: NextFunction) => {\n    try {\n      const user = req.user as User;\n      const { uniqueLink } = req.body;\n      \n      if (!uniqueLink) {\n        return res.status(400).json({ message: \"Transaction link is required\" });\n      }\n\n      const transaction = await storage.getTransactionByLink(uniqueLink);\n      if (!transaction) {\n        return res.status(404).json({ message: \"Transaction not found\" });\n      }\n\n      if (transaction.status !== \"pending\") {\n        return res.status(400).json({ message: \"Transaction already paid or completed\" });\n      }\n\n      // Verify the transaction has been accepted and the buyer matches\n      if (!transaction.buyerId) {\n        return res.status(403).json({ message: \"You must accept the transaction before making payment\" });\n      }\n\n      if (transaction.buyerId !== user.id) {\n        return res.status(403).json({ message: \"You are not authorized to pay for this transaction\" });\n      }\n\n      const reference = `TXN-${transaction.id}-${Date.now()}`;\n      const totalAmount = parseFloat(transaction.price) + parseFloat(transaction.commission);\n\n      const paymentData = await initializePayment({\n        email: transaction.buyerEmail,\n        amount: totalAmount,\n        reference,\n        metadata: {\n          transactionId: transaction.id,\n          itemName: transaction.itemName,\n        },\n      });\n\n      res.json({\n        authorization_url: paymentData.data.authorization_url,\n        reference: paymentData.data.reference,\n      });\n    } catch (error: any) {\n      next(error);\n    }\n  });\n\n  app.get(\"/api/payments/verify/:reference\", async (req: Request, res: Response, next: NextFunction) => {\n    try {\n      const { reference } = req.params;\n      \n      const paymentData = await verifyPayment(reference);\n\n      if (paymentData.data.status === \"success\") {\n        const transactionId = paymentData.data.metadata?.transactionId;\n        \n        if (transactionId) {\n          await storage.updateTransactionStatus(transactionId, \"paid\", reference);\n        }\n\n        res.json({\n          status: \"success\",\n          message: \"Payment verified successfully\",\n          data: paymentData.data,\n        });\n      } else {\n        res.status(400).json({\n          status: \"failed\",\n          message: \"Payment verification failed\",\n        });\n      }\n    } catch (error: any) {\n      next(error);\n    }\n  });\n\n  app.post(\"/api/payments/webhook\", async (req: Request, res: Response, next: NextFunction) => {\n    try {\n      const signature = req.headers[\"x-paystack-signature\"] as string;\n      \n      if (!signature) {\n        return res.status(400).json({ message: \"No signature provided\" });\n      }\n\n      const isValid = validatePaystackWebhook(signature, JSON.stringify(req.body));\n      \n      if (!isValid) {\n        return res.status(401).json({ message: \"Invalid signature\" });\n      }\n\n      const event = req.body;\n\n      if (event.event === \"charge.success\") {\n        const reference = event.data.reference;\n        const transactionId = event.data.metadata?.transactionId;\n\n        if (transactionId) {\n          await storage.updateTransactionStatus(transactionId, \"paid\", reference);\n        }\n      }\n\n      res.status(200).json({ message: \"Webhook processed\" });\n    } catch (error: any) {\n      next(error);\n    }\n  });\n\n  // Dashboard statistics routes\n  app.get(\"/api/dashboard/stats\", isAuthenticated, async (req: Request, res: Response, next: NextFunction) => {\n    try {\n      const user = req.user as User;\n      const stats = await storage.getDashboardStats(user.id);\n      res.json(stats);\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  app.get(\"/api/dashboard/transactions-over-time\", isAuthenticated, async (req: Request, res: Response, next: NextFunction) => {\n    try {\n      const user = req.user as User;\n      const data = await storage.getTransactionsOverTime(user.id);\n      res.json({ data });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  app.get(\"/api/dashboard/recent-activities\", isAuthenticated, async (req: Request, res: Response, next: NextFunction) => {\n    try {\n      const user = req.user as User;\n      const limit = parseInt(req.query.limit as string) || 10;\n      const activities = await storage.getRecentActivities(user.id, limit);\n      res.json({ activities });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  // Office routes - Ongoing transactions and history\n  app.get(\"/api/office/ongoing-transactions\", isAuthenticated, async (req: Request, res: Response, next: NextFunction) => {\n    try {\n      const user = req.user as User;\n      const allTransactions = await storage.getTransactionsBySeller(user.id);\n      \n      // Filter for ongoing transactions (not completed)\n      const ongoingTransactions = allTransactions.filter(\n        t => t.status === \"pending\" || t.status === \"paid\" || t.status === \"asset_transferred\"\n      );\n      \n      // Apply optional filters from query params\n      const { status, search } = req.query;\n      \n      let filtered = ongoingTransactions;\n      \n      if (status && status !== \"all\") {\n        filtered = filtered.filter(t => t.status === status);\n      }\n      \n      if (search) {\n        const searchLower = (search as string).toLowerCase();\n        filtered = filtered.filter(\n          t => t.buyerEmail.toLowerCase().includes(searchLower) ||\n               t.itemName.toLowerCase().includes(searchLower) ||\n               t.id.toLowerCase().includes(searchLower)\n        );\n      }\n      \n      res.json({ transactions: filtered });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  app.get(\"/api/office/transaction-history\", isAuthenticated, async (req: Request, res: Response, next: NextFunction) => {\n    try {\n      const user = req.user as User;\n      const allTransactions = await storage.getTransactionsBySeller(user.id);\n      \n      // Filter for completed transactions only\n      const historyTransactions = allTransactions.filter(t => t.status === \"completed\");\n      \n      // Apply optional filters from query params\n      const { dateFrom, dateTo, search, minAmount, maxAmount } = req.query;\n      \n      let filtered = historyTransactions;\n      \n      if (dateFrom) {\n        const fromDate = new Date(dateFrom as string);\n        filtered = filtered.filter(t => new Date(t.createdAt) >= fromDate);\n      }\n      \n      if (dateTo) {\n        const toDate = new Date(dateTo as string);\n        filtered = filtered.filter(t => new Date(t.createdAt) <= toDate);\n      }\n      \n      if (search) {\n        const searchLower = (search as string).toLowerCase();\n        filtered = filtered.filter(\n          t => t.buyerEmail.toLowerCase().includes(searchLower) ||\n               t.itemName.toLowerCase().includes(searchLower) ||\n               t.id.toLowerCase().includes(searchLower)\n        );\n      }\n      \n      if (minAmount) {\n        const min = parseFloat(minAmount as string);\n        filtered = filtered.filter(t => parseFloat(t.price) >= min);\n      }\n      \n      if (maxAmount) {\n        const max = parseFloat(maxAmount as string);\n        filtered = filtered.filter(t => parseFloat(t.price) <= max);\n      }\n      \n      res.json({ transactions: filtered });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  // Bank account routes\n  app.get(\"/api/banks\", isAuthenticated, async (req: Request, res: Response, next: NextFunction) => {\n    try {\n      const banksData = await listBanks();\n      res.json({ banks: banksData.data });\n    } catch (error: any) {\n      next(error);\n    }\n  });\n\n  app.post(\"/api/bank-account/verify\", isAuthenticated, async (req: Request, res: Response, next: NextFunction) => {\n    try {\n      const { accountNumber, bankCode } = req.body;\n      \n      if (!accountNumber || !bankCode) {\n        return res.status(400).json({ message: \"Account number and bank code are required\" });\n      }\n\n      const verificationData = await verifyAccountNumber(accountNumber, bankCode);\n      res.json({ \n        accountName: verificationData.data.account_name,\n        accountNumber: verificationData.data.account_number,\n      });\n    } catch (error: any) {\n      next(error);\n    }\n  });\n\n  app.post(\"/api/bank-account\", isAuthenticated, async (req: Request, res: Response, next: NextFunction) => {\n    try {\n      const user = req.user as User;\n      \n      const result = updateBankAccountSchema.safeParse(req.body);\n      if (!result.success) {\n        return res.status(400).json({ message: \"Invalid input\", errors: result.error.errors });\n      }\n\n      const { bankCode, accountNumber, accountName } = result.data;\n\n      const verificationData = await verifyAccountNumber(accountNumber, bankCode);\n      \n      if (verificationData.data.account_name.toLowerCase() !== accountName.toLowerCase()) {\n        return res.status(400).json({ message: \"Account name does not match bank records\" });\n      }\n\n      const recipientData = await createTransferRecipient(accountName, accountNumber, bankCode);\n\n      const updatedUser = await storage.updateUserBankAccount(\n        user.id,\n        bankCode,\n        accountNumber,\n        accountName,\n        recipientData.data.recipient_code\n      );\n\n      const { password, ...userWithoutPassword } = updatedUser!;\n      res.json({ user: userWithoutPassword });\n    } catch (error: any) {\n      next(error);\n    }\n  });\n\n  // Payout routes\n  app.get(\"/api/payouts\", isAuthenticated, async (req: Request, res: Response, next: NextFunction) => {\n    try {\n      const user = req.user as User;\n      const payouts = await storage.getPayoutsBySeller(user.id);\n      res.json({ payouts });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  // Dispute routes\n  app.post(\"/api/disputes\", isAuthenticated, async (req: Request, res: Response, next: NextFunction) => {\n    try {\n      const user = req.user as User;\n      \n      const disputeData = {\n        ...req.body,\n        sellerId: user.id,\n      };\n\n      const result = insertDisputeSchema.safeParse(disputeData);\n      if (!result.success) {\n        return res.status(400).json({ message: \"Invalid input\", errors: result.error.errors });\n      }\n\n      // Check if transaction exists and belongs to user\n      const transaction = await storage.getTransaction(result.data.transactionId);\n      if (!transaction) {\n        return res.status(404).json({ message: \"Transaction not found\" });\n      }\n      if (transaction.sellerId !== user.id) {\n        return res.status(403).json({ message: \"Forbidden: You can only dispute your own transactions\" });\n      }\n\n      // Check if dispute already exists for this transaction\n      const existingDispute = await storage.getDisputeByTransaction(result.data.transactionId);\n      if (existingDispute) {\n        return res.status(400).json({ message: \"A dispute already exists for this transaction\" });\n      }\n\n      const dispute = await storage.createDispute(result.data);\n      res.status(201).json({ dispute });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  app.get(\"/api/disputes\", isAuthenticated, async (req: Request, res: Response, next: NextFunction) => {\n    try {\n      const user = req.user as User;\n      const disputes = await storage.getDisputesBySeller(user.id);\n      \n      // Apply optional status filter\n      const { status } = req.query;\n      \n      let filtered = disputes;\n      if (status && status !== \"all\") {\n        filtered = filtered.filter(d => d.status === status);\n      }\n      \n      res.json({ disputes: filtered });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  app.get(\"/api/disputes/:id\", isAuthenticated, async (req: Request, res: Response, next: NextFunction) => {\n    try {\n      const user = req.user as User;\n      const dispute = await storage.getDispute(req.params.id);\n      \n      if (!dispute) {\n        return res.status(404).json({ message: \"Dispute not found\" });\n      }\n      \n      if (dispute.sellerId !== user.id) {\n        return res.status(403).json({ message: \"Forbidden\" });\n      }\n      \n      res.json({ dispute });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  app.patch(\"/api/disputes/:id/status\", isAuthenticated, async (req: Request, res: Response, next: NextFunction) => {\n    try {\n      const user = req.user as User;\n      \n      const result = updateDisputeStatusSchema.safeParse(req.body);\n      if (!result.success) {\n        return res.status(400).json({ message: \"Invalid input\", errors: result.error.errors });\n      }\n\n      const dispute = await storage.getDispute(req.params.id);\n      if (!dispute) {\n        return res.status(404).json({ message: \"Dispute not found\" });\n      }\n      \n      if (dispute.sellerId !== user.id) {\n        return res.status(403).json({ message: \"Forbidden\" });\n      }\n\n      const updatedDispute = await storage.updateDisputeStatus(req.params.id, result.data.status);\n      res.json({ dispute: updatedDispute });\n    } catch (error) {\n      next(error);\n    }\n  });\n\n  const httpServer = createServer(app);\n\n  return httpServer;\n}\n","size_bytes":24596},"server/storage.ts":{"content":"import { type User, type InsertUser, type UpsertUser, type Transaction, type InsertTransaction, type Dispute, type InsertDispute, type Payout, type PayoutStatus, users, transactions, disputes, payouts, type TransactionStatus, type DisputeStatus } from \"@shared/schema\";\nimport { drizzle } from \"drizzle-orm/node-postgres\";\nimport { eq, desc } from \"drizzle-orm\";\nimport { Pool } from \"pg\";\nimport { hashPassword } from \"./auth\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL must be set\");\n}\n\nconst pool = new Pool({\n  connectionString: process.env.DATABASE_URL,\n});\n\nconst db = drizzle({ client: pool });\n\nexport interface IStorage {\n  // User methods\n  getUser(id: string): Promise<User | undefined>;\n  getUserByEmail(email: string): Promise<User | undefined>;\n  getUserByOAuthSub(oauthSub: string): Promise<User | undefined>;\n  createUser(user: InsertUser): Promise<User>;\n  upsertUser(user: UpsertUser): Promise<User>;\n  \n  // Transaction methods\n  getTransaction(id: string): Promise<Transaction | undefined>;\n  getTransactionByLink(link: string): Promise<Transaction | undefined>;\n  getTransactionsBySeller(sellerId: string): Promise<Transaction[]>;\n  getTransactionsByBuyer(buyerId: string): Promise<Transaction[]>;\n  createTransaction(transaction: InsertTransaction): Promise<Transaction>;\n  acceptTransaction(id: string, buyerId: string): Promise<Transaction | undefined>;\n  updateTransactionStatus(id: string, status: TransactionStatus, paystackReference?: string): Promise<Transaction | undefined>;\n  \n  // Dispute methods\n  getDispute(id: string): Promise<Dispute | undefined>;\n  getDisputesBySeller(sellerId: string): Promise<Dispute[]>;\n  getDisputeByTransaction(transactionId: string): Promise<Dispute | undefined>;\n  createDispute(dispute: InsertDispute): Promise<Dispute>;\n  updateDisputeStatus(id: string, status: DisputeStatus): Promise<Dispute | undefined>;\n  \n  // Statistics methods\n  getDashboardStats(sellerId: string): Promise<{\n    totalTransactions: number;\n    successRate: number;\n    escrowVolume: number;\n    totalTransactionsChange: number;\n    successRateChange: number;\n    escrowVolumeChange: number;\n  }>;\n  getTransactionsOverTime(sellerId: string): Promise<Array<{ month: string; amount: number }>>;\n  getRecentActivities(sellerId: string, limit: number): Promise<Array<{\n    id: string;\n    activity: string;\n    details: string;\n    time: string;\n  }>>;\n  \n  // Bank account methods\n  updateUserBankAccount(userId: string, bankCode: string, accountNumber: string, accountName: string, recipientCode: string): Promise<User | undefined>;\n  getUserBankAccount(userId: string): Promise<User | undefined>;\n  \n  // Payout methods\n  createPayout(transactionId: string, sellerId: string, amount: string): Promise<Payout>;\n  updatePayoutStatus(payoutId: string, status: PayoutStatus, transferCode?: string, paystackReference?: string, failureReason?: string): Promise<Payout | undefined>;\n  getPayoutsBySeller(sellerId: string): Promise<Array<Payout & { transaction: Transaction }>>;\n  getPayoutByTransaction(transactionId: string): Promise<Payout | undefined>;\n}\n\nexport class DatabaseStorage implements IStorage {\n  // User methods\n  async getUser(id: string): Promise<User | undefined> {\n    const result = await db.select().from(users).where(eq(users.id, id)).limit(1);\n    return result[0];\n  }\n\n  async getUserByEmail(email: string): Promise<User | undefined> {\n    const result = await db.select().from(users).where(eq(users.email, email)).limit(1);\n    return result[0];\n  }\n\n  async getUserByOAuthSub(oauthSub: string): Promise<User | undefined> {\n    const result = await db.select().from(users).where(eq(users.oauthSub, oauthSub)).limit(1);\n    return result[0];\n  }\n\n  async createUser(insertUser: InsertUser): Promise<User> {\n    const hashedPassword = await hashPassword(insertUser.password);\n    const result = await db.insert(users).values({\n      ...insertUser,\n      password: hashedPassword,\n    }).returning();\n    return result[0];\n  }\n\n  async upsertUser(userData: UpsertUser): Promise<User> {\n    // Check if a user with this OAuth sub already exists\n    const existingOAuthUser = await this.getUserByOAuthSub(userData.oauthSub);\n    if (existingOAuthUser) {\n      // OAuth user exists - update their record\n      const [updatedUser] = await db\n        .update(users)\n        .set({\n          email: userData.email || existingOAuthUser.email,\n          profileImageUrl: userData.profileImageUrl,\n          firstName: userData.firstName || existingOAuthUser.firstName,\n          lastName: userData.lastName || existingOAuthUser.lastName,\n          updatedAt: new Date(),\n        })\n        .where(eq(users.oauthSub, userData.oauthSub))\n        .returning();\n      return updatedUser;\n    }\n\n    // Check if a user with this email already exists (email/password user)\n    if (userData.email) {\n      const existingEmailUser = await this.getUserByEmail(userData.email);\n      if (existingEmailUser) {\n        // User exists with this email - link OAuth to existing account\n        const [updatedUser] = await db\n          .update(users)\n          .set({\n            oauthSub: userData.oauthSub,\n            profileImageUrl: userData.profileImageUrl,\n            firstName: userData.firstName || existingEmailUser.firstName,\n            lastName: userData.lastName || existingEmailUser.lastName,\n            updatedAt: new Date(),\n          })\n          .where(eq(users.email, userData.email))\n          .returning();\n        return updatedUser;\n      }\n    }\n\n    // No existing user - insert new OAuth user with generated UUID id\n    const [user] = await db\n      .insert(users)\n      .values(userData)\n      .returning();\n    return user;\n  }\n\n  // Transaction methods\n  async getTransaction(id: string): Promise<Transaction | undefined> {\n    const result = await db.select().from(transactions).where(eq(transactions.id, id)).limit(1);\n    return result[0];\n  }\n\n  async getTransactionByLink(link: string): Promise<Transaction | undefined> {\n    const result = await db.select().from(transactions).where(eq(transactions.uniqueLink, link)).limit(1);\n    return result[0];\n  }\n\n  async getTransactionsBySeller(sellerId: string): Promise<Transaction[]> {\n    return await db.select().from(transactions).where(eq(transactions.sellerId, sellerId));\n  }\n\n  async getTransactionsByBuyer(buyerId: string): Promise<Transaction[]> {\n    return await db.select().from(transactions).where(eq(transactions.buyerId, buyerId));\n  }\n\n  async createTransaction(insertTransaction: InsertTransaction): Promise<Transaction> {\n    const commission = (parseFloat(insertTransaction.price) * 0.05).toFixed(2);\n    const result = await db.insert(transactions).values({\n      ...insertTransaction,\n      commission,\n    }).returning();\n    return result[0];\n  }\n\n  async acceptTransaction(id: string, buyerId: string): Promise<Transaction | undefined> {\n    const result = await db.update(transactions)\n      .set({ buyerId, updatedAt: new Date() })\n      .where(eq(transactions.id, id))\n      .returning();\n    return result[0];\n  }\n\n  private validateStateTransition(\n    currentStatus: TransactionStatus,\n    newStatus: TransactionStatus,\n    paystackReference?: string\n  ): { valid: boolean; error?: string } {\n    const transitions: Record<TransactionStatus, TransactionStatus[]> = {\n      pending: [\"paid\"],\n      paid: [\"asset_transferred\"],\n      asset_transferred: [\"completed\"],\n      completed: [],\n    };\n\n    if (!transitions[currentStatus].includes(newStatus)) {\n      return {\n        valid: false,\n        error: `Invalid transition from ${currentStatus} to ${newStatus}`,\n      };\n    }\n\n    if (newStatus === \"paid\" && !paystackReference) {\n      return {\n        valid: false,\n        error: \"Payment reference required for paid status\",\n      };\n    }\n\n    return { valid: true };\n  }\n\n  async updateTransactionStatus(id: string, status: TransactionStatus, paystackReference?: string): Promise<Transaction | undefined> {\n    const transaction = await this.getTransaction(id);\n    if (!transaction) {\n      throw new Error(\"Transaction not found\");\n    }\n\n    const validation = this.validateStateTransition(\n      transaction.status,\n      status,\n      paystackReference\n    );\n\n    if (!validation.valid) {\n      throw new Error(validation.error);\n    }\n\n    const updateData: any = { status, updatedAt: new Date() };\n    if (paystackReference) {\n      updateData.paystackReference = paystackReference;\n    }\n    const result = await db.update(transactions)\n      .set(updateData)\n      .where(eq(transactions.id, id))\n      .returning();\n    return result[0];\n  }\n\n  // Dispute methods\n  async getDispute(id: string): Promise<Dispute | undefined> {\n    const result = await db.select().from(disputes).where(eq(disputes.id, id)).limit(1);\n    return result[0];\n  }\n\n  async getDisputesBySeller(sellerId: string): Promise<Dispute[]> {\n    return await db.select().from(disputes).where(eq(disputes.sellerId, sellerId));\n  }\n\n  async getDisputeByTransaction(transactionId: string): Promise<Dispute | undefined> {\n    const result = await db.select().from(disputes).where(eq(disputes.transactionId, transactionId)).limit(1);\n    return result[0];\n  }\n\n  async createDispute(insertDispute: InsertDispute): Promise<Dispute> {\n    const result = await db.insert(disputes).values(insertDispute).returning();\n    return result[0];\n  }\n\n  async updateDisputeStatus(id: string, status: DisputeStatus): Promise<Dispute | undefined> {\n    const result = await db.update(disputes)\n      .set({ status, updatedAt: new Date() })\n      .where(eq(disputes.id, id))\n      .returning();\n    return result[0];\n  }\n\n  // Statistics methods\n  async getDashboardStats(sellerId: string): Promise<{\n    totalTransactions: number;\n    successRate: number;\n    escrowVolume: number;\n    totalTransactionsChange: number;\n    successRateChange: number;\n    escrowVolumeChange: number;\n  }> {\n    const allTransactions = await this.getTransactionsBySeller(sellerId);\n    const totalTransactions = allTransactions.length;\n    \n    const completedTransactions = allTransactions.filter(t => t.status === \"completed\");\n    const successRate = totalTransactions > 0 \n      ? (completedTransactions.length / totalTransactions) * 100 \n      : 0;\n    \n    const escrowVolume = allTransactions\n      .filter(t => t.status === \"paid\" || t.status === \"asset_transferred\" || t.status === \"completed\")\n      .reduce((sum, t) => sum + parseFloat(t.price), 0);\n\n    const now = new Date();\n    const lastMonth = new Date(now.getFullYear(), now.getMonth() - 1, now.getDate());\n    \n    const lastMonthTransactions = allTransactions.filter(t => new Date(t.createdAt) < lastMonth);\n    const lastMonthCompleted = lastMonthTransactions.filter(t => t.status === \"completed\");\n    \n    const lastMonthTotal = lastMonthTransactions.length;\n    const lastMonthSuccessRate = lastMonthTotal > 0 \n      ? (lastMonthCompleted.length / lastMonthTotal) * 100 \n      : 0;\n    \n    const lastMonthVolume = lastMonthTransactions\n      .filter(t => t.status === \"paid\" || t.status === \"asset_transferred\" || t.status === \"completed\")\n      .reduce((sum, t) => sum + parseFloat(t.price), 0);\n\n    return {\n      totalTransactions,\n      successRate: Math.round(successRate),\n      escrowVolume: Math.round(escrowVolume),\n      totalTransactionsChange: lastMonthTotal > 0 \n        ? Math.round(((totalTransactions - lastMonthTotal) / lastMonthTotal) * 100)\n        : totalTransactions > 0 ? 100 : 0,\n      successRateChange: lastMonthSuccessRate > 0\n        ? Math.round(successRate - lastMonthSuccessRate)\n        : 0,\n      escrowVolumeChange: lastMonthVolume > 0\n        ? Math.round(((escrowVolume - lastMonthVolume) / lastMonthVolume) * 100)\n        : escrowVolume > 0 ? 100 : 0,\n    };\n  }\n\n  async getTransactionsOverTime(sellerId: string): Promise<Array<{ month: string; amount: number }>> {\n    const allTransactions = await this.getTransactionsBySeller(sellerId);\n    \n    const monthlyData: Record<string, number> = {};\n    const months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \n                   \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n    \n    allTransactions.forEach(transaction => {\n      const date = new Date(transaction.createdAt);\n      const monthName = months[date.getMonth()];\n      const amount = parseFloat(transaction.price);\n      \n      if (!monthlyData[monthName]) {\n        monthlyData[monthName] = 0;\n      }\n      monthlyData[monthName] += amount;\n    });\n\n    return months.map(month => ({\n      month,\n      amount: monthlyData[month] || 0,\n    }));\n  }\n\n  async getRecentActivities(sellerId: string, limit: number = 10): Promise<Array<{\n    id: string;\n    activity: string;\n    details: string;\n    time: string;\n  }>> {\n    const allTransactions = await this.getTransactionsBySeller(sellerId);\n    \n    const activities = allTransactions\n      .sort((a, b) => new Date(b.updatedAt).getTime() - new Date(a.updatedAt).getTime())\n      .slice(0, limit)\n      .map(transaction => {\n        let activity = \"\";\n        let details = \"\";\n        \n        switch (transaction.status) {\n          case \"pending\":\n            activity = `Transaction #${transaction.id.slice(0, 4)}`;\n            details = \"Awaiting buyer confirmation\";\n            break;\n          case \"paid\":\n            activity = `Transaction #${transaction.id.slice(0, 4)}`;\n            details = \"Payment received, transfer asset\";\n            break;\n          case \"asset_transferred\":\n            activity = `Transaction #${transaction.id.slice(0, 4)}`;\n            details = \"Asset transferred, awaiting buyer confirmation\";\n            break;\n          case \"completed\":\n            activity = `Transaction #${transaction.id.slice(0, 4)}`;\n            details = \"Transaction completed successfully\";\n            break;\n        }\n        \n        const timeDiff = Date.now() - new Date(transaction.updatedAt).getTime();\n        const minutes = Math.floor(timeDiff / 60000);\n        const hours = Math.floor(timeDiff / 3600000);\n        const days = Math.floor(timeDiff / 86400000);\n        \n        let time = \"\";\n        if (minutes < 60) {\n          time = `${minutes} mins ago`;\n        } else if (hours < 24) {\n          time = `${hours} hours ago`;\n        } else {\n          time = `${days} days ago`;\n        }\n        \n        return {\n          id: transaction.id,\n          activity,\n          details,\n          time,\n        };\n      });\n    \n    return activities;\n  }\n\n  // Bank account methods\n  async updateUserBankAccount(userId: string, bankCode: string, accountNumber: string, accountName: string, recipientCode: string): Promise<User | undefined> {\n    const result = await db.update(users)\n      .set({ \n        bankCode, \n        accountNumber, \n        accountName, \n        recipientCode \n      })\n      .where(eq(users.id, userId))\n      .returning();\n    return result[0];\n  }\n\n  async getUserBankAccount(userId: string): Promise<User | undefined> {\n    return await this.getUser(userId);\n  }\n\n  // Payout methods\n  async createPayout(transactionId: string, sellerId: string, amount: string): Promise<Payout> {\n    const result = await db.insert(payouts).values({\n      transactionId,\n      sellerId,\n      amount,\n      status: \"pending\",\n    }).returning();\n    return result[0];\n  }\n\n  async updatePayoutStatus(payoutId: string, status: PayoutStatus, transferCode?: string, paystackReference?: string, failureReason?: string): Promise<Payout | undefined> {\n    const updateData: any = { status, updatedAt: new Date() };\n    if (transferCode) {\n      updateData.paystackTransferCode = transferCode;\n    }\n    if (paystackReference) {\n      updateData.paystackReference = paystackReference;\n    }\n    if (failureReason) {\n      updateData.failureReason = failureReason;\n    }\n    \n    const result = await db.update(payouts)\n      .set(updateData)\n      .where(eq(payouts.id, payoutId))\n      .returning();\n    return result[0];\n  }\n\n  async getPayoutsBySeller(sellerId: string): Promise<Array<Payout & { transaction: Transaction }>> {\n    const result = await db\n      .select({\n        payout: payouts,\n        transaction: transactions,\n      })\n      .from(payouts)\n      .innerJoin(transactions, eq(payouts.transactionId, transactions.id))\n      .where(eq(payouts.sellerId, sellerId))\n      .orderBy(desc(payouts.createdAt));\n    \n    return result.map((row) => ({\n      ...row.payout,\n      transaction: row.transaction,\n    }));\n  }\n\n  async getPayoutByTransaction(transactionId: string): Promise<Payout | undefined> {\n    const result = await db.select().from(payouts).where(eq(payouts.transactionId, transactionId)).limit(1);\n    return result[0];\n  }\n}\n\nexport const storage = new DatabaseStorage();\n","size_bytes":16789},"server/transfer.ts":{"content":"import axios from \"axios\";\n\nif (!process.env.PAYSTACK_SECRET_KEY) {\n  console.warn(\"PAYSTACK_SECRET_KEY not set - transfer functionality will not work\");\n}\n\nconst PAYSTACK_SECRET_KEY = process.env.PAYSTACK_SECRET_KEY || \"\";\nconst PAYSTACK_BASE_URL = \"https://api.paystack.co\";\n\ninterface BankListResponse {\n  status: boolean;\n  message: string;\n  data: Array<{\n    name: string;\n    slug: string;\n    code: string;\n    longcode: string;\n    gateway: string | null;\n    pay_with_bank: boolean;\n    active: boolean;\n    country: string;\n    currency: string;\n    type: string;\n  }>;\n}\n\ninterface AccountVerificationResponse {\n  status: boolean;\n  message: string;\n  data: {\n    account_number: string;\n    account_name: string;\n    bank_id: number;\n  };\n}\n\ninterface RecipientResponse {\n  status: boolean;\n  message: string;\n  data: {\n    active: boolean;\n    createdAt: string;\n    currency: string;\n    domain: string;\n    id: number;\n    integration: number;\n    name: string;\n    recipient_code: string;\n    type: string;\n    updatedAt: string;\n    is_deleted: boolean;\n    details: {\n      authorization_code: string | null;\n      account_number: string;\n      account_name: string | null;\n      bank_code: string;\n      bank_name: string;\n    };\n  };\n}\n\ninterface TransferResponse {\n  status: boolean;\n  message: string;\n  data: {\n    reference: string;\n    integration: number;\n    domain: string;\n    amount: number;\n    currency: string;\n    source: string;\n    reason: string;\n    recipient: number;\n    status: string;\n    transfer_code: string;\n    id: number;\n    createdAt: string;\n    updatedAt: string;\n  };\n}\n\nexport async function listBanks(): Promise<BankListResponse> {\n  try {\n    const response = await axios.get<BankListResponse>(\n      `${PAYSTACK_BASE_URL}/bank?country=nigeria`,\n      {\n        headers: {\n          Authorization: `Bearer ${PAYSTACK_SECRET_KEY}`,\n        },\n      }\n    );\n    return response.data;\n  } catch (error: any) {\n    console.error(\"Paystack list banks error:\", error.response?.data || error.message);\n    throw new Error(error.response?.data?.message || \"Failed to fetch banks\");\n  }\n}\n\nexport async function verifyAccountNumber(\n  accountNumber: string,\n  bankCode: string\n): Promise<AccountVerificationResponse> {\n  try {\n    const response = await axios.get<AccountVerificationResponse>(\n      `${PAYSTACK_BASE_URL}/bank/resolve?account_number=${accountNumber}&bank_code=${bankCode}`,\n      {\n        headers: {\n          Authorization: `Bearer ${PAYSTACK_SECRET_KEY}`,\n        },\n      }\n    );\n    return response.data;\n  } catch (error: any) {\n    console.error(\"Paystack account verification error:\", error.response?.data || error.message);\n    throw new Error(error.response?.data?.message || \"Failed to verify account\");\n  }\n}\n\nexport async function createTransferRecipient(\n  accountName: string,\n  accountNumber: string,\n  bankCode: string\n): Promise<RecipientResponse> {\n  try {\n    const response = await axios.post<RecipientResponse>(\n      `${PAYSTACK_BASE_URL}/transferrecipient`,\n      {\n        type: \"nuban\",\n        name: accountName,\n        account_number: accountNumber,\n        bank_code: bankCode,\n        currency: \"NGN\",\n      },\n      {\n        headers: {\n          Authorization: `Bearer ${PAYSTACK_SECRET_KEY}`,\n          \"Content-Type\": \"application/json\",\n        },\n      }\n    );\n    return response.data;\n  } catch (error: any) {\n    console.error(\"Paystack create recipient error:\", error.response?.data || error.message);\n    throw new Error(error.response?.data?.message || \"Failed to create transfer recipient\");\n  }\n}\n\nexport async function initiateTransfer(\n  recipientCode: string,\n  amount: number,\n  reference: string,\n  reason: string\n): Promise<TransferResponse> {\n  try {\n    // Convert amount to kobo (Paystack uses kobo)\n    const amountInKobo = Math.round(amount * 100);\n\n    const response = await axios.post<TransferResponse>(\n      `${PAYSTACK_BASE_URL}/transfer`,\n      {\n        source: \"balance\",\n        amount: amountInKobo,\n        recipient: recipientCode,\n        reason,\n        reference,\n      },\n      {\n        headers: {\n          Authorization: `Bearer ${PAYSTACK_SECRET_KEY}`,\n          \"Content-Type\": \"application/json\",\n        },\n      }\n    );\n    return response.data;\n  } catch (error: any) {\n    console.error(\"Paystack transfer error:\", error.response?.data || error.message);\n    throw new Error(error.response?.data?.message || \"Failed to initiate transfer\");\n  }\n}\n","size_bytes":4498},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","size_bytes":2263},"shared/schema.ts":{"content":"import { sql } from \"drizzle-orm\";\nimport { pgTable, text, varchar, timestamp, decimal, integer, jsonb, index } from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\nexport const sessions = pgTable(\n  \"sessions\",\n  {\n    sid: varchar(\"sid\").primaryKey(),\n    sess: jsonb(\"sess\").notNull(),\n    expire: timestamp(\"expire\").notNull(),\n  },\n  (table) => [index(\"IDX_session_expire\").on(table.expire)],\n);\n\nexport const users = pgTable(\"users\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  oauthSub: varchar(\"oauth_sub\").unique(),\n  email: text(\"email\").unique(),\n  password: text(\"password\"),\n  firstName: text(\"first_name\"),\n  lastName: text(\"last_name\"),\n  country: text(\"country\"),\n  referralCode: text(\"referral_code\"),\n  profileImageUrl: varchar(\"profile_image_url\"),\n  bankCode: text(\"bank_code\"),\n  accountNumber: text(\"account_number\"),\n  accountName: text(\"account_name\"),\n  recipientCode: text(\"recipient_code\"),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n  updatedAt: timestamp(\"updated_at\").notNull().defaultNow(),\n});\n\nexport const transactionStatuses = [\"pending\", \"paid\", \"asset_transferred\", \"completed\"] as const;\nexport type TransactionStatus = typeof transactionStatuses[number];\n\nexport const transactions = pgTable(\"transactions\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  sellerId: varchar(\"seller_id\").notNull().references(() => users.id),\n  buyerId: varchar(\"buyer_id\").references(() => users.id),\n  buyerEmail: text(\"buyer_email\").notNull(),\n  itemName: text(\"item_name\").notNull(),\n  itemDescription: text(\"item_description\").notNull(),\n  price: decimal(\"price\", { precision: 10, scale: 2 }).notNull(),\n  commission: decimal(\"commission\", { precision: 10, scale: 2 }).notNull(),\n  status: text(\"status\").notNull().default(\"pending\").$type<TransactionStatus>(),\n  paystackReference: text(\"paystack_reference\"),\n  uniqueLink: text(\"unique_link\").notNull().unique(),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n  updatedAt: timestamp(\"updated_at\").notNull().defaultNow(),\n});\n\nexport const disputeStatuses = [\"pending\", \"resolved\", \"closed\"] as const;\nexport type DisputeStatus = typeof disputeStatuses[number];\n\nexport const disputes = pgTable(\"disputes\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  transactionId: varchar(\"transaction_id\").notNull().references(() => transactions.id),\n  sellerId: varchar(\"seller_id\").notNull().references(() => users.id),\n  reason: text(\"reason\").notNull(),\n  description: text(\"description\").notNull(),\n  evidence: text(\"evidence\"),\n  status: text(\"status\").notNull().default(\"pending\").$type<DisputeStatus>(),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n  updatedAt: timestamp(\"updated_at\").notNull().defaultNow(),\n});\n\nexport const insertUserSchema = z.object({\n  email: z.string().email(),\n  password: z.string().min(6),\n  firstName: z.string().min(1),\n  lastName: z.string().min(1),\n  country: z.string().min(1),\n  referralCode: z.string().optional(),\n});\n\nexport const upsertUserSchema = z.object({\n  oauthSub: z.string(),\n  email: z.string().optional().nullable(),\n  firstName: z.string().optional().nullable(),\n  lastName: z.string().optional().nullable(),\n  profileImageUrl: z.string().optional().nullable(),\n});\n\nexport const insertTransactionSchema = createInsertSchema(transactions).pick({\n  sellerId: true,\n  buyerEmail: true,\n  itemName: true,\n  itemDescription: true,\n  price: true,\n  uniqueLink: true,\n});\n\nexport const updateTransactionStatusSchema = z.object({\n  status: z.enum(transactionStatuses),\n  paystackReference: z.string().optional(),\n});\n\nexport const insertDisputeSchema = createInsertSchema(disputes).pick({\n  transactionId: true,\n  sellerId: true,\n  reason: true,\n  description: true,\n  evidence: true,\n});\n\nexport const updateDisputeStatusSchema = z.object({\n  status: z.enum(disputeStatuses),\n});\n\nexport const payoutStatuses = [\"pending\", \"processing\", \"success\", \"failed\"] as const;\nexport type PayoutStatus = typeof payoutStatuses[number];\n\nexport const payouts = pgTable(\"payouts\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  transactionId: varchar(\"transaction_id\").notNull().unique().references(() => transactions.id),\n  sellerId: varchar(\"seller_id\").notNull().references(() => users.id),\n  amount: decimal(\"amount\", { precision: 10, scale: 2 }).notNull(),\n  status: text(\"status\").notNull().default(\"pending\").$type<PayoutStatus>(),\n  paystackTransferCode: text(\"paystack_transfer_code\"),\n  paystackReference: text(\"paystack_reference\"),\n  failureReason: text(\"failure_reason\"),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n  updatedAt: timestamp(\"updated_at\").notNull().defaultNow(),\n});\n\nexport const updateBankAccountSchema = z.object({\n  bankCode: z.string(),\n  accountNumber: z.string(),\n  accountName: z.string(),\n});\n\nexport type InsertUser = z.infer<typeof insertUserSchema>;\nexport type UpsertUser = z.infer<typeof upsertUserSchema>;\nexport type User = typeof users.$inferSelect;\nexport type InsertTransaction = z.infer<typeof insertTransactionSchema>;\nexport type Transaction = typeof transactions.$inferSelect;\nexport type UpdateTransactionStatus = z.infer<typeof updateTransactionStatusSchema>;\nexport type InsertDispute = z.infer<typeof insertDisputeSchema>;\nexport type Dispute = typeof disputes.$inferSelect;\nexport type UpdateDisputeStatus = z.infer<typeof updateDisputeStatusSchema>;\nexport type Payout = typeof payouts.$inferSelect;\nexport type UpdateBankAccount = z.infer<typeof updateBankAccountSchema>;\n","size_bytes":5644},"client/src/App.tsx":{"content":"import { Switch, Route } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport NotFound from \"@/pages/not-found\";\nimport { DashboardLayout } from \"@/components/DashboardLayout\";\n\nimport { CreateAccount } from \"@/pages/CreateAccount\";\nimport { Login } from \"@/pages/Login\";\nimport { SellerDashboard } from \"@/pages/SellerDashboard\";\nimport { CreateTransaction } from \"@/pages/CreateTransaction\";\nimport { TransactionDetails } from \"@/pages/TransactionDetails\";\nimport { PaymentPage } from \"@/pages/PaymentPage\";\nimport { BuyerConfirmation } from \"@/pages/BuyerConfirmation\";\nimport Office from \"@/pages/Office\";\nimport { Settings } from \"@/pages/Settings\";\n\nfunction Router() {\n  return (\n    <Switch>\n      {/* Auth pages */}\n      <Route path=\"/\" component={CreateAccount} />\n      <Route path=\"/login\" component={Login} />\n      \n      {/* Seller pages with dashboard layout */}\n      <Route path=\"/seller-dashboard\">\n        <DashboardLayout>\n          <SellerDashboard />\n        </DashboardLayout>\n      </Route>\n      <Route path=\"/create-transaction\">\n        <DashboardLayout>\n          <CreateTransaction />\n        </DashboardLayout>\n      </Route>\n      <Route path=\"/office\">\n        <DashboardLayout>\n          <Office />\n        </DashboardLayout>\n      </Route>\n      <Route path=\"/settings\">\n        <DashboardLayout>\n          <Settings />\n        </DashboardLayout>\n      </Route>\n      \n      {/* Transaction pages */}\n      <Route path=\"/transaction/:link\" component={TransactionDetails} />\n      <Route path=\"/payment/:link\" component={PaymentPage} />\n      <Route path=\"/buyer-confirm/:link\" component={BuyerConfirmation} />\n      \n      {/* Fallback to 404 */}\n      <Route component={NotFound} />\n    </Switch>\n  );\n}\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <TooltipProvider>\n        <Toaster />\n        <Router />\n      </TooltipProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","size_bytes":2149},"client/src/index.css":{"content":"@tailwind components;\n@tailwind utilities;\n\n@layer components {\n  .all-\\[unset\\] {\n    all: unset;\n  }\n}\n\n:root {\n  --body-regular-font-family: \"Montserrat\", Helvetica;\n  --body-regular-font-size: 16px;\n  --body-regular-font-style: normal;\n  --body-regular-font-weight: 400;\n  --body-regular-letter-spacing: 0px;\n  --body-regular-line-height: 140%;\n  --poppins-regular-body-font-family: \"Poppins\", Helvetica;\n  --poppins-regular-body-font-size: 16px;\n  --poppins-regular-body-font-style: normal;\n  --poppins-regular-body-font-weight: 400;\n  --poppins-regular-body-letter-spacing: 0px;\n  --poppins-regular-body-lg-font-family: \"Poppins\", Helvetica;\n  --poppins-regular-body-lg-font-size: 18px;\n  --poppins-regular-body-lg-font-style: normal;\n  --poppins-regular-body-lg-font-weight: 400;\n  --poppins-regular-body-lg-letter-spacing: 0px;\n  --poppins-regular-body-lg-line-height: 140%;\n  --poppins-regular-body-line-height: 140%;\n  --poppins-regular-xs-font-family: \"Poppins\", Helvetica;\n  --poppins-regular-xs-font-size: 12px;\n  --poppins-regular-xs-font-style: normal;\n  --poppins-regular-xs-font-weight: 400;\n  --poppins-regular-xs-letter-spacing: 0px;\n  --poppins-regular-xs-line-height: 125%;\n  --poppins-semibold-h5-font-family: \"Poppins\", Helvetica;\n  --poppins-semibold-h5-font-size: 32px;\n  --poppins-semibold-h5-font-style: normal;\n  --poppins-semibold-h5-font-weight: 600;\n  --poppins-semibold-h5-letter-spacing: 0px;\n  --poppins-semibold-h5-line-height: 125%;\n}\n\n:root {\n  --animate-spin: spin 1s linear infinite;\n}\n\n.animate-fade-in {\n  animation: fade-in 1s var(--animation-delay, 0s) ease forwards;\n}\n\n.animate-fade-up {\n  animation: fade-up 1s var(--animation-delay, 0s) ease forwards;\n}\n\n.animate-marquee {\n  animation: marquee var(--duration) infinite linear;\n}\n\n.animate-marquee-vertical {\n  animation: marquee-vertical var(--duration) linear infinite;\n}\n\n.animate-shimmer {\n  animation: shimmer 8s infinite;\n}\n\n.animate-spin {\n  animation: var(--animate-spin);\n}\n\n@keyframes spin {\n  to {\n    transform: rotate(1turn);\n  }\n}\n\n@keyframes image-glow {\n  0% {\n    opacity: 0;\n    animation-timing-function: cubic-bezier(0.74, 0.25, 0.76, 1);\n  }\n\n  10% {\n    opacity: 0.7;\n    animation-timing-function: cubic-bezier(0.12, 0.01, 0.08, 0.99);\n  }\n\n  to {\n    opacity: 0.4;\n  }\n}\n\n@keyframes fade-in {\n  0% {\n    opacity: 0;\n    transform: translateY(-10px);\n  }\n\n  to {\n    opacity: 1;\n    transform: none;\n  }\n}\n\n@keyframes fade-up {\n  0% {\n    opacity: 0;\n    transform: translateY(20px);\n  }\n\n  to {\n    opacity: 1;\n    transform: none;\n  }\n}\n\n@keyframes shimmer {\n  0%,\n  90%,\n  to {\n    background-position: calc(-100% - var(--shimmer-width)) 0;\n  }\n\n  30%,\n  60% {\n    background-position: calc(100% + var(--shimmer-width)) 0;\n  }\n}\n\n@keyframes marquee {\n  0% {\n    transform: translate(0);\n  }\n\n  to {\n    transform: translateX(calc(-100% - var(--gap)));\n  }\n}\n\n@keyframes marquee-vertical {\n  0% {\n    transform: translateY(0);\n  }\n\n  to {\n    transform: translateY(calc(-100% - var(--gap)));\n  }\n}\n\n@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n@layer base {\n  :root {\n    --background: 0 0% 100%;\n    --foreground: 222.2 47.4% 11.2%;\n\n    --muted: 210 40% 96.1%;\n    --muted-foreground: 215.4 16.3% 46.9%;\n\n    --popover: 0 0% 100%;\n    --popover-foreground: 222.2 47.4% 11.2%;\n\n    --border: 214.3 31.8% 91.4%;\n    --input: 214.3 31.8% 91.4%;\n\n    --card: transparent;\n    --card-foreground: 222.2 47.4% 11.2%;\n\n    --primary: 222.2 47.4% 11.2%;\n    --primary-foreground: 210 40% 98%;\n\n    --secondary: 210 40% 96.1%;\n    --secondary-foreground: 222.2 47.4% 11.2%;\n\n    --accent: 210 40% 96.1%;\n    --accent-foreground: 222.2 47.4% 11.2%;\n\n    --destructive: 0 100% 50%;\n    --destructive-foreground: 210 40% 98%;\n\n    --ring: 215 20.2% 65.1%;\n\n    --radius: 0.5rem;\n  }\n\n  .dark {\n    --background: 224 71% 4%;\n    --foreground: 213 31% 91%;\n\n    --muted: 223 47% 11%;\n    --muted-foreground: 215.4 16.3% 56.9%;\n\n    --accent: 216 34% 17%;\n    --accent-foreground: 210 40% 98%;\n\n    --popover: 224 71% 4%;\n    --popover-foreground: 215 20.2% 65.1%;\n\n    --border: 216 34% 17%;\n    --input: 216 34% 17%;\n\n    --card: transparent;\n    --card-foreground: 213 31% 91%;\n\n    --primary: 210 40% 98%;\n    --primary-foreground: 222.2 47.4% 1.2%;\n\n    --secondary: 222.2 47.4% 11.2%;\n    --secondary-foreground: 210 40% 98%;\n\n    --destructive: 0 63% 31%;\n    --destructive-foreground: 210 40% 98%;\n\n    --ring: 216 34% 17%;\n\n    --radius: 0.5rem;\n  }\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply bg-background text-foreground;\n    font-feature-settings: \"rlig\" 1, \"calt\" 1;\n  }\n}\n","size_bytes":4640},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","size_bytes":157},"client/src/components/DashboardLayout.tsx":{"content":"import { AppSidebar } from \"./AppSidebar\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { useLocation } from \"wouter\";\nimport { Loader2, Menu } from \"lucide-react\";\nimport { SidebarProvider, SidebarTrigger, SidebarInset } from \"@/components/ui/sidebar\";\n\ninterface DashboardLayoutProps {\n  children: React.ReactNode;\n}\n\nexport const DashboardLayout = ({ children }: DashboardLayoutProps): JSX.Element => {\n  const [, setLocation] = useLocation();\n\n  const { data: userData, isLoading } = useQuery<{ user: any } | null>({\n    queryKey: [\"/api/user\"],\n  });\n\n  if (isLoading) {\n    return (\n      <div className=\"w-full min-h-screen flex items-center justify-center\">\n        <Loader2 className=\"w-8 h-8 animate-spin\" />\n      </div>\n    );\n  }\n\n  if (!userData?.user) {\n    setLocation(\"/login\");\n    return <></>;\n  }\n\n  return (\n    <SidebarProvider>\n      <AppSidebar user={userData.user} />\n      <SidebarInset>\n        <header className=\"sticky top-0 z-10 flex h-14 items-center justify-between border-b bg-white px-4 md:hidden\">\n          <SidebarTrigger className=\"h-10 w-10\">\n            <Menu className=\"h-5 w-5\" />\n            <span className=\"sr-only\">Toggle menu</span>\n          </SidebarTrigger>\n          <div className=\"flex items-center gap-2\">\n            <div className=\"w-6 h-6 rounded-lg bg-[#493d9e] flex items-center justify-center\">\n              <span className=\"text-white font-bold text-xs\">X</span>\n            </div>\n            <span className=\"text-lg font-bold text-[#041d0f]\">XCROW</span>\n          </div>\n          <div className=\"w-8 h-8 rounded-full bg-[#493d9e] flex items-center justify-center\">\n            <span className=\"text-white font-semibold text-xs\">\n              {userData.user.name?.charAt(0) || userData.user.email.charAt(0).toUpperCase()}\n            </span>\n          </div>\n        </header>\n        <main className=\"flex-1 overflow-y-auto bg-gray-50\">\n          {children}\n        </main>\n      </SidebarInset>\n    </SidebarProvider>\n  );\n};\n","size_bytes":2008},"client/src/components/StatisticsCard.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { ArrowUpIcon, ArrowDownIcon, LucideIcon } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\n\ninterface StatisticsCardProps {\n  icon: LucideIcon;\n  iconBgColor: string;\n  iconColor: string;\n  title: string;\n  value: string | number;\n  change: number;\n  changeLabel: string;\n}\n\nexport const StatisticsCard = ({\n  icon: Icon,\n  iconBgColor,\n  iconColor,\n  title,\n  value,\n  change,\n  changeLabel,\n}: StatisticsCardProps): JSX.Element => {\n  const isPositive = change >= 0;\n\n  return (\n    <Card>\n      <CardContent className=\"p-6\">\n        <div className=\"flex items-start justify-between\">\n          <div className=\"flex-1\">\n            <div className=\"flex items-center gap-3 mb-4\">\n              <div className={cn(\"w-12 h-12 rounded-lg flex items-center justify-center\", iconBgColor)}>\n                <Icon className={cn(\"w-6 h-6\", iconColor)} />\n              </div>\n            </div>\n            <p className=\"text-sm text-gray-600 mb-1\">{title}</p>\n            <p className=\"text-3xl font-bold text-gray-900\">{value}</p>\n            <div className=\"flex items-center gap-1 mt-2\">\n              {isPositive ? (\n                <ArrowUpIcon className=\"w-4 h-4 text-green-600\" />\n              ) : (\n                <ArrowDownIcon className=\"w-4 h-4 text-red-600\" />\n              )}\n              <span className={cn(\n                \"text-sm font-medium\",\n                isPositive ? \"text-green-600\" : \"text-red-600\"\n              )}>\n                {Math.abs(change)}%\n              </span>\n              <span className=\"text-sm text-gray-500\">{changeLabel}</span>\n            </div>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n};\n","size_bytes":1738},"client/src/components/TransactionAcceptDialog.tsx":{"content":"import { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Rocket } from \"lucide-react\";\nimport { type Transaction } from \"@shared/schema\";\n\ninterface TransactionAcceptDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  transaction: Transaction;\n  sellerName?: string;\n  onAccept: () => void;\n  onDecline: () => void;\n}\n\nexport const TransactionAcceptDialog = ({\n  open,\n  onOpenChange,\n  transaction,\n  sellerName,\n  onAccept,\n  onDecline,\n}: TransactionAcceptDialogProps): JSX.Element => {\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"sm:max-w-md\">\n        <DialogHeader className=\"items-center text-center\">\n          <div className=\"mx-auto mb-4 w-16 h-16 bg-gradient-to-br from-purple-100 to-blue-100 rounded-full flex items-center justify-center\">\n            <Rocket className=\"w-8 h-8 text-[#493d9e]\" />\n          </div>\n          <DialogTitle className=\"text-xl font-bold\">\n            You've Been Invited to a Secure Deal!\n          </DialogTitle>\n        </DialogHeader>\n        \n        <div className=\"space-y-4 py-4\">\n          <div className=\"flex justify-between items-start\">\n            <div className=\"text-sm text-gray-600\">Seller</div>\n            <div className=\"text-right\">\n              {sellerName && <div className=\"font-medium text-gray-900\">{sellerName}</div>}\n              <div className=\"text-sm text-gray-600\">{transaction.buyerEmail}</div>\n            </div>\n          </div>\n\n          <div className=\"flex justify-between items-start\">\n            <div className=\"text-sm text-gray-600\">Asset Name</div>\n            <div className=\"font-medium text-gray-900\">{transaction.itemName}</div>\n          </div>\n\n          <div className=\"flex justify-between items-start\">\n            <div className=\"text-sm text-gray-600\">Price</div>\n            <div className=\"font-medium text-gray-900\">\n              ₦{parseFloat(transaction.price).toLocaleString()}\n            </div>\n          </div>\n\n          <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-3\">\n            <p className=\"text-sm text-gray-700 text-center\">\n              Your funds will be securely held by Xcrow until you receive your asset. No risks, just smooth transactions!\n            </p>\n          </div>\n        </div>\n\n        <div className=\"flex gap-3\">\n          <Button\n            onClick={onAccept}\n            className=\"flex-1 bg-[#493d9e] hover:bg-[#493d9e]/90\"\n          >\n            Accept\n          </Button>\n          <Button\n            onClick={onDecline}\n            variant=\"outline\"\n            className=\"flex-1\"\n          >\n            Decline\n          </Button>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n};\n","size_bytes":2825},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","size_bytes":1383},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"client/src/pages/BuyerConfirmation.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useRoute, useLocation } from \"wouter\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { type Transaction } from \"@shared/schema\";\nimport { Loader2, CheckCircle2, AlertTriangle } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nexport const BuyerConfirmation = (): JSX.Element => {\n  const [, params] = useRoute(\"/buyer-confirm/:link\");\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n\n  const { data: userData } = useQuery<{ user: any } | null>({\n    queryKey: [\"/api/user\"],\n  });\n\n  const { data: transactionData, isLoading } = useQuery<{ transaction: Transaction } | null>({\n    queryKey: [\"/api/transactions\", params?.link],\n    enabled: !!params?.link,\n  });\n\n  const transaction = transactionData?.transaction;\n  const isBuyer = transaction && userData?.user?.email === transaction.buyerEmail;\n\n  const confirmReceiptMutation = useMutation({\n    mutationFn: async (transactionId: string) => {\n      const res = await apiRequest(\"PATCH\", `/api/transactions/${transactionId}/status`, { status: \"completed\" });\n      return await res.json();\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Transaction completed\",\n        description: \"Funds have been released to the seller\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/transactions\"] });\n      setLocation(`/transaction/${transaction?.uniqueLink}`);\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Confirmation failed\",\n        description: error.message || \"Unable to confirm receipt\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  if (isLoading) {\n    return (\n      <div className=\"w-full min-h-screen flex items-center justify-center\">\n        <Loader2 className=\"w-8 h-8 animate-spin\" />\n      </div>\n    );\n  }\n\n  if (!transaction || !isBuyer) {\n    return (\n      <div className=\"w-full min-h-screen flex items-center justify-center\">\n        <p>Transaction not found or you don't have permission</p>\n      </div>\n    );\n  }\n\n  if (transaction.status !== \"asset_transferred\") {\n    setLocation(`/transaction/${transaction.uniqueLink}`);\n    return <></>;\n  }\n\n  return (\n    <div className=\"w-full min-h-screen bg-gray-50 py-12\">\n      <div className=\"max-w-2xl mx-auto px-4\">\n        <div className=\"mb-8\">\n          <h1 className=\"text-3xl font-bold text-[#041d0f] mb-2\">Confirm Receipt</h1>\n          <p className=\"text-gray-600\">Verify that you received the item</p>\n        </div>\n\n        <Card className=\"mb-6\">\n          <CardHeader>\n            <CardTitle>Transaction Details</CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-6\">\n            <div>\n              <h3 className=\"font-semibold mb-2\" data-testid=\"text-itemName\">{transaction.itemName}</h3>\n              <p className=\"text-sm text-gray-600\" data-testid=\"text-itemDescription\">\n                {transaction.itemDescription}\n              </p>\n            </div>\n\n            <div className=\"border-t pt-4\">\n              <div className=\"space-y-2\">\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">Item Price</span>\n                  <span className=\"font-medium\" data-testid=\"text-price\">\n                    ₦{parseFloat(transaction.price).toLocaleString()}\n                  </span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">Service Fee</span>\n                  <span className=\"font-medium\" data-testid=\"text-commission\">\n                    ₦{parseFloat(transaction.commission).toLocaleString()}\n                  </span>\n                </div>\n                <div className=\"flex justify-between pt-2 border-t\">\n                  <span className=\"font-semibold\">Total Paid</span>\n                  <span className=\"text-xl font-bold\" data-testid=\"text-total\">\n                    ₦{(parseFloat(transaction.price) + parseFloat(transaction.commission)).toLocaleString()}\n                  </span>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4\">\n              <div className=\"flex items-start gap-3\">\n                <AlertTriangle className=\"w-5 h-5 text-yellow-600 mt-0.5\" />\n                <div>\n                  <h3 className=\"font-semibold text-yellow-900 mb-1\">Important Notice</h3>\n                  <p className=\"text-sm text-yellow-800\">\n                    By confirming receipt, you acknowledge that you have received the item as described.\n                    The payment will be released to the seller and this action cannot be undone.\n                  </p>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\n              <div className=\"flex items-start gap-3\">\n                <CheckCircle2 className=\"w-5 h-5 text-green-600 mt-0.5\" />\n                <div>\n                  <h3 className=\"font-semibold text-green-900 mb-1\">Ready to Confirm?</h3>\n                  <p className=\"text-sm text-green-800\">\n                    Only confirm if you have received the item and are satisfied with it.\n                  </p>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"flex gap-4\">\n              <Button\n                variant=\"outline\"\n                onClick={() => setLocation(`/transaction/${transaction.uniqueLink}`)}\n                data-testid=\"button-cancel\"\n                className=\"flex-1\"\n              >\n                Cancel\n              </Button>\n              <Button\n                onClick={() => confirmReceiptMutation.mutate(transaction.id)}\n                disabled={confirmReceiptMutation.isPending}\n                data-testid=\"button-confirm\"\n                className=\"flex-1 bg-green-600 hover:bg-green-700\"\n              >\n                {confirmReceiptMutation.isPending ? (\n                  <>\n                    <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                    Confirming...\n                  </>\n                ) : (\n                  <>\n                    <CheckCircle2 className=\"w-4 h-4 mr-2\" />\n                    Confirm Receipt & Release Funds\n                  </>\n                )}\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n};\n","size_bytes":6668},"client/src/pages/CreateAccount.tsx":{"content":"import { EyeIcon, EyeOffIcon } from \"lucide-react\";\nimport { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { insertUserSchema, type InsertUser } from \"@shared/schema\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useLocation } from \"wouter\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nexport const CreateAccount = (): JSX.Element => {\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  const [showPassword, setShowPassword] = useState(false);\n  const [agreedToTerms, setAgreedToTerms] = useState(false);\n\n  const form = useForm<InsertUser>({\n    resolver: zodResolver(insertUserSchema),\n    defaultValues: {\n      firstName: \"\",\n      lastName: \"\",\n      email: \"\",\n      password: \"\",\n      country: \"Nigeria\",\n      referralCode: \"\",\n    },\n  });\n\n  const signupMutation = useMutation({\n    mutationFn: async (data: InsertUser) => {\n      const res = await apiRequest(\"POST\", \"/api/signup\", data);\n      return await res.json();\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Account created successfully\",\n        description: \"Welcome to Xcrow!\",\n      });\n      setLocation(\"/seller-dashboard\");\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Signup failed\",\n        description: error.message || \"Failed to create account\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = form.handleSubmit((data) => {\n    if (!agreedToTerms) {\n      toast({\n        title: \"Terms required\",\n        description: \"Please agree to the Terms of Use and Privacy Policy\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n    signupMutation.mutate(data);\n  });\n\n  return (\n    <div className=\"w-full min-h-screen flex bg-white\">\n      <div className=\"flex w-full max-w-[1440px] mx-auto items-start gap-6 p-6\">\n        {/* Illustration Panel - Hidden on Mobile */}\n        <div className=\"relative w-1/2 min-h-[976px] bg-[#493d9e] rounded-lg hidden md:block\">\n          <div className=\"absolute top-6 left-6 w-40 h-12\">\n            <img\n              className=\"absolute top-0 left-0 w-12 h-12\"\n              alt=\"Material symbols\"\n              src=\"/figmaAssets/material-symbols-shield.svg\"\n            />\n\n            <div className=\"absolute top-px left-12 [font-family:'Inter',Helvetica] font-bold text-white text-[38.7px] tracking-[-0.77px] leading-[38.7px] whitespace-nowrap\">\n              xcrow\n            </div>\n          </div>\n\n          <img\n            className=\"absolute top-[289px] left-[calc(50.00%_-_186px)] w-[372px] h-[276px]\"\n            alt=\"Group\"\n            src=\"/figmaAssets/group-2721.png\"\n          />\n\n          <div className=\"absolute top-[552px] left-[439px] w-16 h-16 flex items-center justify-center bg-[#edecf8] rounded-[64px] overflow-hidden rotate-[-55.82deg]\">\n            <div className=\"mt-[57.3px] h-16 ml-[-0.1px] w-[64.82px] bg-[#493d9e] rotate-[0.15deg]\" />\n          </div>\n\n          <div className=\"absolute top-[200px] left-[137px] w-[69px] h-[72px]\">\n            <div className=\"absolute top-0 left-0 w-12 h-12 bg-[#edecf8]\" />\n\n            <div className=\"absolute top-6 left-[21px] w-12 h-12 border-[0.5px] border-solid border-[#42a670]\" />\n          </div>\n\n          <div className=\"flex flex-col w-[500px] items-center gap-4 absolute top-[666px] left-[calc(50.00%_-_250px)]\">\n            <div className=\"relative w-fit mt-[-1.00px] font-poppins-semibold-h5 font-[number:var(--poppins-semibold-h5-font-weight)] text-white text-[length:var(--poppins-semibold-h5-font-size)] tracking-[var(--poppins-semibold-h5-letter-spacing)] leading-[var(--poppins-semibold-h5-line-height)] whitespace-nowrap [font-style:var(--poppins-semibold-h5-font-style)]\">\n              Secure Your Digital Deals\n            </div>\n\n            <div className=\"relative self-stretch font-poppins-regular-body font-[number:var(--poppins-regular-body-font-weight)] text-white text-[length:var(--poppins-regular-body-font-size)] text-center tracking-[var(--poppins-regular-body-letter-spacing)] leading-[var(--poppins-regular-body-line-height)] [font-style:var(--poppins-regular-body-font-style)]\">\n              Join Xcrow to experience seamless and secure peer-to-peer\n              transactions for cryptocurrencies, NFTs, and more—all protected by\n              our trusted escrow system.\n            </div>\n          </div>\n\n          <img\n            className=\"absolute top-4 left-[640px] w-5 h-[116px]\"\n            alt=\"Frame\"\n            src=\"/figmaAssets/frame-1000003642.svg\"\n          />\n\n          <img\n            className=\"absolute top-[880px] left-6 w-[72px] h-[72px]\"\n            alt=\"Frame\"\n            src=\"/figmaAssets/frame-1000003645.svg\"\n          />\n\n          <img\n            className=\"absolute top-[299px] left-[529px] w-[94px] h-[94px]\"\n            alt=\"Frame\"\n            src=\"/figmaAssets/frame.svg\"\n          />\n        </div>\n\n        {/* Form Container - Full Width on Mobile */}\n        <div className=\"flex flex-col w-full md:w-1/2 items-start justify-center gap-8 px-4 md:px-6 py-10 relative bg-white\">\n          {/* Mobile Logo - Only visible on mobile */}\n          <div className=\"flex items-center gap-2 md:hidden mb-4\">\n            <div className=\"w-8 h-8 rounded-lg bg-[#493d9e] flex items-center justify-center\">\n              <span className=\"text-white font-bold text-sm\">X</span>\n            </div>\n            <span className=\"text-2xl font-bold text-[#041d0f]\">xcrow</span>\n          </div>\n\n          <header className=\"inline-flex flex-col items-start gap-2 relative flex-[0_0_auto]\">\n            <h1 className=\"relative w-fit mt-[-1.00px] font-poppins-semibold-h5 font-[number:var(--poppins-semibold-h5-font-weight)] text-[#041d0f] text-[length:var(--poppins-semibold-h5-font-size)] text-center tracking-[var(--poppins-semibold-h5-letter-spacing)] leading-[var(--poppins-semibold-h5-line-height)] whitespace-nowrap [font-style:var(--poppins-semibold-h5-font-style)]\">\n              Create Your Account\n            </h1>\n\n            <p className=\"relative w-fit font-poppins-regular-body-lg font-[number:var(--poppins-regular-body-lg-font-weight)] text-[#041d0f] text-[length:var(--poppins-regular-body-lg-font-size)] text-center tracking-[var(--poppins-regular-body-lg-letter-spacing)] leading-[var(--poppins-regular-body-lg-line-height)] whitespace-nowrap [font-style:var(--poppins-regular-body-lg-font-style)]\">\n              Easy, fast &amp; secure\n            </p>\n          </header>\n\n          <form onSubmit={onSubmit} className=\"flex flex-col items-start gap-6 relative self-stretch w-full flex-[0_0_auto]\">\n            <div className=\"flex flex-col items-start gap-4 relative self-stretch w-full flex-[0_0_auto]\">\n              {/* First Name and Last Name - Stack on Mobile, Side by Side on Desktop */}\n              <div className=\"flex flex-col md:flex-row items-start gap-4 md:gap-6 relative self-stretch w-full flex-[0_0_auto]\">\n                <div className=\"flex flex-col items-start gap-1 px-0 py-px relative flex-1 w-full\">\n                  <Label\n                    htmlFor=\"firstName\"\n                    className=\"flex h-5 items-center gap-1 px-2 py-0 relative self-stretch w-full\"\n                  >\n                    <span className=\"relative w-fit font-poppins-regular-xs font-[number:var(--poppins-regular-xs-font-weight)] text-[#041d0f] text-[length:var(--poppins-regular-xs-font-size)] tracking-[var(--poppins-regular-xs-letter-spacing)] leading-[var(--poppins-regular-xs-line-height)] whitespace-nowrap [font-style:var(--poppins-regular-xs-font-style)]\">\n                      First Name\n                    </span>\n                  </Label>\n\n                  <Input\n                    id=\"firstName\"\n                    data-testid=\"input-firstName\"\n                    {...form.register(\"firstName\")}\n                    type=\"text\"\n                    className=\"h-14 px-3 py-2 bg-white rounded-lg border-[0.5px] border-solid border-[#868b90]\"\n                  />\n                </div>\n\n                <div className=\"flex flex-col items-start gap-1 px-0 py-px relative flex-1 w-full\">\n                  <Label\n                    htmlFor=\"lastName\"\n                    className=\"flex h-5 items-center gap-1 px-2 py-0 relative self-stretch w-full\"\n                  >\n                    <span className=\"relative w-fit font-poppins-regular-xs font-[number:var(--poppins-regular-xs-font-weight)] text-[#041d0f] text-[length:var(--poppins-regular-xs-font-size)] tracking-[var(--poppins-regular-xs-letter-spacing)] leading-[var(--poppins-regular-xs-line-height)] whitespace-nowrap [font-style:var(--poppins-regular-xs-font-style)]\">\n                      Last Name\n                    </span>\n                  </Label>\n\n                  <Input\n                    id=\"lastName\"\n                    data-testid=\"input-lastName\"\n                    {...form.register(\"lastName\")}\n                    type=\"text\"\n                    className=\"h-14 px-3 py-2 bg-white rounded-lg border-[0.5px] border-solid border-[#868b90]\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"flex-col items-start gap-1 px-0 py-px flex relative self-stretch w-full\">\n                <Label\n                  htmlFor=\"email\"\n                  className=\"flex h-5 items-center gap-1 px-2 py-0 relative self-stretch w-full\"\n                >\n                  <span className=\"relative w-fit font-poppins-regular-xs font-[number:var(--poppins-regular-xs-font-weight)] text-[#041d0f] text-[length:var(--poppins-regular-xs-font-size)] tracking-[var(--poppins-regular-xs-letter-spacing)] leading-[var(--poppins-regular-xs-line-height)] whitespace-nowrap [font-style:var(--poppins-regular-xs-font-style)]\">\n                    Email Address\n                  </span>\n                </Label>\n\n                <Input\n                  id=\"email\"\n                  data-testid=\"input-email\"\n                  {...form.register(\"email\")}\n                  type=\"email\"\n                  className=\"h-14 px-3 py-2 bg-white rounded-lg border-[0.5px] border-solid border-[#868b90]\"\n                />\n              </div>\n\n              <div className=\"flex-col items-start gap-1 px-0 py-px flex relative self-stretch w-full\">\n                <Label\n                  htmlFor=\"referralCode\"\n                  className=\"flex h-5 items-center gap-1 px-2 py-0 relative self-stretch w-full\"\n                >\n                  <span className=\"relative w-fit font-poppins-regular-xs font-[number:var(--poppins-regular-xs-font-weight)] text-[#041d0f] text-[length:var(--poppins-regular-xs-font-size)] tracking-[var(--poppins-regular-xs-letter-spacing)] leading-[var(--poppins-regular-xs-line-height)] whitespace-nowrap [font-style:var(--poppins-regular-xs-font-style)]\">\n                    Referral Code\n                  </span>\n                </Label>\n\n                <Input\n                  id=\"referralCode\"\n                  data-testid=\"input-referralCode\"\n                  {...form.register(\"referralCode\")}\n                  type=\"text\"\n                  placeholder=\"XCR-25-0956\"\n                  className=\"h-14 px-3 py-2 bg-white rounded-lg border-[0.5px] border-solid border-[#868b90]\"\n                />\n              </div>\n\n              <div className=\"flex-col items-start gap-1 px-0 py-px flex relative self-stretch w-full\">\n                <Label\n                  htmlFor=\"country\"\n                  className=\"flex h-5 items-center gap-1 px-2 py-0 relative self-stretch w-full\"\n                >\n                  <span className=\"relative w-fit font-poppins-regular-xs font-[number:var(--poppins-regular-xs-font-weight)] text-[#041d0f] text-[length:var(--poppins-regular-xs-font-size)] tracking-[var(--poppins-regular-xs-letter-spacing)] leading-[var(--poppins-regular-xs-line-height)] whitespace-nowrap [font-style:var(--poppins-regular-xs-font-style)]\">\n                    Country\n                  </span>\n                </Label>\n\n                <Select\n                  value={form.watch(\"country\")}\n                  onValueChange={(value) => form.setValue(\"country\", value)}\n                >\n                  <SelectTrigger data-testid=\"select-country\" className=\"h-14 px-3 py-2 bg-white rounded-lg border-[0.5px] border-solid border-[#868b90]\">\n                    <SelectValue>\n                      <span className=\"font-poppins-regular-body font-[number:var(--poppins-regular-body-font-weight)] text-[#041d0f] text-[length:var(--poppins-regular-body-font-size)] tracking-[var(--poppins-regular-body-letter-spacing)] leading-[var(--poppins-regular-body-line-height)] [font-style:var(--poppins-regular-body-font-style)]\">\n                        {form.watch(\"country\")}\n                      </span>\n                    </SelectValue>\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"Nigeria\">Nigeria</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div className=\"flex-col items-start gap-1 px-0 py-px flex relative self-stretch w-full\">\n                <Label\n                  htmlFor=\"password\"\n                  className=\"flex h-5 items-center gap-1 px-2 py-0 relative self-stretch w-full\"\n                >\n                  <span className=\"relative w-fit font-poppins-regular-xs font-[number:var(--poppins-regular-xs-font-weight)] text-[#041d0f] text-[length:var(--poppins-regular-xs-font-size)] tracking-[var(--poppins-regular-xs-letter-spacing)] leading-[var(--poppins-regular-xs-line-height)] whitespace-nowrap [font-style:var(--poppins-regular-xs-font-style)]\">\n                    Create Password\n                  </span>\n                </Label>\n\n                <div className=\"relative w-full\">\n                  <Input\n                    id=\"password\"\n                    data-testid=\"input-password\"\n                    {...form.register(\"password\")}\n                    type={showPassword ? \"text\" : \"password\"}\n                    className=\"h-14 px-3 py-2 bg-white rounded-lg border-[0.5px] border-solid border-[#868b90] pr-10\"\n                  />\n                  <button\n                    type=\"button\"\n                    onClick={() => setShowPassword(!showPassword)}\n                    className=\"absolute right-3 top-1/2 transform -translate-y-1/2\"\n                  >\n                    {showPassword ? (\n                      <EyeOffIcon className=\"w-4 h-4 text-gray-500\" />\n                    ) : (\n                      <EyeIcon className=\"w-4 h-4 text-gray-500\" />\n                    )}\n                  </button>\n                </div>\n              </div>\n\n              <div className=\"inline-flex items-center gap-2 relative flex-[0_0_auto]\">\n                <Checkbox\n                  id=\"terms\"\n                  data-testid=\"checkbox-terms\"\n                  checked={agreedToTerms}\n                  onCheckedChange={(checked) => setAgreedToTerms(checked as boolean)}\n                  className=\"w-[18px] h-[18px] bg-white rounded border-[0.5px] border-solid border-[#868b90]\"\n                />\n\n                <Label\n                  htmlFor=\"terms\"\n                  className=\"relative w-fit mt-[-1.00px] [font-family:'Poppins',Helvetica] font-normal text-transparent text-sm tracking-[0] leading-[14px] cursor-pointer\"\n                >\n                  <span className=\"text-[#041d0f] leading-[17.5px]\">\n                    I agree to the{\" \"}\n                  </span>\n\n                  <span className=\"text-[#493d9e] leading-[17.5px] underline\">\n                    Terms of Use\n                  </span>\n\n                  <span className=\"text-[#041d0f] leading-[17.5px]\"> and </span>\n\n                  <span className=\"text-[#493d9e] leading-[17.5px] underline\">\n                    Privacy Policy\n                  </span>\n                </Label>\n              </div>\n            </div>\n\n            <div className=\"flex flex-col items-start gap-4 relative self-stretch w-full flex-[0_0_auto]\">\n              <Button \n                type=\"submit\" \n                data-testid=\"button-signup\"\n                disabled={signupMutation.isPending}\n                className=\"flex items-center justify-center gap-2 p-3 relative self-stretch w-full flex-[0_0_auto] bg-[#493d9e] rounded-lg h-auto hover:bg-[#493d9e]/90\"\n              >\n                <span className=\"relative w-fit mt-[-1.00px] font-poppins-regular-body font-[number:var(--poppins-regular-body-font-weight)] text-white text-[length:var(--poppins-regular-body-font-size)] tracking-[var(--poppins-regular-body-letter-spacing)] leading-[var(--poppins-regular-body-line-height)] whitespace-nowrap [font-style:var(--poppins-regular-body-font-style)]\">\n                  {signupMutation.isPending ? \"Creating Account...\" : \"Sign Up\"}\n                </span>\n              </Button>\n\n              <div className=\"relative self-stretch w-full flex items-center gap-4\">\n                <div className=\"flex-1 h-[0.5px] bg-[#868b90]\" />\n                <span className=\"font-poppins-regular-xs text-[#868b90]\">OR</span>\n                <div className=\"flex-1 h-[0.5px] bg-[#868b90]\" />\n              </div>\n\n              <Button\n                type=\"button\"\n                onClick={() => window.location.href = \"/api/auth/login\"}\n                data-testid=\"button-google-signup\"\n                className=\"flex items-center justify-center gap-2 p-3 relative self-stretch w-full flex-[0_0_auto] bg-white rounded-lg h-auto border border-[#868b90] hover:bg-gray-50\"\n              >\n                <svg width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                  <path d=\"M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.717v2.258h2.908c1.702-1.567 2.684-3.875 2.684-6.615z\" fill=\"#4285F4\"/>\n                  <path d=\"M9.003 18c2.43 0 4.467-.806 5.956-2.18L12.05 13.56c-.806.54-1.836.86-3.047.86-2.344 0-4.328-1.584-5.036-3.711H.96v2.332C2.44 15.983 5.485 18 9.003 18z\" fill=\"#34A853\"/>\n                  <path d=\"M3.964 10.712c-.18-.54-.282-1.117-.282-1.71 0-.593.102-1.17.282-1.71V4.96H.957C.347 6.175 0 7.55 0 9.002c0 1.452.348 2.827.957 4.042l3.007-2.332z\" fill=\"#FBBC05\"/>\n                  <path d=\"M9.003 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.464.891 11.426 0 9.003 0 5.485 0 2.44 2.017.96 4.958L3.967 7.29c.708-2.127 2.692-3.71 5.036-3.71z\" fill=\"#EA4335\"/>\n                </svg>\n                <span className=\"relative w-fit mt-[-1.00px] font-poppins-regular-body font-[number:var(--poppins-regular-body-font-weight)] text-[#041d0f] text-[length:var(--poppins-regular-body-font-size)] tracking-[var(--poppins-regular-body-letter-spacing)] leading-[var(--poppins-regular-body-line-height)] whitespace-nowrap [font-style:var(--poppins-regular-body-font-style)]\">\n                  Continue with Google\n                </span>\n              </Button>\n\n              <p className=\"relative w-fit [font-family:'Poppins',Helvetica] font-normal text-transparent text-sm tracking-[0] leading-[14px]\">\n                <span className=\"text-[#041d0f] leading-[17.5px]\">\n                  Already have an account?\n                </span>\n\n                <span className=\"text-[#041d0f] leading-[17.5px]\">&nbsp;</span>\n\n                <span \n                  onClick={() => setLocation(\"/login\")} \n                  data-testid=\"link-login\"\n                  className=\"text-[#493d9e] leading-[17.5px] cursor-pointer hover:underline\"\n                >\n                  Sign In\n                </span>\n              </p>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\n","size_bytes":20174},"client/src/pages/CreateTransaction.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { useMutation, useQuery } from \"@tanstack/react-query\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useLocation } from \"wouter\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nconst transactionSchema = z.object({\n  buyerEmail: z.string().email(\"Invalid buyer email\"),\n  itemName: z.string().min(1, \"Item name is required\"),\n  itemDescription: z.string().min(1, \"Item description is required\"),\n  price: z.string().min(1, \"Price is required\"),\n});\n\ntype TransactionForm = z.infer<typeof transactionSchema>;\n\nexport const CreateTransaction = (): JSX.Element => {\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n\n  const { data: userData } = useQuery({\n    queryKey: [\"/api/user\"],\n  });\n\n  const form = useForm<TransactionForm>({\n    resolver: zodResolver(transactionSchema),\n    defaultValues: {\n      buyerEmail: \"\",\n      itemName: \"\",\n      itemDescription: \"\",\n      price: \"\",\n    },\n  });\n\n  const createTransactionMutation = useMutation({\n    mutationFn: async (data: TransactionForm) => {\n      const res = await apiRequest(\"POST\", \"/api/transactions\", data);\n      return await res.json();\n    },\n    onSuccess: (response: { transaction: any }) => {\n      toast({\n        title: \"Transaction created\",\n        description: \"Share the link with your buyer\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/transactions/seller\"] });\n      setLocation(`/transaction/${response.transaction.uniqueLink}`);\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Failed to create transaction\",\n        description: error.message || \"Something went wrong\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = form.handleSubmit((data) => {\n    createTransactionMutation.mutate(data);\n  });\n\n  if (!userData) {\n    return (\n      <div className=\"w-full min-h-screen flex items-center justify-center\">\n        <p>Please login first</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"w-full min-h-screen bg-gray-50 py-12\">\n      <div className=\"max-w-2xl mx-auto px-4\">\n        <div className=\"bg-white rounded-lg shadow-lg p-8\">\n          <header className=\"mb-8\">\n            <h1 className=\"text-3xl font-bold text-[#041d0f] mb-2\">Create Transaction</h1>\n            <p className=\"text-gray-600\">Set up a secure escrow transaction</p>\n          </header>\n\n          <form onSubmit={onSubmit} className=\"space-y-6\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"buyerEmail\">Buyer Email Address</Label>\n              <Input\n                id=\"buyerEmail\"\n                data-testid=\"input-buyerEmail\"\n                {...form.register(\"buyerEmail\")}\n                type=\"email\"\n                className=\"h-12\"\n              />\n              {form.formState.errors.buyerEmail && (\n                <p className=\"text-sm text-red-500\">{form.formState.errors.buyerEmail.message}</p>\n              )}\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"itemName\">Item Name</Label>\n              <Input\n                id=\"itemName\"\n                data-testid=\"input-itemName\"\n                {...form.register(\"itemName\")}\n                type=\"text\"\n                className=\"h-12\"\n              />\n              {form.formState.errors.itemName && (\n                <p className=\"text-sm text-red-500\">{form.formState.errors.itemName.message}</p>\n              )}\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"itemDescription\">Item Description</Label>\n              <Textarea\n                id=\"itemDescription\"\n                data-testid=\"input-itemDescription\"\n                {...form.register(\"itemDescription\")}\n                rows={4}\n              />\n              {form.formState.errors.itemDescription && (\n                <p className=\"text-sm text-red-500\">{form.formState.errors.itemDescription.message}</p>\n              )}\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"price\">Price (₦)</Label>\n              <Input\n                id=\"price\"\n                data-testid=\"input-price\"\n                {...form.register(\"price\")}\n                type=\"number\"\n                step=\"0.01\"\n                className=\"h-12\"\n              />\n              {form.formState.errors.price && (\n                <p className=\"text-sm text-red-500\">{form.formState.errors.price.message}</p>\n              )}\n            </div>\n\n            <div className=\"bg-gray-50 p-4 rounded-lg\">\n              <p className=\"text-sm text-gray-600\">\n                Note: A 5% service commission will be added to the price\n              </p>\n            </div>\n\n            <div className=\"flex gap-4\">\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={() => setLocation(\"/seller-dashboard\")}\n                data-testid=\"button-cancel\"\n                className=\"flex-1\"\n              >\n                Cancel\n              </Button>\n              <Button\n                type=\"submit\"\n                data-testid=\"button-create\"\n                disabled={createTransactionMutation.isPending}\n                className=\"flex-1 bg-[#493d9e] hover:bg-[#493d9e]/90\"\n              >\n                {createTransactionMutation.isPending ? \"Creating...\" : \"Create Transaction\"}\n              </Button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\n","size_bytes":5821},"client/src/pages/Login.tsx":{"content":"import { EyeIcon, EyeOffIcon } from \"lucide-react\";\nimport { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useLocation } from \"wouter\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nconst loginSchema = z.object({\n  email: z.string().email(\"Invalid email address\"),\n  password: z.string().min(1, \"Password is required\"),\n});\n\ntype LoginForm = z.infer<typeof loginSchema>;\n\nexport const Login = (): JSX.Element => {\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  const [showPassword, setShowPassword] = useState(false);\n\n  const form = useForm<LoginForm>({\n    resolver: zodResolver(loginSchema),\n    defaultValues: {\n      email: \"\",\n      password: \"\",\n    },\n  });\n\n  const loginMutation = useMutation({\n    mutationFn: async (data: LoginForm) => {\n      const res = await apiRequest(\"POST\", \"/api/login\", data);\n      return await res.json();\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Login successful\",\n        description: \"Welcome back!\",\n      });\n      setLocation(\"/seller-dashboard\");\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Login failed\",\n        description: error.message || \"Invalid credentials\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = form.handleSubmit((data) => {\n    loginMutation.mutate(data);\n  });\n\n  return (\n    <div className=\"w-full min-h-screen flex bg-white\">\n      <div className=\"flex w-full max-w-[1440px] mx-auto items-start gap-6 p-6\">\n        {/* Illustration Panel - Hidden on Mobile */}\n        <div className=\"relative w-1/2 min-h-[976px] bg-[#493d9e] rounded-lg hidden md:block\">\n          <div className=\"absolute top-6 left-6 w-40 h-12\">\n            <img\n              className=\"absolute top-0 left-0 w-12 h-12\"\n              alt=\"Material symbols\"\n              src=\"/figmaAssets/material-symbols-shield.svg\"\n            />\n\n            <div className=\"absolute top-px left-12 [font-family:'Inter',Helvetica] font-bold text-white text-[38.7px] tracking-[-0.77px] leading-[38.7px] whitespace-nowrap\">\n              xcrow\n            </div>\n          </div>\n\n          <img\n            className=\"absolute top-[289px] left-[calc(50.00%_-_186px)] w-[372px] h-[276px]\"\n            alt=\"Group\"\n            src=\"/figmaAssets/group-2721.png\"\n          />\n\n          <div className=\"absolute top-[552px] left-[439px] w-16 h-16 flex items-center justify-center bg-[#edecf8] rounded-[64px] overflow-hidden rotate-[-55.82deg]\">\n            <div className=\"mt-[57.3px] h-16 ml-[-0.1px] w-[64.82px] bg-[#493d9e] rotate-[0.15deg]\" />\n          </div>\n\n          <div className=\"absolute top-[200px] left-[137px] w-[69px] h-[72px]\">\n            <div className=\"absolute top-0 left-0 w-12 h-12 bg-[#edecf8]\" />\n\n            <div className=\"absolute top-6 left-[21px] w-12 h-12 border-[0.5px] border-solid border-[#42a670]\" />\n          </div>\n\n          <div className=\"flex flex-col w-[500px] items-center gap-4 absolute top-[666px] left-[calc(50.00%_-_250px)]\">\n            <div className=\"relative w-fit mt-[-1.00px] font-poppins-semibold-h5 font-[number:var(--poppins-semibold-h5-font-weight)] text-white text-[length:var(--poppins-semibold-h5-font-size)] tracking-[var(--poppins-semibold-h5-letter-spacing)] leading-[var(--poppins-semibold-h5-line-height)] whitespace-nowrap [font-style:var(--poppins-semibold-h5-font-style)]\">\n              Secure Your Digital Deals\n            </div>\n\n            <div className=\"relative self-stretch font-poppins-regular-body font-[number:var(--poppins-regular-body-font-weight)] text-white text-[length:var(--poppins-regular-body-font-size)] text-center tracking-[var(--poppins-regular-body-letter-spacing)] leading-[var(--poppins-regular-body-line-height)] [font-style:var(--poppins-regular-body-font-style)]\">\n              Join Xcrow to experience seamless and secure peer-to-peer\n              transactions for cryptocurrencies, NFTs, and more—all protected by\n              our trusted escrow system.\n            </div>\n          </div>\n\n          <img\n            className=\"absolute top-4 left-[640px] w-5 h-[116px]\"\n            alt=\"Frame\"\n            src=\"/figmaAssets/frame-1000003642.svg\"\n          />\n\n          <img\n            className=\"absolute top-[880px] left-6 w-[72px] h-[72px]\"\n            alt=\"Frame\"\n            src=\"/figmaAssets/frame-1000003645.svg\"\n          />\n\n          <img\n            className=\"absolute top-[299px] left-[529px] w-[94px] h-[94px]\"\n            alt=\"Frame\"\n            src=\"/figmaAssets/frame.svg\"\n          />\n        </div>\n\n        {/* Form Container - Full Width on Mobile */}\n        <div className=\"flex flex-col w-full md:w-1/2 items-start justify-center gap-8 px-4 md:px-6 py-10 relative bg-white\">\n          {/* Mobile Logo - Only visible on mobile */}\n          <div className=\"flex items-center gap-2 md:hidden mb-4\">\n            <div className=\"w-8 h-8 rounded-lg bg-[#493d9e] flex items-center justify-center\">\n              <span className=\"text-white font-bold text-sm\">X</span>\n            </div>\n            <span className=\"text-2xl font-bold text-[#041d0f]\">xcrow</span>\n          </div>\n\n          <header className=\"inline-flex flex-col items-start gap-2 relative flex-[0_0_auto]\">\n            <h1 className=\"relative w-fit mt-[-1.00px] font-poppins-semibold-h5 font-[number:var(--poppins-semibold-h5-font-weight)] text-[#041d0f] text-[length:var(--poppins-semibold-h5-font-size)] text-center tracking-[var(--poppins-semibold-h5-letter-spacing)] leading-[var(--poppins-semibold-h5-line-height)] whitespace-nowrap [font-style:var(--poppins-semibold-h5-font-style)]\">\n              Sign In\n            </h1>\n\n            <p className=\"relative w-fit font-poppins-regular-body-lg font-[number:var(--poppins-regular-body-lg-font-weight)] text-[#041d0f] text-[length:var(--poppins-regular-body-lg-font-size)] text-center tracking-[var(--poppins-regular-body-lg-letter-spacing)] leading-[var(--poppins-regular-body-lg-line-height)] whitespace-nowrap [font-style:var(--poppins-regular-body-lg-font-style)]\">\n              Welcome back to Xcrow\n            </p>\n          </header>\n\n          <form onSubmit={onSubmit} className=\"flex flex-col items-start gap-6 relative self-stretch w-full flex-[0_0_auto]\">\n            <div className=\"flex flex-col items-start gap-4 relative self-stretch w-full flex-[0_0_auto]\">\n              <div className=\"flex-col items-start gap-1 px-0 py-px flex relative self-stretch w-full\">\n                <Label\n                  htmlFor=\"email\"\n                  className=\"flex h-5 items-center gap-1 px-2 py-0 relative self-stretch w-full\"\n                >\n                  <span className=\"relative w-fit font-poppins-regular-xs font-[number:var(--poppins-regular-xs-font-weight)] text-[#041d0f] text-[length:var(--poppins-regular-xs-font-size)] tracking-[var(--poppins-regular-xs-letter-spacing)] leading-[var(--poppins-regular-xs-line-height)] whitespace-nowrap [font-style:var(--poppins-regular-xs-font-style)]\">\n                    Email Address\n                  </span>\n                </Label>\n\n                <Input\n                  id=\"email\"\n                  data-testid=\"input-email\"\n                  {...form.register(\"email\")}\n                  type=\"email\"\n                  className=\"h-14 px-3 py-2 bg-white rounded-lg border-[0.5px] border-solid border-[#868b90]\"\n                />\n              </div>\n\n              <div className=\"flex-col items-start gap-1 px-0 py-px flex relative self-stretch w-full\">\n                <Label\n                  htmlFor=\"password\"\n                  className=\"flex h-5 items-center gap-1 px-2 py-0 relative self-stretch w-full\"\n                >\n                  <span className=\"relative w-fit font-poppins-regular-xs font-[number:var(--poppins-regular-xs-font-weight)] text-[#041d0f] text-[length:var(--poppins-regular-xs-font-size)] tracking-[var(--poppins-regular-xs-letter-spacing)] leading-[var(--poppins-regular-xs-line-height)] whitespace-nowrap [font-style:var(--poppins-regular-xs-font-style)]\">\n                    Password\n                  </span>\n                </Label>\n\n                <div className=\"relative w-full\">\n                  <Input\n                    id=\"password\"\n                    data-testid=\"input-password\"\n                    {...form.register(\"password\")}\n                    type={showPassword ? \"text\" : \"password\"}\n                    className=\"h-14 px-3 py-2 bg-white rounded-lg border-[0.5px] border-solid border-[#868b90] pr-10\"\n                  />\n                  <button\n                    type=\"button\"\n                    onClick={() => setShowPassword(!showPassword)}\n                    className=\"absolute right-3 top-1/2 transform -translate-y-1/2\"\n                  >\n                    {showPassword ? (\n                      <EyeOffIcon className=\"w-4 h-4 text-gray-500\" />\n                    ) : (\n                      <EyeIcon className=\"w-4 h-4 text-gray-500\" />\n                    )}\n                  </button>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"flex flex-col items-start gap-4 relative self-stretch w-full flex-[0_0_auto]\">\n              <Button\n                type=\"submit\"\n                data-testid=\"button-login\"\n                disabled={loginMutation.isPending}\n                className=\"flex items-center justify-center gap-2 p-3 relative self-stretch w-full flex-[0_0_auto] bg-[#493d9e] rounded-lg h-auto hover:bg-[#493d9e]/90\"\n              >\n                <span className=\"relative w-fit mt-[-1.00px] font-poppins-regular-body font-[number:var(--poppins-regular-body-font-weight)] text-white text-[length:var(--poppins-regular-body-font-size)] tracking-[var(--poppins-regular-body-letter-spacing)] leading-[var(--poppins-regular-body-line-height)] whitespace-nowrap [font-style:var(--poppins-regular-body-font-style)]\">\n                  {loginMutation.isPending ? \"Signing In...\" : \"Sign In\"}\n                </span>\n              </Button>\n\n              <div className=\"relative self-stretch w-full flex items-center gap-4\">\n                <div className=\"flex-1 h-[0.5px] bg-[#868b90]\" />\n                <span className=\"font-poppins-regular-xs text-[#868b90]\">OR</span>\n                <div className=\"flex-1 h-[0.5px] bg-[#868b90]\" />\n              </div>\n\n              <Button\n                type=\"button\"\n                onClick={() => window.location.href = \"/api/auth/login\"}\n                data-testid=\"button-google-login\"\n                className=\"flex items-center justify-center gap-2 p-3 relative self-stretch w-full flex-[0_0_auto] bg-white rounded-lg h-auto border border-[#868b90] hover:bg-gray-50\"\n              >\n                <svg width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                  <path d=\"M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.717v2.258h2.908c1.702-1.567 2.684-3.875 2.684-6.615z\" fill=\"#4285F4\"/>\n                  <path d=\"M9.003 18c2.43 0 4.467-.806 5.956-2.18L12.05 13.56c-.806.54-1.836.86-3.047.86-2.344 0-4.328-1.584-5.036-3.711H.96v2.332C2.44 15.983 5.485 18 9.003 18z\" fill=\"#34A853\"/>\n                  <path d=\"M3.964 10.712c-.18-.54-.282-1.117-.282-1.71 0-.593.102-1.17.282-1.71V4.96H.957C.347 6.175 0 7.55 0 9.002c0 1.452.348 2.827.957 4.042l3.007-2.332z\" fill=\"#FBBC05\"/>\n                  <path d=\"M9.003 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.464.891 11.426 0 9.003 0 5.485 0 2.44 2.017.96 4.958L3.967 7.29c.708-2.127 2.692-3.71 5.036-3.71z\" fill=\"#EA4335\"/>\n                </svg>\n                <span className=\"relative w-fit mt-[-1.00px] font-poppins-regular-body font-[number:var(--poppins-regular-body-font-weight)] text-[#041d0f] text-[length:var(--poppins-regular-body-font-size)] tracking-[var(--poppins-regular-body-letter-spacing)] leading-[var(--poppins-regular-body-line-height)] whitespace-nowrap [font-style:var(--poppins-regular-body-font-style)]\">\n                  Continue with Google\n                </span>\n              </Button>\n\n              <p className=\"relative w-fit [font-family:'Poppins',Helvetica] font-normal text-transparent text-sm tracking-[0] leading-[14px]\">\n                <span className=\"text-[#041d0f] leading-[17.5px]\">\n                  Don't have an account?\n                </span>\n\n                <span className=\"text-[#041d0f] leading-[17.5px]\">&nbsp;</span>\n\n                <span\n                  onClick={() => setLocation(\"/\")}\n                  data-testid=\"link-signup\"\n                  className=\"text-[#493d9e] leading-[17.5px] cursor-pointer hover:underline\"\n                >\n                  Sign Up\n                </span>\n              </p>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\n","size_bytes":13189},"client/src/pages/Office.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Label } from \"@/components/ui/label\";\nimport { Search, Loader2, Eye, CheckCircle, AlertTriangle, Plus, Download } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useLocation } from \"wouter\";\n\nexport default function Office() {\n  const [ongoingSearch, setOngoingSearch] = useState(\"\");\n  const [ongoingStatus, setOngoingStatus] = useState(\"all\");\n  const [disputeStatus, setDisputeStatus] = useState(\"all\");\n  const [disputeDialogOpen, setDisputeDialogOpen] = useState(false);\n  const [disputeForm, setDisputeForm] = useState({\n    transactionId: \"\",\n    reason: \"\",\n    description: \"\",\n    evidence: \"\",\n  });\n  const [historySearch, setHistorySearch] = useState(\"\");\n  const [historyDateFrom, setHistoryDateFrom] = useState(\"\");\n  const [historyDateTo, setHistoryDateTo] = useState(\"\");\n  const [historyMinAmount, setHistoryMinAmount] = useState(\"\");\n  const [historyMaxAmount, setHistoryMaxAmount] = useState(\"\");\n  \n  const { toast } = useToast();\n  const [, setLocation] = useLocation();\n  const queryClient = useQueryClient();\n\n  // Fetch ongoing transactions\n  const { data: ongoingData, isLoading: ongoingLoading } = useQuery({\n    queryKey: [\"/api/office/ongoing-transactions\", { status: ongoingStatus, search: ongoingSearch }],\n  });\n\n  // Fetch disputes\n  const { data: disputesData, isLoading: disputesLoading } = useQuery({\n    queryKey: [\"/api/disputes\", { status: disputeStatus }],\n  });\n\n  // Fetch transaction history\n  const { data: historyData, isLoading: historyLoading } = useQuery({\n    queryKey: [\"/api/office/transaction-history\", { \n      search: historySearch,\n      dateFrom: historyDateFrom,\n      dateTo: historyDateTo,\n      minAmount: historyMinAmount,\n      maxAmount: historyMaxAmount,\n    }],\n  });\n\n  // Mark asset as transferred mutation\n  const markAsTransferredMutation = useMutation({\n    mutationFn: async (transactionId: string) => {\n      const response = await fetch(`/api/transactions/${transactionId}/status`, {\n        method: \"PATCH\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ status: \"asset_transferred\" }),\n      });\n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.message || \"Failed to update transaction\");\n      }\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/office/ongoing-transactions\"] });\n      toast({\n        title: \"Success\",\n        description: \"Transaction marked as asset transferred\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Create dispute mutation\n  const createDisputeMutation = useMutation({\n    mutationFn: async (data: typeof disputeForm) => {\n      const response = await fetch(\"/api/disputes\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(data),\n      });\n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.message || \"Failed to create dispute\");\n      }\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/disputes\"] });\n      setDisputeDialogOpen(false);\n      setDisputeForm({ transactionId: \"\", reason: \"\", description: \"\", evidence: \"\" });\n      toast({\n        title: \"Success\",\n        description: \"Dispute created successfully\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const getStatusBadge = (status: string) => {\n    const variants: Record<string, { variant: \"default\" | \"secondary\" | \"destructive\" | \"outline\"; color: string }> = {\n      pending: { variant: \"secondary\", color: \"bg-yellow-100 text-yellow-800 hover:bg-yellow-100\" },\n      paid: { variant: \"default\", color: \"bg-blue-100 text-blue-800 hover:bg-blue-100\" },\n      asset_transferred: { variant: \"outline\", color: \"bg-green-100 text-green-800 hover:bg-green-100\" },\n    };\n    const config = variants[status] || { variant: \"secondary\" as const, color: \"\" };\n    return (\n      <Badge variant={config.variant} className={config.color}>\n        {status.replace(\"_\", \" \")}\n      </Badge>\n    );\n  };\n\n  const exportToCSV = (transactions: any[]) => {\n    const headers = [\"Item Name\", \"Buyer Email\", \"Amount (₦)\", \"Commission (₦)\", \"Status\", \"Created Date\"];\n    const rows = transactions.map(t => [\n      t.itemName,\n      t.buyerEmail,\n      parseFloat(t.price).toFixed(2),\n      parseFloat(t.commission).toFixed(2),\n      t.status,\n      new Date(t.createdAt).toLocaleDateString(),\n    ]);\n\n    const csvContent = [\n      headers.join(\",\"),\n      ...rows.map(row => row.map(cell => `\"${cell}\"`).join(\",\")),\n    ].join(\"\\n\");\n\n    const blob = new Blob([csvContent], { type: \"text/csv\" });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement(\"a\");\n    link.href = url;\n    link.download = `transaction-history-${new Date().toISOString().split(\"T\")[0]}.csv`;\n    link.click();\n    URL.revokeObjectURL(url);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 p-8\">\n      <div className=\"max-w-7xl mx-auto\">\n        <div className=\"mb-8\">\n          <h1 className=\"text-3xl font-bold text-gray-900\">Office</h1>\n          <p className=\"text-gray-600 mt-2\">Manage your transactions and disputes</p>\n        </div>\n\n        <Tabs defaultValue=\"ongoing\" className=\"w-full\">\n          <TabsList className=\"grid w-full grid-cols-3 mb-8\">\n            <TabsTrigger value=\"ongoing\">Ongoing Transactions</TabsTrigger>\n            <TabsTrigger value=\"disputes\">Disputes</TabsTrigger>\n            <TabsTrigger value=\"history\">Transaction History</TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"ongoing\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Ongoing Transactions</CardTitle>\n                <div className=\"flex gap-4 mt-4\">\n                  <div className=\"relative flex-1\">\n                    <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4\" />\n                    <Input\n                      placeholder=\"Search by buyer email, item name, or transaction ID...\"\n                      value={ongoingSearch}\n                      onChange={(e) => setOngoingSearch(e.target.value)}\n                      className=\"pl-10\"\n                    />\n                  </div>\n                  <Select value={ongoingStatus} onValueChange={setOngoingStatus}>\n                    <SelectTrigger className=\"w-[180px]\">\n                      <SelectValue placeholder=\"Filter by status\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"all\">All Status</SelectItem>\n                      <SelectItem value=\"pending\">Pending</SelectItem>\n                      <SelectItem value=\"paid\">Paid</SelectItem>\n                      <SelectItem value=\"asset_transferred\">Asset Transferred</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n              </CardHeader>\n              <CardContent>\n                {ongoingLoading ? (\n                  <div className=\"flex justify-center py-12\">\n                    <Loader2 className=\"w-8 h-8 animate-spin text-gray-400\" />\n                  </div>\n                ) : !(ongoingData as any)?.transactions || (ongoingData as any).transactions.length === 0 ? (\n                  <div className=\"text-center py-12 text-gray-500\">\n                    No ongoing transactions found\n                  </div>\n                ) : (\n                  <Table>\n                    <TableHeader>\n                      <TableRow>\n                        <TableHead>Item</TableHead>\n                        <TableHead>Buyer Email</TableHead>\n                        <TableHead>Amount</TableHead>\n                        <TableHead>Status</TableHead>\n                        <TableHead>Created</TableHead>\n                        <TableHead className=\"text-right\">Actions</TableHead>\n                      </TableRow>\n                    </TableHeader>\n                    <TableBody>\n                      {(ongoingData as any).transactions.map((transaction: any) => (\n                        <TableRow key={transaction.id}>\n                          <TableCell className=\"font-medium\">{transaction.itemName}</TableCell>\n                          <TableCell>{transaction.buyerEmail}</TableCell>\n                          <TableCell>₦{parseFloat(transaction.price).toFixed(2)}</TableCell>\n                          <TableCell>{getStatusBadge(transaction.status)}</TableCell>\n                          <TableCell>{new Date(transaction.createdAt).toLocaleDateString()}</TableCell>\n                          <TableCell className=\"text-right\">\n                            <div className=\"flex gap-2 justify-end\">\n                              <Button\n                                variant=\"outline\"\n                                size=\"sm\"\n                                onClick={() => setLocation(`/transaction/${transaction.uniqueLink}`)}\n                              >\n                                <Eye className=\"w-4 h-4 mr-1\" />\n                                View\n                              </Button>\n                              {transaction.status === \"paid\" && (\n                                <Button\n                                  variant=\"default\"\n                                  size=\"sm\"\n                                  onClick={() => markAsTransferredMutation.mutate(transaction.id)}\n                                  disabled={markAsTransferredMutation.isPending}\n                                >\n                                  <CheckCircle className=\"w-4 h-4 mr-1\" />\n                                  Mark Transferred\n                                </Button>\n                              )}\n                            </div>\n                          </TableCell>\n                        </TableRow>\n                      ))}\n                    </TableBody>\n                  </Table>\n                )}\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"disputes\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Disputes</CardTitle>\n                <div className=\"flex gap-4 mt-4 items-center justify-between\">\n                  <Select value={disputeStatus} onValueChange={setDisputeStatus}>\n                    <SelectTrigger className=\"w-[180px]\">\n                      <SelectValue placeholder=\"Filter by status\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"all\">All Status</SelectItem>\n                      <SelectItem value=\"pending\">Pending</SelectItem>\n                      <SelectItem value=\"resolved\">Resolved</SelectItem>\n                      <SelectItem value=\"closed\">Closed</SelectItem>\n                    </SelectContent>\n                  </Select>\n                  <Dialog open={disputeDialogOpen} onOpenChange={setDisputeDialogOpen}>\n                    <DialogTrigger asChild>\n                      <Button>\n                        <Plus className=\"w-4 h-4 mr-2\" />\n                        Open Dispute\n                      </Button>\n                    </DialogTrigger>\n                    <DialogContent>\n                      <DialogHeader>\n                        <DialogTitle>Open a Dispute</DialogTitle>\n                        <DialogDescription>\n                          Create a dispute for a transaction. Provide all relevant details.\n                        </DialogDescription>\n                      </DialogHeader>\n                      <div className=\"space-y-4 mt-4\">\n                        <div>\n                          <Label htmlFor=\"transactionId\">Transaction ID</Label>\n                          <Input\n                            id=\"transactionId\"\n                            value={disputeForm.transactionId}\n                            onChange={(e) => setDisputeForm({ ...disputeForm, transactionId: e.target.value })}\n                            placeholder=\"Enter transaction ID\"\n                          />\n                        </div>\n                        <div>\n                          <Label htmlFor=\"reason\">Reason</Label>\n                          <Input\n                            id=\"reason\"\n                            value={disputeForm.reason}\n                            onChange={(e) => setDisputeForm({ ...disputeForm, reason: e.target.value })}\n                            placeholder=\"e.g., Product not delivered\"\n                          />\n                        </div>\n                        <div>\n                          <Label htmlFor=\"description\">Description</Label>\n                          <Textarea\n                            id=\"description\"\n                            value={disputeForm.description}\n                            onChange={(e) => setDisputeForm({ ...disputeForm, description: e.target.value })}\n                            placeholder=\"Provide detailed description of the issue\"\n                            rows={4}\n                          />\n                        </div>\n                        <div>\n                          <Label htmlFor=\"evidence\">Evidence (Optional)</Label>\n                          <Textarea\n                            id=\"evidence\"\n                            value={disputeForm.evidence}\n                            onChange={(e) => setDisputeForm({ ...disputeForm, evidence: e.target.value })}\n                            placeholder=\"Links to screenshots, emails, or other evidence\"\n                            rows={2}\n                          />\n                        </div>\n                        <Button\n                          onClick={() => createDisputeMutation.mutate(disputeForm)}\n                          disabled={createDisputeMutation.isPending || !disputeForm.transactionId || !disputeForm.reason || !disputeForm.description}\n                          className=\"w-full\"\n                        >\n                          {createDisputeMutation.isPending ? (\n                            <>\n                              <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                              Creating...\n                            </>\n                          ) : (\n                            \"Create Dispute\"\n                          )}\n                        </Button>\n                      </div>\n                    </DialogContent>\n                  </Dialog>\n                </div>\n              </CardHeader>\n              <CardContent>\n                {disputesLoading ? (\n                  <div className=\"flex justify-center py-12\">\n                    <Loader2 className=\"w-8 h-8 animate-spin text-gray-400\" />\n                  </div>\n                ) : !(disputesData as any)?.disputes || (disputesData as any).disputes.length === 0 ? (\n                  <div className=\"text-center py-12 text-gray-500\">\n                    No disputes found\n                  </div>\n                ) : (\n                  <Table>\n                    <TableHeader>\n                      <TableRow>\n                        <TableHead>Transaction ID</TableHead>\n                        <TableHead>Reason</TableHead>\n                        <TableHead>Status</TableHead>\n                        <TableHead>Created</TableHead>\n                        <TableHead className=\"text-right\">Actions</TableHead>\n                      </TableRow>\n                    </TableHeader>\n                    <TableBody>\n                      {(disputesData as any).disputes.map((dispute: any) => (\n                        <TableRow key={dispute.id}>\n                          <TableCell className=\"font-medium\">{dispute.transactionId.slice(0, 8)}...</TableCell>\n                          <TableCell>{dispute.reason}</TableCell>\n                          <TableCell>\n                            <Badge variant={dispute.status === \"pending\" ? \"secondary\" : dispute.status === \"resolved\" ? \"default\" : \"outline\"}>\n                              {dispute.status}\n                            </Badge>\n                          </TableCell>\n                          <TableCell>{new Date(dispute.createdAt).toLocaleDateString()}</TableCell>\n                          <TableCell className=\"text-right\">\n                            <Button variant=\"outline\" size=\"sm\">\n                              <Eye className=\"w-4 h-4 mr-1\" />\n                              View Details\n                            </Button>\n                          </TableCell>\n                        </TableRow>\n                      ))}\n                    </TableBody>\n                  </Table>\n                )}\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"history\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Transaction History</CardTitle>\n                <div className=\"space-y-4 mt-4\">\n                  <div className=\"flex gap-4\">\n                    <div className=\"relative flex-1\">\n                      <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4\" />\n                      <Input\n                        placeholder=\"Search by buyer email, item name...\"\n                        value={historySearch}\n                        onChange={(e) => setHistorySearch(e.target.value)}\n                        className=\"pl-10\"\n                      />\n                    </div>\n                    <Button\n                      variant=\"outline\"\n                      onClick={() => exportToCSV((historyData as any)?.transactions || [])}\n                      disabled={!(historyData as any)?.transactions || (historyData as any).transactions.length === 0}\n                    >\n                      <Download className=\"w-4 h-4 mr-2\" />\n                      Export CSV\n                    </Button>\n                  </div>\n                  <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                    <div>\n                      <Label htmlFor=\"dateFrom\">Date From</Label>\n                      <Input\n                        id=\"dateFrom\"\n                        type=\"date\"\n                        value={historyDateFrom}\n                        onChange={(e) => setHistoryDateFrom(e.target.value)}\n                      />\n                    </div>\n                    <div>\n                      <Label htmlFor=\"dateTo\">Date To</Label>\n                      <Input\n                        id=\"dateTo\"\n                        type=\"date\"\n                        value={historyDateTo}\n                        onChange={(e) => setHistoryDateTo(e.target.value)}\n                      />\n                    </div>\n                    <div>\n                      <Label htmlFor=\"minAmount\">Min Amount (₦)</Label>\n                      <Input\n                        id=\"minAmount\"\n                        type=\"number\"\n                        placeholder=\"0\"\n                        value={historyMinAmount}\n                        onChange={(e) => setHistoryMinAmount(e.target.value)}\n                      />\n                    </div>\n                    <div>\n                      <Label htmlFor=\"maxAmount\">Max Amount (₦)</Label>\n                      <Input\n                        id=\"maxAmount\"\n                        type=\"number\"\n                        placeholder=\"1000000\"\n                        value={historyMaxAmount}\n                        onChange={(e) => setHistoryMaxAmount(e.target.value)}\n                      />\n                    </div>\n                  </div>\n                </div>\n              </CardHeader>\n              <CardContent>\n                {historyLoading ? (\n                  <div className=\"flex justify-center py-12\">\n                    <Loader2 className=\"w-8 h-8 animate-spin text-gray-400\" />\n                  </div>\n                ) : !(historyData as any)?.transactions || (historyData as any).transactions.length === 0 ? (\n                  <div className=\"text-center py-12 text-gray-500\">\n                    No completed transactions found\n                  </div>\n                ) : (\n                  <div className=\"space-y-4\">\n                    <div className=\"text-sm text-gray-600\">\n                      Total: {(historyData as any).transactions.length} transactions\n                    </div>\n                    <Table>\n                      <TableHeader>\n                        <TableRow>\n                          <TableHead>Item</TableHead>\n                          <TableHead>Buyer Email</TableHead>\n                          <TableHead>Amount</TableHead>\n                          <TableHead>Commission</TableHead>\n                          <TableHead>Completed</TableHead>\n                          <TableHead className=\"text-right\">Actions</TableHead>\n                        </TableRow>\n                      </TableHeader>\n                      <TableBody>\n                        {(historyData as any).transactions.map((transaction: any) => (\n                          <TableRow key={transaction.id}>\n                            <TableCell className=\"font-medium\">{transaction.itemName}</TableCell>\n                            <TableCell>{transaction.buyerEmail}</TableCell>\n                            <TableCell>₦{parseFloat(transaction.price).toFixed(2)}</TableCell>\n                            <TableCell className=\"text-red-600\">-₦{parseFloat(transaction.commission).toFixed(2)}</TableCell>\n                            <TableCell>{new Date(transaction.createdAt).toLocaleDateString()}</TableCell>\n                            <TableCell className=\"text-right\">\n                              <Button\n                                variant=\"outline\"\n                                size=\"sm\"\n                                onClick={() => setLocation(`/transaction/${transaction.uniqueLink}`)}\n                              >\n                                <Eye className=\"w-4 h-4 mr-1\" />\n                                View\n                              </Button>\n                            </TableCell>\n                          </TableRow>\n                        ))}\n                      </TableBody>\n                    </Table>\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n          </TabsContent>\n        </Tabs>\n      </div>\n    </div>\n  );\n}\n","size_bytes":23578},"client/src/pages/PaymentPage.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useRoute, useLocation } from \"wouter\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { type Transaction } from \"@shared/schema\";\nimport { Loader2, ExternalLink } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useEffect } from \"react\";\n\nexport const PaymentPage = (): JSX.Element => {\n  const [, params] = useRoute(\"/payment/:link\");\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n\n  const { data: userData } = useQuery({\n    queryKey: [\"/api/user\"],\n  });\n\n  const { data: transactionData, isLoading } = useQuery<{ transaction: Transaction } | null>({\n    queryKey: [\"/api/transactions\", params?.link],\n    enabled: !!params?.link,\n  });\n\n  const transaction = transactionData?.transaction;\n\n  const initializePaymentMutation = useMutation({\n    mutationFn: async (uniqueLink: string) => {\n      const res = await apiRequest(\"POST\", \"/api/payments/initialize\", { uniqueLink });\n      return await res.json();\n    },\n    onSuccess: (data: { authorization_url: string; reference: string }) => {\n      window.location.href = data.authorization_url;\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Payment initialization failed\",\n        description: error.message || \"Unable to start payment\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  useEffect(() => {\n    if (transaction && transaction.status !== \"pending\") {\n      toast({\n        title: \"Payment already completed\",\n        description: \"This transaction has already been paid\",\n      });\n      setLocation(`/transaction/${transaction.uniqueLink}`);\n    }\n  }, [transaction]);\n\n  if (isLoading) {\n    return (\n      <div className=\"w-full min-h-screen flex items-center justify-center\">\n        <Loader2 className=\"w-8 h-8 animate-spin\" />\n      </div>\n    );\n  }\n\n  if (!transaction) {\n    return (\n      <div className=\"w-full min-h-screen flex items-center justify-center\">\n        <p>Transaction not found</p>\n      </div>\n    );\n  }\n\n  const totalAmount = parseFloat(transaction.price) + parseFloat(transaction.commission);\n\n  return (\n    <div className=\"w-full min-h-screen bg-gray-50 py-12\">\n      <div className=\"max-w-2xl mx-auto px-4\">\n        <div className=\"mb-8\">\n          <h1 className=\"text-3xl font-bold text-[#041d0f] mb-2\">Complete Payment</h1>\n          <p className=\"text-gray-600\">You're about to pay for this transaction</p>\n        </div>\n\n        <Card>\n          <CardHeader>\n            <CardTitle>Payment Summary</CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-6\">\n            <div>\n              <h3 className=\"font-semibold mb-2\">{transaction.itemName}</h3>\n              <p className=\"text-sm text-gray-600\">{transaction.itemDescription}</p>\n            </div>\n\n            <div className=\"border-t pt-4\">\n              <div className=\"space-y-2\">\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">Item Price</span>\n                  <span className=\"font-medium\" data-testid=\"text-price\">\n                    ₦{parseFloat(transaction.price).toLocaleString()}\n                  </span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">Service Fee (5%)</span>\n                  <span className=\"font-medium\" data-testid=\"text-commission\">\n                    ₦{parseFloat(transaction.commission).toLocaleString()}\n                  </span>\n                </div>\n                <div className=\"flex justify-between pt-2 border-t\">\n                  <span className=\"font-semibold\">Total Amount</span>\n                  <span className=\"text-2xl font-bold\" data-testid=\"text-total\">\n                    ₦{totalAmount.toLocaleString()}\n                  </span>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n              <h3 className=\"font-semibold text-blue-900 mb-2\">Secure Payment</h3>\n              <p className=\"text-sm text-blue-800\">\n                Your payment will be held in escrow until you confirm receipt of the item. The seller\n                will only receive the funds after you confirm.\n              </p>\n            </div>\n\n            <div className=\"flex gap-4\">\n              <Button\n                variant=\"outline\"\n                onClick={() => setLocation(`/transaction/${transaction.uniqueLink}`)}\n                data-testid=\"button-cancel\"\n                className=\"flex-1\"\n              >\n                Cancel\n              </Button>\n              <Button\n                onClick={() => initializePaymentMutation.mutate(transaction.uniqueLink)}\n                disabled={initializePaymentMutation.isPending}\n                data-testid=\"button-proceed\"\n                className=\"flex-1 bg-[#493d9e] hover:bg-[#493d9e]/90\"\n              >\n                {initializePaymentMutation.isPending ? (\n                  <>\n                    <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                    Initializing...\n                  </>\n                ) : (\n                  <>\n                    Proceed to Payment\n                    <ExternalLink className=\"w-4 h-4 ml-2\" />\n                  </>\n                )}\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n};\n","size_bytes":5635},"client/src/pages/SellerDashboard.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { StatisticsCard } from \"@/components/StatisticsCard\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useLocation } from \"wouter\";\nimport { Users, CheckCircle, DollarSign, Loader2, Info, Copy } from \"lucide-react\";\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';\nimport { type Transaction, type Payout } from \"@shared/schema\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Tooltip as UITooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"@/components/ui/tooltip\";\nimport { format } from \"date-fns\";\n\nexport const SellerDashboard = (): JSX.Element => {\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n\n  const { data: userData } = useQuery<{ user: any } | null>({\n    queryKey: [\"/api/user\"],\n  });\n\n  const { data: stats, isLoading: statsLoading } = useQuery<{\n    totalTransactions: number;\n    successRate: number;\n    escrowVolume: number;\n    totalTransactionsChange: number;\n    successRateChange: number;\n    escrowVolumeChange: number;\n  }>({\n    queryKey: [\"/api/dashboard/stats\"],\n    enabled: !!userData?.user,\n  });\n\n  const { data: chartData, isLoading: chartLoading } = useQuery<{ data: Array<{ month: string; amount: number }> }>({\n    queryKey: [\"/api/dashboard/transactions-over-time\"],\n    enabled: !!userData?.user,\n  });\n\n  const { data: activitiesData, isLoading: activitiesLoading } = useQuery<{\n    activities: Array<{ id: string; activity: string; details: string; time: string }>;\n  }>({\n    queryKey: [\"/api/dashboard/recent-activities\"],\n    enabled: !!userData?.user,\n  });\n\n  const { data: purchases, isLoading: purchasesLoading } = useQuery<Transaction[]>({\n    queryKey: [\"/api/transactions/buyer\", userData?.user?.id],\n    enabled: !!userData?.user,\n  });\n\n  type PayoutWithTransaction = Payout & { transaction: Transaction };\n\n  const { data: payoutsData, isLoading: payoutsLoading } = useQuery<{ payouts: PayoutWithTransaction[] }>({\n    queryKey: [\"/api/payouts\"],\n    enabled: !!userData?.user,\n  });\n\n  const releaseFundsMutation = useMutation({\n    mutationFn: async (transactionId: string) => {\n      return await apiRequest(\"PATCH\", `/api/transactions/${transactionId}/status`, {\n        status: \"completed\",\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/transactions/buyer\", userData?.user?.id] });\n      toast({\n        title: \"Funds Released\",\n        description: \"The funds have been successfully released to the seller.\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to release funds. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  if (!userData?.user) {\n    setLocation(\"/login\");\n    return <></>;\n  }\n\n  const userName = userData.user.name || userData.user.email.split('@')[0];\n\n  const getStatusBadge = (status: string) => {\n    const statusConfig = {\n      pending: { label: \"Pending\", className: \"bg-yellow-100 text-yellow-800\" },\n      paid: { label: \"Paid\", className: \"bg-blue-100 text-blue-800\" },\n      asset_transferred: { label: \"Asset Transferred\", className: \"bg-purple-100 text-purple-800\" },\n      completed: { label: \"Completed\", className: \"bg-green-100 text-green-800\" },\n    };\n    const config = statusConfig[status as keyof typeof statusConfig] || statusConfig.pending;\n    return (\n      <Badge className={config.className} data-testid={`badge-status-${status}`}>\n        {config.label}\n      </Badge>\n    );\n  };\n\n  const getPayoutStatusBadge = (status: string) => {\n    const statusConfig = {\n      pending: { label: \"Pending\", className: \"bg-yellow-100 text-yellow-800\" },\n      processing: { label: \"Processing\", className: \"bg-blue-100 text-blue-800\" },\n      success: { label: \"Success\", className: \"bg-green-100 text-green-800\" },\n      failed: { label: \"Failed\", className: \"bg-red-100 text-red-800\" },\n    };\n    const config = statusConfig[status as keyof typeof statusConfig] || statusConfig.pending;\n    return (\n      <Badge className={config.className} data-testid={`badge-payout-status-${status}`}>\n        {config.label}\n      </Badge>\n    );\n  };\n\n  const formatCurrency = (amount: string) => {\n    const num = parseFloat(amount);\n    return `₦${num.toLocaleString('en-NG', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;\n  };\n\n  const copyToClipboard = (text: string) => {\n    navigator.clipboard.writeText(text);\n    toast({\n      title: \"Copied!\",\n      description: \"Reference copied to clipboard\",\n    });\n  };\n\n  return (\n    <div className=\"p-8\">\n      {/* Welcome Banner */}\n      <Card className=\"mb-8 bg-gradient-to-r from-[#f8f9ff] to-white border-none\">\n        <CardContent className=\"p-8\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex-1\">\n              <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">\n                Welcome {userName.charAt(0).toUpperCase() + userName.slice(1)}\n              </h1>\n              <p className=\"text-gray-600 mb-6\">\n                Secure your transactions with trusted escrow services\n              </p>\n              <div className=\"flex gap-3\">\n                <Button\n                  onClick={() => setLocation(\"/create-transaction\")}\n                  className=\"bg-[#493d9e] hover:bg-[#493d9e]/90\"\n                  data-testid=\"button-new-transaction\"\n                >\n                  New Transaction\n                </Button>\n                <Button\n                  variant=\"outline\"\n                  onClick={() => setLocation(\"/marketplace\")}\n                  data-testid=\"button-explore-marketplace\"\n                >\n                  Explore Marketplace\n                </Button>\n              </div>\n            </div>\n            <div className=\"hidden md:block\">\n              <div className=\"w-48 h-48 rounded-full bg-gradient-to-br from-[#493d9e]/20 to-transparent flex items-center justify-center\">\n                <Users className=\"w-24 h-24 text-[#493d9e]\" />\n              </div>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Tabs for My Sales and My Purchases */}\n      <Tabs defaultValue=\"sales\" className=\"w-full\">\n        <TabsList className=\"mb-8\">\n          <TabsTrigger value=\"sales\" data-testid=\"tab-my-sales\">My Sales</TabsTrigger>\n          <TabsTrigger value=\"purchases\" data-testid=\"tab-my-purchases\">My Purchases</TabsTrigger>\n        </TabsList>\n\n        <TabsContent value=\"sales\">\n          {/* Statistics Cards */}\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\n            {statsLoading ? (\n              <div className=\"col-span-3 flex justify-center py-12\">\n                <Loader2 className=\"w-8 h-8 animate-spin\" />\n              </div>\n            ) : (\n              <>\n                <StatisticsCard\n                  icon={Users}\n                  iconBgColor=\"bg-pink-100\"\n                  iconColor=\"text-pink-600\"\n                  title=\"Total Transactions\"\n                  value={stats?.totalTransactions || 0}\n                  change={stats?.totalTransactionsChange || 0}\n                  changeLabel=\"Since Last Month\"\n                />\n                <StatisticsCard\n                  icon={CheckCircle}\n                  iconBgColor=\"bg-green-100\"\n                  iconColor=\"text-green-600\"\n                  title=\"Success Rate\"\n                  value={`${stats?.successRate || 0}%`}\n                  change={stats?.successRateChange || 0}\n                  changeLabel=\"Since Last Month\"\n                />\n                <StatisticsCard\n                  icon={DollarSign}\n                  iconBgColor=\"bg-blue-100\"\n                  iconColor=\"text-blue-600\"\n                  title=\"Escrow Volume\"\n                  value={`₦${stats?.escrowVolume || 0}`}\n                  change={stats?.escrowVolumeChange || 0}\n                  changeLabel=\"Since Last Month\"\n                />\n              </>\n            )}\n          </div>\n\n          {/* Transactions Over Time Chart */}\n          <Card className=\"mb-8\">\n            <CardContent className=\"p-6\">\n              <div className=\"flex items-center justify-between mb-6\">\n                <h2 className=\"text-xl font-bold text-gray-900\">Transactions Over Time</h2>\n                <div className=\"flex gap-2\">\n                  <Button variant=\"ghost\" size=\"sm\" className=\"text-[#493d9e]\">12 months</Button>\n                  <Button variant=\"ghost\" size=\"sm\">30 days</Button>\n                  <Button variant=\"ghost\" size=\"sm\">7 days</Button>\n                  <Button variant=\"ghost\" size=\"sm\">24 hours</Button>\n                </div>\n              </div>\n              {chartLoading ? (\n                <div className=\"flex justify-center py-12\">\n                  <Loader2 className=\"w-8 h-8 animate-spin\" />\n                </div>\n              ) : (\n                <ResponsiveContainer width=\"100%\" height={300}>\n                  <LineChart data={chartData?.data || []}>\n                    <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#f0f0f0\" />\n                    <XAxis \n                      dataKey=\"month\" \n                      tick={{ fontSize: 12 }}\n                      stroke=\"#999\"\n                    />\n                    <YAxis \n                      tick={{ fontSize: 12 }}\n                      stroke=\"#999\"\n                    />\n                    <Tooltip \n                      contentStyle={{\n                        backgroundColor: 'white',\n                        border: '1px solid #e5e7eb',\n                        borderRadius: '8px',\n                      }}\n                    />\n                    <Line \n                      type=\"monotone\" \n                      dataKey=\"amount\" \n                      stroke=\"#493d9e\" \n                      strokeWidth={3}\n                      fill=\"url(#colorAmount)\"\n                      dot={{ fill: '#493d9e', r: 4 }}\n                    />\n                    <defs>\n                      <linearGradient id=\"colorAmount\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                        <stop offset=\"5%\" stopColor=\"#493d9e\" stopOpacity={0.3}/>\n                        <stop offset=\"95%\" stopColor=\"#493d9e\" stopOpacity={0}/>\n                      </linearGradient>\n                    </defs>\n                  </LineChart>\n                </ResponsiveContainer>\n              )}\n            </CardContent>\n          </Card>\n\n          {/* Recent Activities */}\n          <Card className=\"mb-8\">\n            <CardContent className=\"p-6\">\n              <h2 className=\"text-xl font-bold text-gray-900 mb-6\">Recent Activities</h2>\n              {activitiesLoading ? (\n                <div className=\"flex justify-center py-12\">\n                  <Loader2 className=\"w-8 h-8 animate-spin\" />\n                </div>\n              ) : (\n                <div className=\"overflow-x-auto\">\n                  <table className=\"w-full\">\n                    <thead className=\"bg-gray-50\">\n                      <tr>\n                        <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">\n                          Activity\n                        </th>\n                        <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">\n                          Details\n                        </th>\n                        <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">\n                          Time\n                        </th>\n                      </tr>\n                    </thead>\n                    <tbody className=\"divide-y divide-gray-200\">\n                      {activitiesData?.activities && activitiesData.activities.length > 0 ? (\n                        activitiesData.activities.map((activity) => (\n                          <tr key={activity.id} className=\"hover:bg-gray-50\" data-testid={`activity-row-${activity.id}`}>\n                            <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\n                              {activity.activity}\n                            </td>\n                            <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-600\">\n                              {activity.details}\n                            </td>\n                            <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-600\">\n                              {activity.time}\n                            </td>\n                          </tr>\n                        ))\n                      ) : (\n                        <tr>\n                          <td colSpan={3} className=\"px-6 py-8 text-center text-sm text-gray-500\">\n                            No recent activities. Create your first transaction to get started.\n                          </td>\n                        </tr>\n                      )}\n                    </tbody>\n                  </table>\n                </div>\n              )}\n            </CardContent>\n          </Card>\n\n          {/* Payout History */}\n          <Card>\n            <CardContent className=\"p-6\">\n              <div className=\"flex items-center gap-2 mb-6\">\n                <h2 className=\"text-xl font-bold text-gray-900\">Payout History</h2>\n                <TooltipProvider>\n                  <UITooltip>\n                    <TooltipTrigger asChild>\n                      <Info className=\"w-4 h-4 text-gray-400 cursor-help\" data-testid=\"icon-payout-info\" />\n                    </TooltipTrigger>\n                    <TooltipContent className=\"max-w-xs\">\n                      <div className=\"space-y-2 text-xs\">\n                        <p><strong>Pending:</strong> Payout initiated, waiting for processing</p>\n                        <p><strong>Processing:</strong> Transfer in progress with Paystack</p>\n                        <p><strong>Success:</strong> Money successfully transferred to your bank</p>\n                        <p><strong>Failed:</strong> Transfer failed (check failure reason)</p>\n                      </div>\n                    </TooltipContent>\n                  </UITooltip>\n                </TooltipProvider>\n              </div>\n              {payoutsLoading ? (\n                <div className=\"flex justify-center py-12\">\n                  <Loader2 className=\"w-8 h-8 animate-spin\" data-testid=\"loader-payouts\" />\n                </div>\n              ) : (\n                <div className=\"overflow-x-auto\">\n                  <table className=\"w-full\">\n                    <thead className=\"bg-gray-50\">\n                      <tr>\n                        <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">\n                          Transaction\n                        </th>\n                        <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">\n                          Amount\n                        </th>\n                        <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">\n                          Status\n                        </th>\n                        <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">\n                          Date\n                        </th>\n                        <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">\n                          Reference\n                        </th>\n                      </tr>\n                    </thead>\n                    <tbody className=\"divide-y divide-gray-200\">\n                      {payoutsData?.payouts && payoutsData.payouts.length > 0 ? (\n                        payoutsData.payouts.slice(0, 10).map((payout) => (\n                          <tr key={payout.id} className=\"hover:bg-gray-50\" data-testid={`payout-row-${payout.id}`}>\n                            <td className=\"px-6 py-4 text-sm font-medium text-gray-900\" data-testid={`payout-transaction-${payout.id}`}>\n                              {payout.transaction.itemName}\n                            </td>\n                            <td className=\"px-6 py-4 text-sm text-gray-600\" data-testid={`payout-amount-${payout.id}`}>\n                              {formatCurrency(payout.amount)}\n                            </td>\n                            <td className=\"px-6 py-4 text-sm text-gray-600\">\n                              <div className=\"flex flex-col gap-1\">\n                                {getPayoutStatusBadge(payout.status)}\n                                {payout.status === \"failed\" && payout.failureReason && (\n                                  <span className=\"text-xs text-red-600\" data-testid={`payout-failure-${payout.id}`}>\n                                    {payout.failureReason}\n                                  </span>\n                                )}\n                              </div>\n                            </td>\n                            <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-600\" data-testid={`payout-date-${payout.id}`}>\n                              {format(new Date(payout.createdAt), \"MMM dd, yyyy HH:mm\")}\n                            </td>\n                            <td className=\"px-6 py-4 text-sm text-gray-600\">\n                              {payout.paystackReference ? (\n                                <button\n                                  onClick={() => copyToClipboard(payout.paystackReference!)}\n                                  className=\"flex items-center gap-1 text-[#493d9e] hover:underline\"\n                                  data-testid={`button-copy-reference-${payout.id}`}\n                                >\n                                  <span className=\"truncate max-w-[150px]\">{payout.paystackReference}</span>\n                                  <Copy className=\"w-3 h-3 flex-shrink-0\" />\n                                </button>\n                              ) : (\n                                <span className=\"text-gray-400\">-</span>\n                              )}\n                            </td>\n                          </tr>\n                        ))\n                      ) : (\n                        <tr>\n                          <td colSpan={5} className=\"px-6 py-8 text-center text-sm text-gray-500\" data-testid=\"text-no-payouts\">\n                            No payouts yet. Complete transactions to receive payouts.\n                          </td>\n                        </tr>\n                      )}\n                    </tbody>\n                  </table>\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        <TabsContent value=\"purchases\">\n          <Card>\n            <CardContent className=\"p-6\">\n              <h2 className=\"text-xl font-bold text-gray-900 mb-6\">My Purchases</h2>\n              {purchasesLoading ? (\n                <div className=\"flex justify-center py-12\">\n                  <Loader2 className=\"w-8 h-8 animate-spin\" />\n                </div>\n              ) : (\n                <div className=\"overflow-x-auto\">\n                  <table className=\"w-full\">\n                    <thead className=\"bg-gray-50\">\n                      <tr>\n                        <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">\n                          Item Name\n                        </th>\n                        <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">\n                          Seller\n                        </th>\n                        <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">\n                          Price\n                        </th>\n                        <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">\n                          Status\n                        </th>\n                        <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">\n                          Action\n                        </th>\n                      </tr>\n                    </thead>\n                    <tbody className=\"divide-y divide-gray-200\">\n                      {purchases && purchases.length > 0 ? (\n                        purchases.map((purchase) => (\n                          <tr key={purchase.id} className=\"hover:bg-gray-50\" data-testid={`purchase-row-${purchase.id}`}>\n                            <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\" data-testid={`purchase-item-${purchase.id}`}>\n                              {purchase.itemName}\n                            </td>\n                            <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-600\" data-testid={`purchase-seller-${purchase.id}`}>\n                              {purchase.sellerId}\n                            </td>\n                            <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-600\" data-testid={`purchase-price-${purchase.id}`}>\n                              ₦{purchase.price}\n                            </td>\n                            <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-600\">\n                              {getStatusBadge(purchase.status)}\n                            </td>\n                            <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-600\">\n                              {purchase.status === \"asset_transferred\" && (\n                                <Button\n                                  onClick={() => releaseFundsMutation.mutate(purchase.id)}\n                                  disabled={releaseFundsMutation.isPending}\n                                  className=\"bg-[#493d9e] hover:bg-[#493d9e]/90\"\n                                  size=\"sm\"\n                                  data-testid={`button-release-funds-${purchase.id}`}\n                                >\n                                  {releaseFundsMutation.isPending ? (\n                                    <>\n                                      <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                                      Releasing...\n                                    </>\n                                  ) : (\n                                    \"Release Funds\"\n                                  )}\n                                </Button>\n                              )}\n                            </td>\n                          </tr>\n                        ))\n                      ) : (\n                        <tr>\n                          <td colSpan={5} className=\"px-6 py-8 text-center text-sm text-gray-500\">\n                            No purchases yet.\n                          </td>\n                        </tr>\n                      )}\n                    </tbody>\n                  </table>\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n};\n","size_bytes":23521},"client/src/pages/Settings.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useLocation } from \"wouter\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { Loader2, CheckCircle, Building2 } from \"lucide-react\";\nimport { useState, useEffect } from \"react\";\n\ninterface Bank {\n  id: number;\n  code: string;\n  name: string;\n}\n\nexport const Settings = (): JSX.Element => {\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  \n  const [selectedBankCode, setSelectedBankCode] = useState<string>(\"\");\n  const [accountNumber, setAccountNumber] = useState<string>(\"\");\n  const [verifiedAccountName, setVerifiedAccountName] = useState<string>(\"\");\n  const [isVerified, setIsVerified] = useState<boolean>(false);\n\n  const { data: userData, isLoading: userLoading } = useQuery<{ user: any } | null>({\n    queryKey: [\"/api/user\"],\n  });\n\n  const { data: banksData, isLoading: banksLoading } = useQuery<{ banks: Bank[] }>({\n    queryKey: [\"/api/banks\"],\n    enabled: !!userData?.user,\n  });\n\n  const verifyAccountMutation = useMutation({\n    mutationFn: async () => {\n      if (!selectedBankCode || !accountNumber) {\n        throw new Error(\"Please select a bank and enter account number\");\n      }\n      \n      if (accountNumber.length !== 10) {\n        throw new Error(\"Account number must be 10 digits\");\n      }\n\n      const res = await apiRequest(\"POST\", \"/api/bank-account/verify\", {\n        bankCode: selectedBankCode,\n        accountNumber,\n      });\n      return await res.json();\n    },\n    onSuccess: (data: { accountName: string; accountNumber: string }) => {\n      setVerifiedAccountName(data.accountName);\n      setIsVerified(true);\n      toast({\n        title: \"Account Verified\",\n        description: `Account name: ${data.accountName}`,\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Verification Failed\",\n        description: error.message || \"Could not verify account details\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const saveBankAccountMutation = useMutation({\n    mutationFn: async () => {\n      if (!isVerified || !verifiedAccountName) {\n        throw new Error(\"Please verify your account first\");\n      }\n\n      const res = await apiRequest(\"POST\", \"/api/bank-account\", {\n        bankCode: selectedBankCode,\n        accountNumber,\n        accountName: verifiedAccountName,\n      });\n      return await res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/user\"] });\n      toast({\n        title: \"Bank Account Saved\",\n        description: \"Your bank account details have been updated successfully\",\n      });\n      \n      setSelectedBankCode(\"\");\n      setAccountNumber(\"\");\n      setVerifiedAccountName(\"\");\n      setIsVerified(false);\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Save Failed\",\n        description: error.message || \"Could not save bank account details\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleVerify = () => {\n    verifyAccountMutation.mutate();\n  };\n\n  const handleSave = () => {\n    saveBankAccountMutation.mutate();\n  };\n\n  const handleBankChange = (value: string) => {\n    setSelectedBankCode(value);\n    setIsVerified(false);\n    setVerifiedAccountName(\"\");\n  };\n\n  const handleAccountNumberChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = e.target.value.replace(/\\D/g, \"\").slice(0, 10);\n    setAccountNumber(value);\n    setIsVerified(false);\n    setVerifiedAccountName(\"\");\n  };\n\n  useEffect(() => {\n    if (!userLoading && !userData?.user) {\n      setLocation(\"/login\");\n    }\n  }, [userData, userLoading, setLocation]);\n\n  if (userLoading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <Loader2 className=\"w-8 h-8 animate-spin text-[#493d9e]\" />\n      </div>\n    );\n  }\n\n  const user = userData.user;\n  const hasBankAccount = user.bankCode && user.accountNumber && user.accountName;\n  const selectedBank = banksData?.banks.find(bank => bank.code === selectedBankCode);\n\n  return (\n    <div className=\"p-8\">\n      <div className=\"max-w-4xl mx-auto\">\n        <header className=\"mb-8\">\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">Settings</h1>\n          <p className=\"text-gray-600\">Manage your account and bank details for automatic payouts</p>\n        </header>\n\n        <div className=\"space-y-6\">\n          {/* Current Bank Account Card */}\n          {hasBankAccount && (\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Building2 className=\"w-5 h-5 text-[#493d9e]\" />\n                  Current Bank Account\n                </CardTitle>\n                <CardDescription>Your registered bank account for receiving payouts</CardDescription>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                  <div>\n                    <Label className=\"text-sm text-gray-500\">Bank Name</Label>\n                    <p className=\"font-medium text-gray-900\" data-testid=\"text-current-bank\">\n                      {banksData?.banks.find(bank => bank.code === user.bankCode)?.name || user.bankCode}\n                    </p>\n                  </div>\n                  <div>\n                    <Label className=\"text-sm text-gray-500\">Account Number</Label>\n                    <p className=\"font-medium text-gray-900\" data-testid=\"text-current-account\">\n                      ****{user.accountNumber.slice(-4)}\n                    </p>\n                  </div>\n                  <div>\n                    <Label className=\"text-sm text-gray-500\">Account Name</Label>\n                    <p className=\"font-medium text-gray-900\" data-testid=\"text-current-name\">\n                      {user.accountName}\n                    </p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          )}\n\n          {/* Bank Account Setup Card */}\n          <Card>\n            <CardHeader>\n              <CardTitle>{hasBankAccount ? \"Update Bank Account\" : \"Bank Account Setup\"}</CardTitle>\n              <CardDescription>\n                {hasBankAccount \n                  ? \"Update your bank account details for automatic payouts\" \n                  : \"Add your bank account to receive automatic payouts\"}\n              </CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-6\">\n              {/* Bank Selection */}\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"bank\">Select Bank</Label>\n                {banksLoading ? (\n                  <div className=\"flex items-center gap-2 h-10 px-3 border rounded-md\">\n                    <Loader2 className=\"w-4 h-4 animate-spin\" />\n                    <span className=\"text-sm text-gray-500\">Loading banks...</span>\n                  </div>\n                ) : (\n                  <Select \n                    value={selectedBankCode} \n                    onValueChange={handleBankChange}\n                    disabled={verifyAccountMutation.isPending || saveBankAccountMutation.isPending}\n                  >\n                    <SelectTrigger id=\"bank\" data-testid=\"select-bank\" className=\"h-12\">\n                      <SelectValue placeholder=\"Choose your bank\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      {banksData?.banks.map((bank) => (\n                        <SelectItem key={bank.code} value={bank.code}>\n                          {bank.name}\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                )}\n              </div>\n\n              {/* Account Number */}\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"accountNumber\">Account Number</Label>\n                <Input\n                  id=\"accountNumber\"\n                  data-testid=\"input-account-number\"\n                  type=\"text\"\n                  placeholder=\"Enter 10-digit account number\"\n                  value={accountNumber}\n                  onChange={handleAccountNumberChange}\n                  disabled={verifyAccountMutation.isPending || saveBankAccountMutation.isPending}\n                  className=\"h-12\"\n                  maxLength={10}\n                />\n                {accountNumber.length > 0 && accountNumber.length !== 10 && (\n                  <p className=\"text-sm text-red-500\">Account number must be 10 digits</p>\n                )}\n              </div>\n\n              {/* Verify Button */}\n              <Button\n                onClick={handleVerify}\n                disabled={\n                  !selectedBankCode || \n                  accountNumber.length !== 10 || \n                  verifyAccountMutation.isPending ||\n                  saveBankAccountMutation.isPending ||\n                  isVerified\n                }\n                variant={isVerified ? \"outline\" : \"default\"}\n                className={isVerified ? \"border-green-500 text-green-700\" : \"bg-[#493d9e] hover:bg-[#493d9e]/90\"}\n                data-testid=\"button-verify-account\"\n              >\n                {verifyAccountMutation.isPending ? (\n                  <>\n                    <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                    Verifying...\n                  </>\n                ) : isVerified ? (\n                  <>\n                    <CheckCircle className=\"w-4 h-4 mr-2\" />\n                    Verified\n                  </>\n                ) : (\n                  \"Verify Account\"\n                )}\n              </Button>\n\n              {/* Verified Account Name */}\n              {isVerified && verifiedAccountName && (\n                <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\" data-testid=\"verified-account-info\">\n                  <div className=\"flex items-start gap-3\">\n                    <CheckCircle className=\"w-5 h-5 text-green-600 mt-0.5\" />\n                    <div className=\"flex-1\">\n                      <p className=\"font-medium text-green-900\">Account Verified</p>\n                      <p className=\"text-sm text-green-700 mt-1\">\n                        Account Name: <span className=\"font-semibold\" data-testid=\"text-verified-name\">{verifiedAccountName}</span>\n                      </p>\n                      <p className=\"text-sm text-green-700\">\n                        Bank: <span className=\"font-semibold\">{selectedBank?.name}</span>\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              {/* Save Button */}\n              <div className=\"flex gap-4 pt-4 border-t\">\n                <Button\n                  onClick={handleSave}\n                  disabled={\n                    !isVerified || \n                    !verifiedAccountName ||\n                    saveBankAccountMutation.isPending\n                  }\n                  className=\"bg-[#493d9e] hover:bg-[#493d9e]/90\"\n                  data-testid=\"button-save-bank-account\"\n                >\n                  {saveBankAccountMutation.isPending ? (\n                    <>\n                      <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                      Saving...\n                    </>\n                  ) : (\n                    \"Save Bank Account\"\n                  )}\n                </Button>\n                <Button\n                  onClick={() => {\n                    setSelectedBankCode(\"\");\n                    setAccountNumber(\"\");\n                    setVerifiedAccountName(\"\");\n                    setIsVerified(false);\n                  }}\n                  variant=\"outline\"\n                  disabled={verifyAccountMutation.isPending || saveBankAccountMutation.isPending}\n                  data-testid=\"button-reset\"\n                >\n                  Reset\n                </Button>\n              </div>\n\n              {/* Info Box */}\n              <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n                <p className=\"text-sm text-blue-900 font-medium mb-1\">How it works</p>\n                <ul className=\"text-sm text-blue-700 space-y-1\">\n                  <li>• Select your bank and enter your account number</li>\n                  <li>• Click \"Verify Account\" to confirm your details with Paystack</li>\n                  <li>• Review the verified account name</li>\n                  <li>• Click \"Save Bank Account\" to complete the setup</li>\n                  <li>• Payouts will be automatically sent to this account when transactions complete</li>\n                </ul>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    </div>\n  );\n};\n","size_bytes":13241},"client/src/pages/TransactionDetails.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useLocation, useRoute } from \"wouter\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { type Transaction } from \"@shared/schema\";\nimport { Loader2, Copy, CheckCircle2 } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useState } from \"react\";\nimport { TransactionAcceptDialog } from \"@/components/TransactionAcceptDialog\";\n\nexport const TransactionDetails = (): JSX.Element => {\n  const [, params] = useRoute(\"/transaction/:link\");\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  const [copied, setCopied] = useState(false);\n  const [acceptDialogOpen, setAcceptDialogOpen] = useState(false);\n\n  const { data: userData } = useQuery<{ user: any } | null>({\n    queryKey: [\"/api/user\"],\n  });\n\n  const { data: transactionData, isLoading } = useQuery<{ transaction: Transaction } | null>({\n    queryKey: [\"/api/transactions\", params?.link],\n    enabled: !!params?.link,\n  });\n\n  const transaction = transactionData?.transaction;\n  const isBuyer = transaction && (userData?.user?.id === transaction.buyerId || userData?.user?.email === transaction.buyerEmail);\n  const isSeller = transaction && userData?.user?.id === transaction.sellerId;\n\n  const acceptTransactionMutation = useMutation({\n    mutationFn: async () => {\n      if (!transaction) throw new Error(\"No transaction\");\n      const response = await apiRequest(\"POST\", `/api/transactions/${transaction.id}/accept`);\n      return response.json();\n    },\n    onSuccess: () => {\n      setAcceptDialogOpen(false);\n      setLocation(`/payment/${transaction?.uniqueLink}`);\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleProceedToPayment = () => {\n    if (!userData?.user) {\n      setLocation(`/login?redirect=/transaction/${params?.link}`);\n      return;\n    }\n    setAcceptDialogOpen(true);\n  };\n\n  const handleAcceptTransaction = () => {\n    acceptTransactionMutation.mutate();\n  };\n\n  const handleDeclineTransaction = () => {\n    setAcceptDialogOpen(false);\n    toast({\n      title: \"Transaction declined\",\n      description: \"You have declined this transaction\",\n    });\n  };\n\n  const copyLink = () => {\n    const link = window.location.href;\n    navigator.clipboard.writeText(link);\n    setCopied(true);\n    toast({\n      title: \"Link copied\",\n      description: \"Transaction link copied to clipboard\",\n    });\n    setTimeout(() => setCopied(false), 2000);\n  };\n\n  const getStatusBadge = (status: string) => {\n    const variants: Record<string, \"default\" | \"secondary\" | \"destructive\" | \"outline\"> = {\n      pending: \"secondary\",\n      paid: \"default\",\n      asset_transferred: \"outline\",\n      completed: \"default\",\n    };\n    return (\n      <Badge variant={variants[status] || \"default\"} data-testid={`status-${status}`}>\n        {status.replace(\"_\", \" \").toUpperCase()}\n      </Badge>\n    );\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"w-full min-h-screen flex items-center justify-center\">\n        <Loader2 className=\"w-8 h-8 animate-spin\" />\n      </div>\n    );\n  }\n\n  if (!transaction) {\n    return (\n      <div className=\"w-full min-h-screen flex items-center justify-center\">\n        <p>Transaction not found</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"w-full min-h-screen bg-gray-50 py-12\">\n      <div className=\"max-w-4xl mx-auto px-4\">\n        <div className=\"mb-8\">\n          <h1 className=\"text-3xl font-bold text-[#041d0f] mb-2\">Transaction Details</h1>\n          <p className=\"text-gray-600\">Secure escrow transaction</p>\n        </div>\n\n        <Card className=\"mb-6\">\n          <CardHeader>\n            <div className=\"flex justify-between items-start\">\n              <div>\n                <CardTitle data-testid=\"text-itemName\">{transaction.itemName}</CardTitle>\n                <p className=\"text-sm text-gray-600 mt-1\" data-testid=\"text-itemDescription\">\n                  {transaction.itemDescription}\n                </p>\n              </div>\n              {getStatusBadge(transaction.status)}\n            </div>\n          </CardHeader>\n          <CardContent>\n            <div className=\"grid grid-cols-2 gap-6 mb-6\">\n              <div>\n                <p className=\"text-sm text-gray-600\">Buyer Email</p>\n                <p className=\"font-medium\" data-testid=\"text-buyerEmail\">{transaction.buyerEmail}</p>\n              </div>\n              <div>\n                <p className=\"text-sm text-gray-600\">Transaction Link</p>\n                <div className=\"flex items-center gap-2\">\n                  <p className=\"font-medium text-sm truncate flex-1\">\n                    {window.location.href}\n                  </p>\n                  <Button\n                    size=\"sm\"\n                    variant=\"outline\"\n                    onClick={copyLink}\n                    data-testid=\"button-copy-link\"\n                  >\n                    {copied ? <CheckCircle2 className=\"w-4 h-4\" /> : <Copy className=\"w-4 h-4\" />}\n                  </Button>\n                </div>\n              </div>\n              <div>\n                <p className=\"text-sm text-gray-600\">Item Price</p>\n                <p className=\"font-medium\" data-testid=\"text-price\">₦{parseFloat(transaction.price).toLocaleString()}</p>\n              </div>\n              <div>\n                <p className=\"text-sm text-gray-600\">Service Fee (5%)</p>\n                <p className=\"font-medium\" data-testid=\"text-commission\">₦{parseFloat(transaction.commission).toLocaleString()}</p>\n              </div>\n              <div className=\"col-span-2\">\n                <p className=\"text-sm text-gray-600\">Total Amount</p>\n                <p className=\"text-2xl font-bold\" data-testid=\"text-total\">\n                  ₦{(parseFloat(transaction.price) + parseFloat(transaction.commission)).toLocaleString()}\n                </p>\n              </div>\n            </div>\n\n            <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6\">\n              <h3 className=\"font-semibold text-blue-900 mb-2\">Transaction Status</h3>\n              <p className=\"text-sm text-blue-800\">\n                {transaction.status === \"pending\" && \"Waiting for buyer payment\"}\n                {transaction.status === \"paid\" && \"Payment received. Seller should transfer the asset\"}\n                {transaction.status === \"asset_transferred\" && \"Asset transferred. Buyer should confirm receipt\"}\n                {transaction.status === \"completed\" && \"Transaction completed successfully\"}\n              </p>\n            </div>\n\n            <div className=\"flex gap-4\">\n              {transaction.status === \"pending\" && !transaction.buyerId && (\n                <Button\n                  onClick={handleProceedToPayment}\n                  data-testid=\"button-proceed-payment\"\n                  className=\"bg-[#493d9e] hover:bg-[#493d9e]/90\"\n                >\n                  Proceed to Payment\n                </Button>\n              )}\n\n              {isBuyer && transaction.status === \"asset_transferred\" && (\n                <Button\n                  onClick={() => setLocation(`/buyer-confirm/${transaction.uniqueLink}`)}\n                  data-testid=\"button-confirm-receipt\"\n                  className=\"bg-green-600 hover:bg-green-700\"\n                >\n                  Confirm Receipt\n                </Button>\n              )}\n\n              {isSeller && (\n                <Button\n                  variant=\"outline\"\n                  onClick={() => setLocation(\"/seller-dashboard\")}\n                  data-testid=\"button-dashboard\"\n                >\n                  Back to Dashboard\n                </Button>\n              )}\n            </div>\n          </CardContent>\n        </Card>\n\n        <TransactionAcceptDialog\n          open={acceptDialogOpen}\n          onOpenChange={setAcceptDialogOpen}\n          transaction={transaction}\n          sellerName={`${userData?.user?.firstName || ''} ${userData?.user?.lastName || ''}`.trim()}\n          onAccept={handleAcceptTransaction}\n          onDecline={handleDeclineTransaction}\n        />\n      </div>\n    </div>\n  );\n};\n","size_bytes":8407},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":711},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":1977},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4420},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1584},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1419},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1128},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"client/src/components/ui/button.tsx":{"content":"import { Slot } from \"@radix-ui/react-slot\";\nimport { type VariantProps, cva } from \"class-variance-authority\";\nimport * as React from \"react\";\nimport { cn } from \"../../lib/utils\";\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground shadow hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2\",\n        sm: \"h-8 rounded-md px-3 text-xs\",\n        lg: \"h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n);\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean;\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\";\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    );\n  },\n);\nButton.displayName = \"Button\";\n\nexport { Button, buttonVariants };\n","size_bytes":1918},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","size_bytes":2695},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n","size_bytes":1858},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10481},"client/src/components/ui/checkbox.tsx":{"content":"import * as CheckboxPrimitive from \"@radix-ui/react-checkbox\";\nimport { CheckIcon } from \"lucide-react\";\nimport * as React from \"react\";\nimport { cn } from \"../../lib/utils\";\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className,\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <CheckIcon className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n));\nCheckbox.displayName = CheckboxPrimitive.Root.displayName;\n\nexport { Checkbox };\n","size_bytes":1031},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":329},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4885},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7428},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3848},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3021},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7609},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4120},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1251},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2154},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\";\nimport { cn } from \"../../lib/utils\";\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className,\n        )}\n        ref={ref}\n        {...props}\n      />\n    );\n  },\n);\nInput.displayName = \"Input\";\n\nexport { Input };\n","size_bytes":779},"client/src/components/ui/label.tsx":{"content":"import * as LabelPrimitive from \"@radix-ui/react-label\";\nimport { type VariantProps, cva } from \"class-variance-authority\";\nimport * as React from \"react\";\nimport { cn } from \"../../lib/utils\";\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\",\n);\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n));\nLabel.displayName = LabelPrimitive.Root.displayName;\n\nexport { Label };\n","size_bytes":722},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":8605},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5128},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","size_bytes":2751},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","size_bytes":1280},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","size_bytes":791},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1723},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"client/src/components/ui/select.tsx":{"content":"\"use client\";\n\nimport * as SelectPrimitive from \"@radix-ui/react-select\";\nimport { CheckIcon, ChevronDownIcon, ChevronUpIcon } from \"lucide-react\";\nimport * as React from \"react\";\nimport { cn } from \"../../lib/utils\";\n\nconst Select = SelectPrimitive.Root;\n\nconst SelectGroup = SelectPrimitive.Group;\n\nconst SelectValue = SelectPrimitive.Value;\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className,\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDownIcon className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n));\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName;\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className,\n    )}\n    {...props}\n  >\n    <ChevronUpIcon className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n));\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName;\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className,\n    )}\n    {...props}\n  >\n    <ChevronDownIcon className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n));\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName;\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className,\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\",\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n));\nSelectContent.displayName = SelectPrimitive.Content.displayName;\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"px-2 py-1.5 text-sm font-semibold\", className)}\n    {...props}\n  />\n));\nSelectLabel.displayName = SelectPrimitive.Label.displayName;\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className,\n    )}\n    {...props}\n  >\n    <span className=\"absolute right-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <CheckIcon className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n));\nSelectItem.displayName = SelectPrimitive.Item.displayName;\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n));\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName;\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n};\n","size_bytes":5692},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","size_bytes":756},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4281},"client/src/components/ui/sidebar.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { VariantProps, cva } from \"class-variance-authority\"\nimport { PanelLeft } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nconst SidebarProvider = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    defaultOpen?: boolean\n    open?: boolean\n    onOpenChange?: (open: boolean) => void\n  }\n>(\n  (\n    {\n      defaultOpen = true,\n      open: openProp,\n      onOpenChange: setOpenProp,\n      className,\n      style,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const isMobile = useIsMobile()\n    const [openMobile, setOpenMobile] = React.useState(false)\n\n    // This is the internal state of the sidebar.\n    // We use openProp and setOpenProp for control from outside the component.\n    const [_open, _setOpen] = React.useState(defaultOpen)\n    const open = openProp ?? _open\n    const setOpen = React.useCallback(\n      (value: boolean | ((value: boolean) => boolean)) => {\n        const openState = typeof value === \"function\" ? value(open) : value\n        if (setOpenProp) {\n          setOpenProp(openState)\n        } else {\n          _setOpen(openState)\n        }\n\n        // This sets the cookie to keep the sidebar state.\n        document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n      },\n      [setOpenProp, open]\n    )\n\n    // Helper to toggle the sidebar.\n    const toggleSidebar = React.useCallback(() => {\n      return isMobile\n        ? setOpenMobile((open) => !open)\n        : setOpen((open) => !open)\n    }, [isMobile, setOpen, setOpenMobile])\n\n    // Adds a keyboard shortcut to toggle the sidebar.\n    React.useEffect(() => {\n      const handleKeyDown = (event: KeyboardEvent) => {\n        if (\n          event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n          (event.metaKey || event.ctrlKey)\n        ) {\n          event.preventDefault()\n          toggleSidebar()\n        }\n      }\n\n      window.addEventListener(\"keydown\", handleKeyDown)\n      return () => window.removeEventListener(\"keydown\", handleKeyDown)\n    }, [toggleSidebar])\n\n    // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n    // This makes it easier to style the sidebar with Tailwind classes.\n    const state = open ? \"expanded\" : \"collapsed\"\n\n    const contextValue = React.useMemo<SidebarContextProps>(\n      () => ({\n        state,\n        open,\n        setOpen,\n        isMobile,\n        openMobile,\n        setOpenMobile,\n        toggleSidebar,\n      }),\n      [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n    )\n\n    return (\n      <SidebarContext.Provider value={contextValue}>\n        <TooltipProvider delayDuration={0}>\n          <div\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH,\n                \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n                ...style,\n              } as React.CSSProperties\n            }\n            className={cn(\n              \"group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar\",\n              className\n            )}\n            ref={ref}\n            {...props}\n          >\n            {children}\n          </div>\n        </TooltipProvider>\n      </SidebarContext.Provider>\n    )\n  }\n)\nSidebarProvider.displayName = \"SidebarProvider\"\n\nconst Sidebar = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    side?: \"left\" | \"right\"\n    variant?: \"sidebar\" | \"floating\" | \"inset\"\n    collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n  }\n>(\n  (\n    {\n      side = \"left\",\n      variant = \"sidebar\",\n      collapsible = \"offcanvas\",\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n    if (collapsible === \"none\") {\n      return (\n        <div\n          className={cn(\n            \"flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground\",\n            className\n          )}\n          ref={ref}\n          {...props}\n        >\n          {children}\n        </div>\n      )\n    }\n\n    if (isMobile) {\n      return (\n        <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n          <SheetContent\n            data-sidebar=\"sidebar\"\n            data-mobile=\"true\"\n            className=\"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden\"\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n              } as React.CSSProperties\n            }\n            side={side}\n          >\n            <SheetHeader className=\"sr-only\">\n              <SheetTitle>Sidebar</SheetTitle>\n              <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n            </SheetHeader>\n            <div className=\"flex h-full w-full flex-col\">{children}</div>\n          </SheetContent>\n        </Sheet>\n      )\n    }\n\n    return (\n      <div\n        ref={ref}\n        className=\"group peer hidden text-sidebar-foreground md:block\"\n        data-state={state}\n        data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n        data-variant={variant}\n        data-side={side}\n      >\n        {/* This is what handles the sidebar gap on desktop */}\n        <div\n          className={cn(\n            \"relative w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear\",\n            \"group-data-[collapsible=offcanvas]:w-0\",\n            \"group-data-[side=right]:rotate-180\",\n            variant === \"floating\" || variant === \"inset\"\n              ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon]\"\n          )}\n        />\n        <div\n          className={cn(\n            \"fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex\",\n            side === \"left\"\n              ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n              : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n            // Adjust the padding for floating and inset variants.\n            variant === \"floating\" || variant === \"inset\"\n              ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n            className\n          )}\n          {...props}\n        >\n          <div\n            data-sidebar=\"sidebar\"\n            className=\"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow\"\n          >\n            {children}\n          </div>\n        </div>\n      </div>\n    )\n  }\n)\nSidebar.displayName = \"Sidebar\"\n\nconst SidebarTrigger = React.forwardRef<\n  React.ElementRef<typeof Button>,\n  React.ComponentProps<typeof Button>\n>(({ className, onClick, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      ref={ref}\n      data-sidebar=\"trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeft />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n})\nSidebarTrigger.displayName = \"SidebarTrigger\"\n\nconst SidebarRail = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\">\n>(({ className, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <button\n      ref={ref}\n      data-sidebar=\"rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex\",\n        \"[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarRail.displayName = \"SidebarRail\"\n\nconst SidebarInset = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"main\">\n>(({ className, ...props }, ref) => {\n  return (\n    <main\n      ref={ref}\n      className={cn(\n        \"relative flex w-full flex-1 flex-col bg-background\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInset.displayName = \"SidebarInset\"\n\nconst SidebarInput = React.forwardRef<\n  React.ElementRef<typeof Input>,\n  React.ComponentProps<typeof Input>\n>(({ className, ...props }, ref) => {\n  return (\n    <Input\n      ref={ref}\n      data-sidebar=\"input\"\n      className={cn(\n        \"h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInput.displayName = \"SidebarInput\"\n\nconst SidebarHeader = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarHeader.displayName = \"SidebarHeader\"\n\nconst SidebarFooter = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarFooter.displayName = \"SidebarFooter\"\n\nconst SidebarSeparator = React.forwardRef<\n  React.ElementRef<typeof Separator>,\n  React.ComponentProps<typeof Separator>\n>(({ className, ...props }, ref) => {\n  return (\n    <Separator\n      ref={ref}\n      data-sidebar=\"separator\"\n      className={cn(\"mx-2 w-auto bg-sidebar-border\", className)}\n      {...props}\n    />\n  )\n})\nSidebarSeparator.displayName = \"SidebarSeparator\"\n\nconst SidebarContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarContent.displayName = \"SidebarContent\"\n\nconst SidebarGroup = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarGroup.displayName = \"SidebarGroup\"\n\nconst SidebarGroupLabel = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupLabel.displayName = \"SidebarGroupLabel\"\n\nconst SidebarGroupAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupAction.displayName = \"SidebarGroupAction\"\n\nconst SidebarGroupContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"group-content\"\n    className={cn(\"w-full text-sm\", className)}\n    {...props}\n  />\n))\nSidebarGroupContent.displayName = \"SidebarGroupContent\"\n\nconst SidebarMenu = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu\"\n    className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n    {...props}\n  />\n))\nSidebarMenu.displayName = \"SidebarMenu\"\n\nconst SidebarMenuItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    data-sidebar=\"menu-item\"\n    className={cn(\"group/menu-item relative\", className)}\n    {...props}\n  />\n))\nSidebarMenuItem.displayName = \"SidebarMenuItem\"\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:!p-0\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst SidebarMenuButton = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    isActive?: boolean\n    tooltip?: string | React.ComponentProps<typeof TooltipContent>\n  } & VariantProps<typeof sidebarMenuButtonVariants>\n>(\n  (\n    {\n      asChild = false,\n      isActive = false,\n      variant = \"default\",\n      size = \"default\",\n      tooltip,\n      className,\n      ...props\n    },\n    ref\n  ) => {\n    const Comp = asChild ? Slot : \"button\"\n    const { isMobile, state } = useSidebar()\n\n    const button = (\n      <Comp\n        ref={ref}\n        data-sidebar=\"menu-button\"\n        data-size={size}\n        data-active={isActive}\n        className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n        {...props}\n      />\n    )\n\n    if (!tooltip) {\n      return button\n    }\n\n    if (typeof tooltip === \"string\") {\n      tooltip = {\n        children: tooltip,\n      }\n    }\n\n    return (\n      <Tooltip>\n        <TooltipTrigger asChild>{button}</TooltipTrigger>\n        <TooltipContent\n          side=\"right\"\n          align=\"center\"\n          hidden={state !== \"collapsed\" || isMobile}\n          {...tooltip}\n        />\n      </Tooltip>\n    )\n  }\n)\nSidebarMenuButton.displayName = \"SidebarMenuButton\"\n\nconst SidebarMenuAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    showOnHover?: boolean\n  }\n>(({ className, asChild = false, showOnHover = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuAction.displayName = \"SidebarMenuAction\"\n\nconst SidebarMenuBadge = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"menu-badge\"\n    className={cn(\n      \"pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground\",\n      \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n      \"peer-data-[size=sm]/menu-button:top-1\",\n      \"peer-data-[size=default]/menu-button:top-1.5\",\n      \"peer-data-[size=lg]/menu-button:top-2.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuBadge.displayName = \"SidebarMenuBadge\"\n\nconst SidebarMenuSkeleton = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    showIcon?: boolean\n  }\n>(({ className, showIcon = false, ...props }, ref) => {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[--skeleton-width] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n})\nSidebarMenuSkeleton.displayName = \"SidebarMenuSkeleton\"\n\nconst SidebarMenuSub = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu-sub\"\n    className={cn(\n      \"mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuSub.displayName = \"SidebarMenuSub\"\n\nconst SidebarMenuSubItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ ...props }, ref) => <li ref={ref} {...props} />)\nSidebarMenuSubItem.displayName = \"SidebarMenuSubItem\"\n\nconst SidebarMenuSubButton = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentProps<\"a\"> & {\n    asChild?: boolean\n    size?: \"sm\" | \"md\"\n    isActive?: boolean\n  }\n>(({ asChild = false, size = \"md\", isActive, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuSubButton.displayName = \"SidebarMenuSubButton\"\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":23567},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":261},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1077},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1139},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1883},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":689},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1753},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1527},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1209},"PAYOUT_SYSTEM.md":{"content":"# Automatic Payout System\n\n## Overview\nThe Xcrow platform now features a complete automatic payout system that transfers funds directly to sellers' Nigerian bank accounts when transactions are completed. This eliminates manual withdrawal processes and provides instant payouts.\n\n## How It Works\n\n### For Sellers\n\n#### 1. Bank Account Setup (One-Time)\nSellers must add their Nigerian bank account details in the Settings page before receiving payouts:\n\n1. Navigate to **Settings** from the sidebar\n2. Select your bank from the dropdown (all Nigerian banks supported)\n3. Enter your 10-digit account number\n4. Click **Verify Account** - system confirms your account name with the bank\n5. Review the verified account name\n6. Click **Save Bank Account** to complete setup\n\n**Security**: The system verifies your account details with Paystack before saving, ensuring accurate payouts.\n\n#### 2. Automatic Payouts\nWhen a buyer confirms receipt of the digital asset:\n\n1. Transaction status changes to \"completed\"\n2. System automatically calculates payout: **Price - 5% Commission**\n3. Transfer is immediately initiated to your saved bank account\n4. Payout appears in your **Payout History** section\n5. Money arrives in your bank account (usually instant)\n\n**Example**: \n- Transaction Price: ₦10,000\n- Commission (5%): ₦500\n- Your Payout: ₦9,500\n\n#### 3. Payout History\nView all your payouts in the **Seller Dashboard → My Sales** tab:\n\n- **Transaction**: Name of the item sold\n- **Amount**: Payout amount in Naira (₦)\n- **Status**: \n  - 🟡 **Pending**: Payout initiated, waiting for processing\n  - 🔵 **Processing**: Transfer in progress with Paystack\n  - 🟢 **Success**: Money successfully transferred to your bank\n  - 🔴 **Failed**: Transfer failed (reason displayed)\n- **Date**: When the payout was initiated\n- **Reference**: Paystack reference number (click to copy)\n\n### For Buyers\n\nNo changes needed! When you click **Release Funds** after confirming receipt:\n1. Transaction is marked complete\n2. Seller automatically receives their payout\n3. No additional steps required\n\n## Technical Implementation\n\n### Database Schema\n\n#### Users Table (Bank Account Fields)\n```typescript\nbankCode: text           // Bank's code (e.g., \"058\" for GTBank)\naccountNumber: text      // 10-digit account number\naccountName: text        // Account holder name\nrecipientCode: text      // Paystack recipient code for transfers\n```\n\n#### Payouts Table\n```typescript\nid: varchar (UUID)                    // Primary key\ntransactionId: varchar (UNIQUE)       // Links to transaction (prevents duplicates)\nsellerId: varchar                     // Seller receiving payout\namount: decimal(10,2)                 // Payout amount in Naira\nstatus: text                          // pending | processing | success | failed\npaystackTransferCode: text            // Paystack transfer code\npaystackReference: text               // Paystack reference for tracking\nfailureReason: text                   // Error message if failed\ncreatedAt: timestamp                  // When payout was created\nupdatedAt: timestamp                  // Last status update\n```\n\n### Backend Endpoints\n\n#### Bank Account Management\n- `GET /api/banks` - List all Nigerian banks\n- `POST /api/bank-account/verify` - Verify account number and get account name\n- `POST /api/bank-account` - Save bank account after verification\n- `GET /api/payouts` - Get seller's payout history\n\n#### Transaction Flow\n- `PATCH /api/transactions/:id/status` - When status → \"completed\":\n  1. Checks for existing payout (idempotency)\n  2. Verifies seller has bank account configured\n  3. Calculates payout amount (price - commission)\n  4. Creates payout record\n  5. Initiates Paystack transfer\n  6. Updates payout status based on result\n\n### Paystack Integration\n\nThe system uses Paystack's Transfer API with four key functions:\n\n1. **listBanks()**: Get all Nigerian banks for dropdown\n2. **verifyAccountNumber()**: Confirm account details with bank\n3. **createTransferRecipient()**: Register seller's bank account with Paystack\n4. **initiateTransfer()**: Send money to seller's account\n\n**Reference Format**: `PAYOUT-{payoutId}` (stable, no timestamps)\n\n### Security Features\n\n#### Idempotency (Prevents Duplicate Transfers)\n- Database-level unique constraint on `payouts.transactionId`\n- Application-level check before initiating transfers\n- Skips if payout already exists with \"success\" or \"processing\" status\n\n#### Authorization\n- All endpoints require authentication\n- Bank account endpoints verify user ownership\n- Only buyers can mark transactions as \"completed\"\n- Only sellers can view their own payouts\n\n#### Data Protection\n- Account numbers masked in UI (shows last 4 digits only)\n- Paystack secret key server-side only\n- No sensitive data in frontend\n- Bank details validated before saving\n\n### Error Handling\n\n#### Failed Payouts\n- Payout status marked as \"failed\"\n- Failure reason stored and displayed to seller\n- Transaction completion not blocked by payout failure\n- Seller can contact support to retry payout\n\n#### Missing Bank Account\n- System logs warning if seller hasn't set up bank account\n- Transaction still completes successfully\n- Seller can add bank account later (manual payout via support)\n\n#### API Errors\n- Comprehensive error messages from Paystack\n- User-friendly error display in UI\n- Toast notifications for all failures\n- Console logging for debugging\n\n## Frontend Components\n\n### Settings Page (`client/src/pages/Settings.tsx`)\nComplete bank account management interface:\n- Bank selection dropdown\n- Account number input (10 digits only)\n- Verify button with loading state\n- Displays verified account name\n- Save button (enabled after verification)\n- Shows current saved account (masked number)\n- Reset button to clear form\n- Responsive design\n\n### Payout History Section (`client/src/pages/SellerDashboard.tsx`)\nIntegrated into Seller Dashboard:\n- Card with \"Payout History\" header\n- Info tooltip explaining status meanings\n- Table showing all payouts\n- Status badges with color coding\n- Formatted currency (₦X,XXX.XX)\n- Formatted dates\n- Clickable Paystack references (copy to clipboard)\n- Empty state message\n- Loading state with spinner\n\n## Testing the System\n\n### Setup Test Environment\n1. Get Paystack test secret key from [Paystack Dashboard](https://dashboard.paystack.com/)\n2. Add to environment: `PAYSTACK_SECRET_KEY=sk_test_xxx`\n3. Ensure Paystack account has **Transfer** feature enabled\n\n### Test Flow\n1. **Create Seller Account**: Sign up as seller\n2. **Add Bank Account**: \n   - Go to Settings\n   - Use test bank details (Paystack provides test accounts)\n   - Verify and save\n3. **Create Transaction**: Create test transaction as seller\n4. **Buy as Different User**: \n   - Sign up as buyer\n   - Accept and pay for transaction\n5. **Complete Transaction**:\n   - Seller marks asset transferred\n   - Buyer releases funds (marks completed)\n6. **Verify Payout**:\n   - Check Payout History in seller dashboard\n   - Verify status is \"success\"\n   - Check Paystack dashboard for transfer\n\n### Test Bank Accounts (Paystack Test Mode)\nPaystack provides test bank accounts for development. Check their [documentation](https://paystack.com/docs/transfers/single-transfers/) for test account numbers.\n\n## Future Enhancements\n\n### Recommended Additions\n1. **Webhook for Transfer Status**: Consume Paystack transfer webhooks to update payout status automatically\n2. **Payout Reconciliation**: Scheduled job to sync payout statuses with Paystack\n3. **Retry Failed Payouts**: Admin interface to manually retry failed transfers\n4. **Payout Notifications**: Email/SMS when payout completes\n5. **Payout Analytics**: Dashboard showing total payouts, success rate, etc.\n6. **Bulk Payouts**: Support for processing multiple payouts at once\n7. **Payout Schedule**: Option to batch payouts (daily/weekly instead of instant)\n\n## Environment Variables\n\n```bash\n# Required for payout system\nPAYSTACK_SECRET_KEY=sk_live_xxx    # Production key\n# or\nPAYSTACK_SECRET_KEY=sk_test_xxx    # Test key for development\n```\n\n**Important**: \n- Your Paystack account must have the **Transfer** feature enabled\n- Transfers require KYC verification in production\n- Test mode works without restrictions\n\n## Support & Troubleshooting\n\n### Common Issues\n\n**\"Seller has no bank account configured\"**\n- Seller needs to add bank account in Settings\n- Payout will be skipped (can be processed manually later)\n\n**\"Failed to verify account\"**\n- Check account number is 10 digits\n- Verify bank code is correct\n- Ensure Paystack API is accessible\n\n**\"Transfer initiation failed\"**\n- Check Paystack account has sufficient balance\n- Verify Transfer feature is enabled\n- Check account has completed KYC (production)\n- Review failure reason in Payout History\n\n**\"Account name mismatch\"**\n- Verified account name must match provided name\n- Check for typos in account number\n- Contact bank if name doesn't match\n\n### Contact Support\nFor payout issues, sellers should contact platform support with:\n- Transaction ID\n- Payout reference number\n- Account details (last 4 digits)\n- Screenshot of error message\n\n## Conclusion\n\nThe automatic payout system provides a seamless, secure, and instant way for sellers to receive their earnings. With comprehensive error handling, idempotency guards, and detailed tracking, the system ensures reliable transfers while maintaining a simple user experience.\n","size_bytes":9423},"client/src/components/AppSidebar.tsx":{"content":"import { useLocation } from \"wouter\";\nimport { Home, Building2, Store, Bell, Settings, HelpCircle, LogOut } from \"lucide-react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { cn } from \"@/lib/utils\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarMenu,\n  SidebarMenuButton,\n  SidebarMenuItem,\n} from \"@/components/ui/sidebar\";\n\ninterface AppSidebarProps {\n  user: {\n    name?: string;\n    email: string;\n  };\n}\n\nexport const AppSidebar = ({ user }: AppSidebarProps): JSX.Element => {\n  const [location, setLocation] = useLocation();\n\n  const logoutMutation = useMutation({\n    mutationFn: async () => {\n      const response = await fetch(\"/api/logout\", {\n        method: \"POST\",\n        credentials: \"include\",\n      });\n      if (!response.ok) {\n        throw new Error(\"Logout failed\");\n      }\n      return response.json();\n    },\n    onSuccess: () => {\n      window.location.href = \"/\";\n    },\n  });\n\n  const menuItems = [\n    { icon: Home, label: \"Dashboard\", path: \"/seller-dashboard\", badge: null },\n    { icon: Building2, label: \"Office\", path: \"/office\", badge: null },\n    { icon: Store, label: \"Marketplace\", path: \"/marketplace\", badge: null },\n    { icon: Bell, label: \"Notifications\", path: \"/notifications\", badge: 3 },\n  ];\n\n  const supportItems = [\n    { icon: Settings, label: \"Settings\", path: \"/settings\" },\n    { icon: HelpCircle, label: \"Help Center\", path: \"/help\" },\n  ];\n\n  return (\n    <Sidebar collapsible=\"offcanvas\">\n      <SidebarHeader className=\"border-b border-gray-200 p-6\">\n        <div className=\"flex items-center gap-2\">\n          <div className=\"w-8 h-8 rounded-lg bg-[#493d9e] flex items-center justify-center shrink-0\">\n            <span className=\"text-white font-bold text-sm\">X</span>\n          </div>\n          <span className=\"text-xl font-bold text-[#041d0f]\">\n            XCROW\n          </span>\n        </div>\n      </SidebarHeader>\n\n      <SidebarContent>\n        <SidebarGroup>\n          <SidebarGroupLabel>Main Menu</SidebarGroupLabel>\n          <SidebarGroupContent>\n            <SidebarMenu>\n              {menuItems.map((item) => {\n                const Icon = item.icon;\n                const isActive = location === item.path;\n\n                return (\n                  <SidebarMenuItem key={item.path}>\n                    <SidebarMenuButton\n                      onClick={() => setLocation(item.path)}\n                      isActive={isActive}\n                      className={cn(\n                        \"transition-colors\",\n                        isActive\n                          ? \"bg-[#493d9e]/10 text-[#493d9e] hover:bg-[#493d9e]/20\"\n                          : \"text-gray-700 hover:bg-gray-100\"\n                      )}\n                    >\n                      <Icon className=\"w-5 h-5\" />\n                      <span>{item.label}</span>\n                      {item.badge && (\n                        <Badge\n                          variant=\"destructive\"\n                          className=\"ml-auto h-5 min-w-5 px-1.5 text-xs\"\n                        >\n                          {item.badge}\n                        </Badge>\n                      )}\n                    </SidebarMenuButton>\n                  </SidebarMenuItem>\n                );\n              })}\n            </SidebarMenu>\n          </SidebarGroupContent>\n        </SidebarGroup>\n\n        <SidebarGroup>\n          <SidebarGroupLabel>Support</SidebarGroupLabel>\n          <SidebarGroupContent>\n            <SidebarMenu>\n              {supportItems.map((item) => {\n                const Icon = item.icon;\n                const isActive = location === item.path;\n\n                return (\n                  <SidebarMenuItem key={item.path}>\n                    <SidebarMenuButton\n                      onClick={() => setLocation(item.path)}\n                      isActive={isActive}\n                      className={cn(\n                        \"transition-colors\",\n                        isActive\n                          ? \"bg-[#493d9e]/10 text-[#493d9e] hover:bg-[#493d9e]/20\"\n                          : \"text-gray-700 hover:bg-gray-100\"\n                      )}\n                    >\n                      <Icon className=\"w-5 h-5\" />\n                      <span>{item.label}</span>\n                    </SidebarMenuButton>\n                  </SidebarMenuItem>\n                );\n              })}\n            </SidebarMenu>\n          </SidebarGroupContent>\n        </SidebarGroup>\n      </SidebarContent>\n\n      <SidebarFooter className=\"border-t border-gray-200 p-4\">\n        <div className=\"flex items-center gap-3 mb-3\">\n          <div className=\"w-10 h-10 rounded-full bg-[#493d9e] flex items-center justify-center shrink-0\">\n            <span className=\"text-white font-semibold text-sm\">\n              {user.name?.charAt(0) || user.email.charAt(0).toUpperCase()}\n            </span>\n          </div>\n          <div className=\"flex-1 min-w-0\">\n            <p className=\"text-sm font-medium text-gray-900 truncate\">\n              {user.name || \"User\"}\n            </p>\n            <p className=\"text-xs text-gray-500 truncate\">{user.email}</p>\n          </div>\n        </div>\n        <Button\n          onClick={() => logoutMutation.mutate()}\n          disabled={logoutMutation.isPending}\n          variant=\"outline\"\n          className=\"w-full justify-start gap-2 text-gray-700 hover:text-red-600 hover:border-red-300\"\n        >\n          <LogOut className=\"w-4 h-4\" />\n          <span>\n            {logoutMutation.isPending ? \"Signing out...\" : \"Sign Out\"}\n          </span>\n        </Button>\n      </SidebarFooter>\n    </Sidebar>\n  );\n};\n","size_bytes":5797},"server/replitAuth.ts":{"content":"import * as client from \"openid-client\";\nimport { Strategy, type VerifyFunction } from \"openid-client/passport\";\nimport passport from \"passport\";\nimport session from \"express-session\";\nimport type { Express, RequestHandler } from \"express\";\nimport memoize from \"memoizee\";\nimport connectPg from \"connect-pg-simple\";\nimport { storage } from \"./storage\";\n\nif (!process.env.REPLIT_DOMAINS) {\n  throw new Error(\"Environment variable REPLIT_DOMAINS not provided\");\n}\n\nconst getOidcConfig = memoize(\n  async () => {\n    return await client.discovery(\n      new URL(process.env.ISSUER_URL ?? \"https://replit.com/oidc\"),\n      process.env.REPL_ID!\n    );\n  },\n  { maxAge: 3600 * 1000 }\n);\n\nexport function getSession() {\n  const sessionTtl = 7 * 24 * 60 * 60 * 1000;\n  const pgStore = connectPg(session);\n  const sessionStore = new pgStore({\n    conString: process.env.DATABASE_URL,\n    createTableIfMissing: false,\n    ttl: sessionTtl,\n    tableName: \"sessions\",\n  });\n  return session({\n    secret: process.env.SESSION_SECRET!,\n    store: sessionStore,\n    resave: false,\n    saveUninitialized: false,\n    cookie: {\n      httpOnly: true,\n      secure: true,\n      maxAge: sessionTtl,\n    },\n  });\n}\n\nfunction updateUserSession(\n  user: any,\n  tokens: client.TokenEndpointResponse & client.TokenEndpointResponseHelpers\n) {\n  user.claims = tokens.claims();\n  user.access_token = tokens.access_token;\n  user.refresh_token = tokens.refresh_token;\n  user.expires_at = user.claims?.exp;\n}\n\nasync function upsertUser(claims: any) {\n  await storage.upsertUser({\n    oauthSub: claims[\"sub\"],\n    email: claims[\"email\"],\n    firstName: claims[\"first_name\"],\n    lastName: claims[\"last_name\"],\n    profileImageUrl: claims[\"profile_image_url\"],\n  });\n}\n\nexport async function setupReplitAuth(app: Express) {\n  const config = await getOidcConfig();\n\n  const verify: VerifyFunction = async (\n    tokens: client.TokenEndpointResponse & client.TokenEndpointResponseHelpers,\n    verified: passport.AuthenticateCallback\n  ) => {\n    const user = {};\n    updateUserSession(user, tokens);\n    await upsertUser(tokens.claims());\n    verified(null, user);\n  };\n\n  for (const domain of process.env.REPLIT_DOMAINS!.split(\",\")) {\n    const strategy = new Strategy(\n      {\n        name: `replitauth:${domain}`,\n        config,\n        scope: \"openid email profile offline_access\",\n        callbackURL: `https://${domain}/api/auth/callback`,\n      },\n      verify\n    );\n    passport.use(strategy);\n  }\n\n  app.get(\"/api/auth/login\", (req, res, next) => {\n    passport.authenticate(`replitauth:${req.hostname}`, {\n      prompt: \"login consent\",\n      scope: [\"openid\", \"email\", \"profile\", \"offline_access\"],\n    })(req, res, next);\n  });\n\n  app.get(\"/api/auth/callback\", (req, res, next) => {\n    passport.authenticate(`replitauth:${req.hostname}`, {\n      successReturnToOrRedirect: \"/seller-dashboard\",\n      failureRedirect: \"/\",\n    })(req, res, next);\n  });\n\n  app.get(\"/api/auth/logout\", (req, res) => {\n    req.logout(() => {\n      res.redirect(\n        client.buildEndSessionUrl(config, {\n          client_id: process.env.REPL_ID!,\n          post_logout_redirect_uri: `${req.protocol}://${req.hostname}`,\n        }).href\n      );\n    });\n  });\n}\n\nexport const isAuthenticatedOAuth: RequestHandler = async (req, res, next) => {\n  const user = req.user as any;\n\n  if (!req.isAuthenticated() || !user.expires_at) {\n    return res.status(401).json({ message: \"Unauthorized\" });\n  }\n\n  const now = Math.floor(Date.now() / 1000);\n  if (now <= user.expires_at) {\n    return next();\n  }\n\n  const refreshToken = user.refresh_token;\n  if (!refreshToken) {\n    res.status(401).json({ message: \"Unauthorized\" });\n    return;\n  }\n\n  try {\n    const config = await getOidcConfig();\n    const tokenResponse = await client.refreshTokenGrant(config, refreshToken);\n    updateUserSession(user, tokenResponse);\n    return next();\n  } catch (error) {\n    res.status(401).json({ message: \"Unauthorized\" });\n    return;\n  }\n};\n","size_bytes":3980}},"version":1}